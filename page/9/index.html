<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>土豆不好吃</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="土豆不好吃">
<meta property="og:url" content="http://example.com/page/9/index.html">
<meta property="og:site_name" content="土豆不好吃">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Benny小土豆">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="土豆不好吃" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">土豆不好吃</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-flying-webp/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/03/01/flying-webp/index/" class="article-date">
  <time class="dt-published" datetime="2020-03-01T00:00:00.000Z" itemprop="datePublished">2020-03-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/website/">website</a>►<a class="article-category-link" href="/categories/website/program/">program</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/03/01/flying-webp/index/">个人网站无缝切换图片到webp</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>咱都知道，webp是一种非常优秀的图片格式，相比较png&#x2F;jpg，webp的图片体积要小，图像质量却基本没有什么下降。网站如果使用webp，那么自然也会减少图片文件的加载时间。</p>
<p>大部分发行版里都应该有个工具叫做cwebp，咱可以用cwebp转换下看下具体效果</p>
<p>~&#x2F;Downloads&#x2F;test cwebp yui.png -q 80 -o result.webp</p>
<h1 id="省略若干提示信息"><a href="#省略若干提示信息" class="headerlink" title="省略若干提示信息"></a>省略若干提示信息</h1><p>~&#x2F;Downloads&#x2F;test ls -lh<br>total 8160<br>-rw-r–r– 1 benny staff 335K Mar 1 20:06 result.webp<br>-rw-r--r--@ 1 benny staff 3.7M May 2 2019 yui.png</p>
<p>新文件大概是原来的8%左右，是不是很优秀！</p>
<p>但是如果一个一个转……聪明的你可能想要写个脚本递归转换，然后还要相应的修改数据库什么的，这样可是有点麻烦呢。那么有没有什么直接的方式呢？这就好像是，开飞机没油了，只能找个机场落地加油，然后再起飞。能不能像下面这张图这样子?？</p>
<p><img src="/images/2020030120431833.jpeg"></p>
<p>这种技术呢，叫做空中加油。你看，咱都不用落地就能加油。On-the-fly哦</p>
<p>那么我们的……答案当然是有的啦??那就是本文的重点，这个工具就是由<a target="_blank" rel="noopener" href="https://nova.moe/">Nova童鞋</a>、<a target="_blank" rel="noopener" href="https://blog.502.li/">muzi</a>、<a target="_blank" rel="noopener" href="https://blog.0xbbc.com/">cocoa</a>以及Benny小盆友一起鼓捣的webp_server_go啦！</p>
<p>不如先看看这里吧??</p>
<p><a target="_blank" rel="noopener" href="https://webp.sh/#/">https://webp.sh/#/</a> </p>
<p>放心，从[caniuse](<a target="_blank" rel="noopener" href="https://caniuse.com/">https://caniuse.com/</a>“ \l “search&#x3D;webp)的统计来看，主流浏览器都支持webp了，如果遇到Safari这样的奇葩，咱直接返回了原图</p>
<p><img src="/images/2020030120431998.png"></p>
<h2 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h2><p>使用方法很简单哦，<a target="_blank" rel="noopener" href="https://github.com/webp-sh/webp_server_go/releases">从这里下载binary</a>（或者自己build也行，deb和rpm也会稍后提供），创建如下json配置文件</p>
<p>{<br>“HOST”: “127.0.0.1”,<br>“PORT”: “3333”,<br>“QUALITY”: “80”,<br>“IMG_PATH”: “&#x2F;path&#x2F;to&#x2F;pics”,<br>“ALLOWED_TYPES”: [“jpg”,”png”,”jpeg”]<br>}</p>
<p>每一个配置项都很容易懂懂吧！如果不需要监听公网，那<code>HOST</code>就写127，藏在nginx后面。<code>ALLOWED_TYPES</code>是转换的图片类型，实际上目前最多用的也就是jpg和png了，暂时还未添加对bmp对支持。</p>
<p>我用WordPress，那么IMG_PATH就可以写<code>/var/www/html</code>这种，不用写到<code>wp-content/uploads</code>哦。</p>
<p>然后</p>
<p>.&#x2F;webp-server -config &#x2F;path&#x2F;to&#x2F;config.json</p>
<p>Ok! 你的3333端口已经被我接管了。接下来配置下nginx什么的，比如WordPress可以这么配置，在server段中哦</p>
<p>location ^~ &#x2F;wp-content&#x2F;uploads&#x2F; {<br>    proxy_pass <a target="_blank" rel="noopener" href="http://127.0.0.1:3333/">http://127.0.0.1:3333</a>;<br>}</p>
<p>然后就可以起飞啦！</p>
<p>哦对了，不用担心，一张图片只会被转换一次，除非原图片变了，才会重新转换。</p>
<p>[v_blue]?呃……就是个转换图片的东西……？ ?‍♀️No, it’s more than that.[&#x2F;v_blue]</p>
<h2 id="持久运行"><a href="#持久运行" class="headerlink" title="持久运行"></a>持久运行</h2><p>都知道，session和shell是绑定的，所以总不能一直开着终端吧？那么简单的话，我们可以用screen来解决这个问题</p>
<p>screen -S webp<br>.&#x2F;webp-server –config &#x2F;path&#x2F;to&#x2F;config.json</p>
<p>甚至我们可以使用systemd</p>
<p>cp init&#x2F;webps.service &#x2F;lib&#x2F;systemd&#x2F;system&#x2F;<br>systemctl daemon-reload<br>systemctl enable webps.service<br>systemctl start webps.service</p>
<h2 id="预缓存功能"><a href="#预缓存功能" class="headerlink" title="预缓存功能"></a>预缓存功能</h2><p>咱可能是有很多图片的，如果收到请求的时候去转换，那么其实会慢的，那怎么办！</p>
<p><code>./webp-server --prefetch</code>，这样就会帮你预先转换图片哦！到时候请求来了直接返回，经济方便又实惠。</p>
<p>批量转换进行中</p>
<p><img src="/images/202003012043237.png"></p>
<p>臣妾无法转换php文件为webp呀?️</p>
<p>转换时，你的CPU处于被支配的痛苦中……</p>
<p><img src="/images/2020030120432442.png"></p>
<h2 id="使用效果图"><a href="#使用效果图" class="headerlink" title="使用效果图"></a>使用效果图</h2><p><img src="/images/2020030120432636.png"></p>
<h2 id="benchmark"><a href="#benchmark" class="headerlink" title="benchmark"></a>benchmark</h2><h3 id="用老婆照片做benchmark"><a href="#用老婆照片做benchmark" class="headerlink" title="用老婆照片做benchmark"></a>用老婆照片做benchmark</h3><p>179张，各式各样的壁纸</p>
<p>这个是原图</p>
<p><img src="/images/2020030120432648.png"></p>
<p>这个是转换之后的大小，大概只有原来的13%</p>
<p><img src="/images/2020030120432797.png"></p>
<h3 id="1-4M"><a href="#1-4M" class="headerlink" title="1-4M"></a>1-4M</h3><p>（感谢<a target="_blank" rel="noopener" href="https://blog.502.li/">muzi</a>提供的图片）</p>
<p>压缩比为9.3%</p>
<p><img src="/images/2020030120432897.png"></p>
<h3 id="4-32M"><a href="#4-32M" class="headerlink" title="4-32M"></a>4-32M</h3><p>压缩比为6.7%</p>
<p><img src="/images/2020030120433042.png"></p>
<h3 id="500K-1M"><a href="#500K-1M" class="headerlink" title="500K-1M"></a>500K-1M</h3><p>14.68%</p>
<p><img src="/images/2020030120433161.png"></p>
<h3 id="500K"><a href="#500K" class="headerlink" title="500K"></a>500K</h3><p>23.3%</p>
<p><img src="/images/2020030120433299.png"></p>
<h3 id="手机拍摄的人像"><a href="#手机拍摄的人像" class="headerlink" title="手机拍摄的人像"></a>手机拍摄的人像</h3><p>小部分是Pixel 3拍摄的，剩下是其他手机&#x2F;相机拍摄的人像。</p>
<p>16%</p>
<p><img src="/images/202003012043334.png"></p>
<p>所以基本上，大概图片大小会变为原来的20%左右。</p>
<h2 id="嗯哼？"><a href="#嗯哼？" class="headerlink" title="嗯哼？"></a>嗯哼？</h2><p>欢迎star、fork！欢迎提出建议，功能优化等等，不过建议使用英文哦！</p>
<h2 id="相关链接"><a href="#相关链接" class="headerlink" title="相关链接"></a>相关链接</h2><p>开源地址： <a target="_blank" rel="noopener" href="https://github.com/webp-sh/webp_server_go">https://github.com/webp-sh/webp_server_go</a> 官方网站：<a target="_blank" rel="noopener" href="https://webp.sh/">https://webp.sh/</a></p>
<p>[gt href&#x3D;’<a target="_blank" rel="noopener" href="https://github.com/webp-sh/webp/_server/_go'/]%E5%BF%AB%E6%9D%A5%E6%88%B3%E7%AB%A0%E9%B1%BC%E7%8C%AB/[/gt/]">https://github.com/webp-sh/webp\_server\_go&#39;\]快来戳章鱼猫\[/gt\]</a></p>
<h2 id="参考阅读"><a href="#参考阅读" class="headerlink" title="参考阅读"></a>参考阅读</h2><p><a target="_blank" rel="noopener" href="https://nova.moe/re-introduce-webp-server/">让站点图片加载速度更快——引入 WebP Server 无缝转换图片为 WebP</a> ??‍♂️</p>
<p><a target="_blank" rel="noopener" href="https://await.moe/2020/02/webp-server-in-rust/">WebP Server in Rust、</a><a target="_blank" rel="noopener" href="https://await.moe/2020/02/note-about-encountered-memory-changes-for-no-reason-in-golang/">记 Golang 下遇到的一回「毫无由头」的内存更改</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/03/01/flying-webp/index/" data-id="clhp7rtgb002ws2qr19dt6gr9" data-title="个人网站无缝切换图片到webp" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-ballon/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/01/30/ballon/index/" class="article-date">
  <time class="dt-published" datetime="2020-01-30T00:00:00.000Z" itemprop="datePublished">2020-01-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/justsay/">justsay</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/01/30/ballon/index/">自由的气球</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p> </p>
<p>1945年，二战结束。根据《波茨坦协定》，德国在战败之后由英、美、法、苏四国占领。由于与苏联理念上的差异，英美法三国所占领土最终合并为一个占领区，组建新政权西德。</p>
<p>随着冷战的加剧，1961年柏林墙修建。至此，德国人开始了十八番武艺穿越柏林墙的故事。</p>
<p>2018年的德国电影《气球》便讲述了穿越柏林墙中的一个真实故事。</p>
<p><img src="/images/2020013013350445.jpeg"></p>
<p>以下内容可能涉及剧透，请谨慎阅读。</p>
<p>影片时长125分钟，情节十分紧张，听我的， 专心看，别玩手机了。</p>
<p>[collapse title&#x3D;”剧情概要”]</p>
<ul>
<li>第一次热气球</li>
</ul>
<p>影片刚开始，皮特一家人就升起了热气球。可惜由于没有考虑到高空温度低等问题，导致失败。</p>
<p>坠落的热气球等被东德当局发现。</p>
<ul>
<li>美国人</li>
</ul>
<p>为了准备热气球，两家人准备了两年。意识到气球可能不行之后，皮特一家人打算去美国大使馆附近寻求美国人的帮助。一家人把写有求救信的烟盒塞到了一个女人的背包里，然而却只是徒劳，美国人以为他想要烟。无奈之下，他们只能再次选择热气球</p>
<ul>
<li>第二次热气球</li>
</ul>
<p>德国当局已经开始进行进一步的调查与抓捕，皮特和冈特两家人只能分秒必争努力打造新的热气球。最终，他们的热气球成功降在了西德。 [&#x2F;collapse]</p>
<h2 id="小人物"><a href="#小人物" class="headerlink" title="小人物"></a>小人物</h2><p>在影片中，冈特的儿子不小心对幼儿园老师说出自己爸爸在没日没夜的缝纫。秘密警察过来调查，问到幼儿园老师大家有没有什么搞什么大件、或者说缝纫什么的打算</p>
<p>女老师思考片刻，回答：有，大家都在努力的缝国旗，庆祝东德建国30年。</p>
<p><img src="/images/2020013013350521.png"></p>
<p>这个情节让我想起了韩国电影《出租车司机》里的一个类似的情节：士兵发现了德国记者的汉城车牌，他似乎明白了什么，然后放他们走了。</p>
<p><img src="/images/2020013013350640.jpeg"></p>
<p>1989年，东欧巨变，苏联也摇摇欲坠。柏林墙拆毁，两德统一。</p>
<p>30年过去了，柏林墙已经不在了，另一堵墙却越来越高。共同点是，两堵“墙”都是用来阻止本国人民对自由的追求。不同点是，德国人用一系列可歌可泣的行动歌颂了有史以来最伟大的逃亡，为了追求自由而进行的前仆后继的逃离——向往自由，是人类与生俱来的本能。柏林墙最终被拆毁了。</p>
<h2 id="思考"><a href="#思考" class="headerlink" title="思考"></a>思考</h2><p>有的时候，可能我们别无选择，甚至连反抗都不敢。可是，如果敢于反抗的人都离开了，那他们就赢了。</p>
<p>环境也许很恶劣，恶劣到连说一句不是赞美的话都会被千夫所指。也许我们不敢坚持自己的立场，不敢说出真话。但是我们至少可以选择沉默，至少要有conscious。就像两部影片中的小人物一样。</p>
<p>想想看，你就是多买了点布，有人就要向上汇报；走在大使馆附近，看到有无数只眼睛在偷瞄着你，酒店中也有人在监视着你；说不准因为看到了什么就会被带走讯问，警察可以随意进你家搜查；对面邻居就是秘密警察，阶级斗争从娃娃抓起，甚至人们以举报为荣。即使是军人，可能也会因为没有抓到人而遭受严厉的讯问。这一切的一切，就仿佛是奥威尔的《1984》中所描述的大洋国一样。你想要这样的生活吗？想要吗？嗯？？摸着自己的良心问下，现在，此时此刻，你应该怎么做？问问自己，谎言的代价是什么？</p>
<p><img src="/images/2020013013350735.jpeg"></p>
<blockquote>
<p>Freedom has many difficulties and democracy is not perfect, but we have never had to put a wall up to keep our people in, to prevent them from leaving us.</p>
<p>自由有许多困难，民主亦非完美，然而我们从未建造一堵墙把我们的人民关在里面，不准他们离开。</p>
<p> </p>
<p>约翰·肯尼迪 <a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E6%88%91%E6%98%AF%E6%9F%8F%E6%9E%97%E4%BA%BA">《我是柏林人》</a></p>
</blockquote>
<h2 id="参考阅读"><a href="#参考阅读" class="headerlink" title="参考阅读"></a>参考阅读</h2><p><a target="_blank" rel="noopener" href="https://program-think.blogspot.com/2009/07/break-through-berlin-wall.html">《学习一下德国人民的翻墙精神》</a></p>
<p><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E6%9F%8F%E6%9E%97%E5%9C%8D%E7%89%86">柏林墙 – 维基百科</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.502.li/archives/thinking-2019.html">《【旧文重写】毕业后的一些思考》</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/01/30/ballon/index/" data-id="clhp7rteh000ms2qrcanq6wjy" data-title="自由的气球" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-wp-tgbot/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/01/19/wp-tgbot/index/" class="article-date">
  <time class="dt-published" datetime="2020-01-19T00:00:00.000Z" itemprop="datePublished">2020-01-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/website/">website</a>►<a class="article-category-link" href="/categories/website/program/">program</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/01/19/wp-tgbot/index/">使用Telegram Bot接受和回复WordPress评论</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p> </p>
<p>当你的博客收到了一条评论的时候，想要回复，应该怎么做呢？打开浏览器，打开后台，等待加载，回复……哦对了，我还有一个步骤，就是不在家的话还得<a target="_blank" rel="noopener" href="https://twitter.com/BennyThinks/status/1214369246324543488?s=20">开一个全局代理</a>。</p>
<p>这怎么行，我都要懒死了。生气??</p>
<p>[v_blue] 没错的，历经1958天，我的博客被DNS污染啦。</p>
<p><a target="_blank" rel="noopener" href="https://twitter.com/BennyThinks/status/1214369246324543488?s=20">https://twitter.com/BennyThinks/status/1214369246324543488?s=20</a></p>
<p>[&#x2F;v_blue]</p>
<p>假如能够用telegram bot完成这种回复操作就好了！那么是当然的了。</p>
<p><a target="_blank" rel="noopener" href="https://dmesg.app/wp-content/uploads/2020/01/2020011911361630.png"><img src="/images/2020011911361630.png"></a></p>
<p> </p>
<p><a target="_blank" rel="noopener" href="https://dmesg.app/wp-content/uploads/2020/01/202001191136176.jpeg"><img src="/images/202001191136176.jpeg"></a></p>
<p> </p>
<h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><h3 id="Basic-Auth"><a href="#Basic-Auth" class="headerlink" title="Basic Auth"></a>Basic Auth</h3><p>插件会为WordPress开启Basic Auth，因此要用复杂的密码，非常复杂的那种，并且https哦！</p>
<h3 id="WordPress-Hook"><a href="#WordPress-Hook" class="headerlink" title="WordPress Hook"></a>WordPress Hook</h3><p>WordPress博客在新添加一条评论的时候，会触发N多钩子，其中有一个钩子叫comment_post，这个钩子被触发后，就会给调用并给相应的回调函数三个参数<code>$comment_ID, $comment_approved, $comment_obj</code>。<code>$comment_obj</code>就是评论者留下的信息了，大概是如下结构的数组</p>
<p> </p>
<p><a target="_blank" rel="noopener" href="https://dmesg.app/wp-content/uploads/2020/01/2020011911361943.jpeg"><img src="/images/2020011911361943.jpeg"></a></p>
<p>根据post_id comment_id等，使用WordPress自带的函数就能生成完整的评论信息。</p>
<p>之后调用Telegram bot的REST API，就可以发送消息给用户了。</p>
<h3 id="Telegram"><a href="#Telegram" class="headerlink" title="Telegram"></a>Telegram</h3><p>当回复机器人消息时，会直接向WordPress的REST API发起评论添加请求。当然啦，你注意到了机器人消息里的id:123,456了吗？这个就是小小的标识符哦。</p>
<p>这个是用golang实现的机器人，轮询模式。其实我知道这个是可以用Telegram webhook完成的，直接写在插件里用PHP实现。更进一步，可以做到不开启Basic Auth，直接用WordPress的接口甚至是直接插入数据库。不过为了练习嘛……</p>
<h2 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h2><p>基本可以如下归纳</p>
<ol>
<li>安装插件</li>
<li>创建bot、获取自己的user id</li>
<li>插件中添加相应的设置</li>
<li>编辑配置，并运行bot后端</li>
<li>可以了。</li>
</ol>
<h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><h3 id="服务器在国内"><a href="#服务器在国内" class="headerlink" title="服务器在国内"></a>服务器在国内</h3><p>WordPress的服务器上，想办法开个代理（目前只支持http代理），然后插件设置里加入配置信息；</p>
<p>Telegram的服务器上，也想办法开个代理，然后设置这样两条环境变量</p>
<p>export http_proxy&#x3D;<a href="http://127.0.0.1:1087;export">http://127.0.0.1:1087;export</a> https_proxy&#x3D;<a target="_blank" rel="noopener" href="http://127.0.0.1:1087/">http://127.0.0.1:1087</a>;</p>
<p>或者干脆上<a target="_blank" rel="noopener" href="https://github.com/rofl0r/proxychains-ng">proxychains</a>试试。</p>
<p>[v_error]proxychains貌似只能代理dynamically linked 的程序，golang的二进制是statically linked的哎 [&#x2F;v_error]</p>
<h3 id="Basic-Auth-1"><a href="#Basic-Auth-1" class="headerlink" title="Basic Auth"></a>Basic Auth</h3><p>Basic Auth就是在HTTP请求头里加上base64编码之后的认证信息。优点是简单方便，易于实现，缺点很多。</p>
<p>但是有一点是肯定的，在www这个层面上，不走TLS的登录，都是耍流氓。</p>
<p><a target="_blank" rel="noopener" href="https://dmesg.app/wp-content/uploads/2020/01/2020011911362066.png"><img src="/images/2020011911362066.png"></a></p>
<p>全程TLS，啥都看不到。</p>
<p><a target="_blank" rel="noopener" href="https://dmesg.app/wp-content/uploads/2020/01/2020011911362539.png"><img src="/images/2020011911362539.png"></a></p>
<p>未TLS，底裤?都看光了</p>
<h3 id="机器人配置与命令行参数"><a href="#机器人配置与命令行参数" class="headerlink" title="机器人配置与命令行参数"></a>机器人配置与命令行参数</h3><p>{<br>“username”: “admin”,<br>“password”: “admin”,<br>“url”: “<a target="_blank" rel="noopener" href="http://localhost/">http://localhost/</a>“,<br>“token”: “907J6Tw”,<br>“uid”: “23231321”,<br>“admin”: 1,<br>“tail”: “本评论由Telegram Bot回复～❤️”<br>}</p>
<p>-c指定配置文件路径，默认使用当前目录下的config.json</p>
<p>-f强制运行，哪怕是http的……</p>
<p>-c file set configuration file (default “config.json”)<br>-f force to run even on http sites.<br>-h this help<br>-v show version and exit</p>
<h2 id="适配其他博客程序"><a href="#适配其他博客程序" class="headerlink" title="适配其他博客程序"></a>适配其他博客程序</h2><p>其实没啥好适配的……因为基本上要重写的。</p>
<p>只要能够找到相应的hook，在评论之后触发一个事件，那么就可以了。???</p>
<h2 id="开源地址"><a href="#开源地址" class="headerlink" title="开源地址"></a>开源地址</h2><p>[gt href&#x3D;’<a target="_blank" rel="noopener" href="https://github.com/BennyThink/wp-comments-tgbot'/]%E5%BC%80%E6%BA%90%E5%9C%B0%E5%9D%80/[/gt/]">https://github.com/BennyThink/wp-comments-tgbot&#39;\]开源地址\[/gt\]</a></p>
<blockquote>
<p>为了更好的偷懒，付出成倍的精力?</p>
<p>————<a target="_blank" rel="noopener" href="https://www.zuiyu.xyz/">zuiyu</a></p>
</blockquote>
<p>然后就这么水了一波？????</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/01/19/wp-tgbot/index/" data-id="clhp7rtnl00bis2qr4q0a41zb" data-title="使用Telegram Bot接受和回复WordPress评论" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-work-life-balance/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/12/25/work-life-balance/index/" class="article-date">
  <time class="dt-published" datetime="2019-12-25T00:00:00.000Z" itemprop="datePublished">2019-12-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/justsay/">justsay</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/12/25/work-life-balance/index/">工作与生活</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p> </p>
<p>很久之前，看到一个人的博客，副标题中写到：不折腾，怎么对得起好奇害死猫的世界。</p>
<p>现在大概已经找不到这个博客了，但是这句话倒还是记得很清楚的。因为我也很喜欢折腾。为什么这么说呢？</p>
<p>作为以写代码为生的码农，必备的技能自然是以各种有趣的、奇怪的写码姿势完成各式各样的需求，除此之外，外带一些附加技能，跑个代码啦，导个数据库什么的。相信每一位码农，至少也是能够做这些的。</p>
<p>只不过呢，我这个“码农”有点喜欢折腾，我比较喜欢鼓捣各种有意思没意思的东西。比如就从我的过往博文来看吧：</p>
<p>信息安全：一个连高数都学不明白的孩子，竟然如此胆大妄为的说自己写过整整十几篇信息安全相关的文章，真是初生牛犊；</p>
<p>建站运维：ESXi VPS 微软小冰API……；</p>
<p>翻墙：使用trojan……</p>
<p>树莓派、Grafana、iSCSI、TLS1.3、HTTP&#x2F;2、Radius、TimeMachine……</p>
<p>（哦这个是macOS备份的那个，不是你想的时光机，要不我就回到6年前right the wrong了。）</p>
<h2 id="折腾"><a href="#折腾" class="headerlink" title="折腾"></a>折腾</h2><p>所谓折腾，自然也就是说，我在这方面有些成果，尽管可能也只是一些皮毛，不至于有多高深。我写不出来RSA的公式，讲不明白它的算法，但至少我了解什么是非对称加密算法，熟悉GPG的用法。虽说不至于得个奖什么的，但至少技术水平上是有一定提升和拓宽的。</p>
<p>也许正是因为有一个博客，可以把自己折腾的成果分享出来，至少能满足一下虚荣心。所以也是乐在其中吧。</p>
<h2 id="可是这与标题有什么关系呢？"><a href="#可是这与标题有什么关系呢？" class="headerlink" title="可是这与标题有什么关系呢？"></a>可是这与标题有什么关系呢？</h2><p>我觉得是有的，因为这些对于我来说是生活，折腾是我的生活中的一部分。而我已经不再是无忧无虑的学生了，为了活下去，就要有工作。工作与生活之间，必然要有一定的取舍和界限。如果某一天，工作与生活之间的界限越来越不清晰，那么会怎样呢？</p>
<p><a target="_blank" rel="noopener" href="https://dmesg.app/wp-content/uploads/2019/12/20191225153801100.jpg"><img src="/images/20191225153801100.jpg"></a></p>
<p>俗话说，文不可以一篇无图。那么……</p>
<h2 id="一个现象"><a href="#一个现象" class="headerlink" title="一个现象"></a>一个现象</h2><p>先从一个现象说起吧：</p>
<p>2017年，我总计写了三四十篇博文，2018年，总计19篇。到了几年，2019年，总计16篇，一部分还都是简单的感慨，2017年的长篇大论几乎都没有了。可以预见，2020年我大概只能写十篇出头、甚至是个位数博文。希望2020年的这个时候大家能来<strong>使劲打我的脸</strong>。</p>
<p>为啥会这样呢？本人没多少墨水，知识储备量比较少，学习新知识又比较慢，再加上又懒又笨，技术的学习总是有瓶颈期的。这是一方面原因。</p>
<p>另一方面原因，我需要讲一个故事。</p>
<h2 id="一个故事"><a href="#一个故事" class="headerlink" title="一个故事"></a>一个故事</h2><p>这个故事是来源于一位友人。有几次偶然和她聊天，谈到工作，谈到优化自己的基础设施，谈到博客，谈到去北京出差。（其实哪有谈到嘛，就是有一句没一句的聊着。）</p>
<p>我：去北京出差，我要再准备一个手机，怕被查手机</p>
<p>她：你手机有啥见不得人的秘密</p>
<p>我：无论我手机有没有见不得人的秘密，我都拒绝行政机构在没有拿到司法机构的授权前检查我的设备。</p>
<p>（其实这个时候我是想说下面这句话的，谢谢Edward）</p>
<blockquote>
<p>Arguing that you don’t care about the right to privacy because you have nothing to hide is no different than saying you don’t care about free speech because you have nothing to say.</p>
</blockquote>
<p>她：看来你还是太闲，有时间想这些。</p>
<p>几个月之后。</p>
<p>我：zsh插件……博客……</p>
<p>她：忙得要死，没时间弄博客，睡觉都不够。</p>
<p>故事讲完了。</p>
<h3 id="但是关于隐私与自由，关于Nothing-to-hide，我还想再说一句："><a href="#但是关于隐私与自由，关于Nothing-to-hide，我还想再说一句：" class="headerlink" title="但是关于隐私与自由，关于Nothing to hide，我还想再说一句："></a>但是关于隐私与自由，关于Nothing to hide，我还想再说一句：</h3><blockquote>
<p>Ultimately, saying that you don’t care about privacy because you have nothing to hide is no different from saying you don’t care about freedom of speech because you have nothing to say. Or that you don’t care about freedom of the press because you don’t like to read. Or that you don’t care about freedom of religion because you don’t believe in God. Or that you don’t care about the freedom to peaceably assemble because you’re a lazy, antisocial agoraphobe. Just because this or that freedom might not have meaning to you today doesn’t mean that that it doesn’t or won’t have meaning tomorrow, to you, or to your neighbor – or to the crowds of principled dissidents I was following on my phone who were protesting halfway across the planet, hoping to gain just a fraction of the freedom that my country was busily dismantling.</p>
</blockquote>
<p>针针见血，Edward Snowden <em>- Permanent Record</em></p>
<h2 id="另一方面原因"><a href="#另一方面原因" class="headerlink" title="另一方面原因"></a>另一方面原因</h2><p>好吧，我要说，学生时代我是个比较奇怪的孩子。</p>
<p>对于那些我认为的完全没有用、或者对自己并无太大帮助的课，我会去干点别的事情，比如看书、或者研究点什么。《鸟哥Linux》这种技术书籍，《学会提问》这种非技术书籍都有，有时偷懒也会看一些优秀博主的博文。</p>
<p>也正是因为学生嘛，课再多能有多少，以我的智商能够应付考试就够了（?这也是我没拿奖学金的原因吧）。所以空闲时间比较多……我啊，一旦闲下来……就容易折腾，就容易因为<strong>好奇而害死猫</strong>。</p>
<p>所以，这就是我要说的另一方面的原因：有了充足的时间可以让我瞎鼓捣。</p>
<p>工作与生活，更准确的说，工作与折腾中技术的长进。工作，真的能够让我们的技术得到长足的发展吗？</p>
<p>这个问题很难回答，不同的公司，不同的文化，不同的部门，甚至是不同的领导和老板，都会导致这个问题的基准的偏向。</p>
<h2 id="愚以为"><a href="#愚以为" class="headerlink" title="愚以为"></a>愚以为</h2><p>但是，以我个人的短暂的工作经验来看，对于大部分普通人而言：</p>
<ul>
<li>公司规模越大，也就越倾向于分工明确，分工明确也就意味着一个萝卜一个坑，做Web开发的不可能让你去维护官网；</li>
<li>某种工作的初期，需要学习适应新的环境，包括相应的开发框架、语言、数据存储等。在这个阶段，自然会得到一定程度的提升；</li>
<li>之后，随着工作模式的固定，能够应付工作了，自然很容易做着重复的事情；</li>
<li>工作很忙，甚至还要加班，导致没有时间去学习、提升；</li>
<li>更进一步，如果忙得连睡觉都变成了难得的享受，那生活只剩下工作，连思考也会变得局限。</li>
</ul>
<p>如果连思考也会变为局限，那简直是太不幸了。<strong>技术可以一日千里，但是思维能力却不能</strong>。思维能力需要长时间的锻炼，需要长时间的阅读、理解、思考、输出。</p>
<p>工作是工作，生活是生活。人们都说下班后的三个小时会决定你的余生的高度，能不能决定余生的高度这我倒不知道，有人拿来看剧，有人拿来学习。但是有一点我很确定：如果连下班后的三个小时都不是自己的，那还有什么生活，还能有什么长进，拿什么来折腾，拿什么来思考。梦里吗。Guido还不是<a target="_blank" rel="noopener" href="https://www.python.org/doc/essays/foreword/">闲得打发时间</a>才发明了Python。</p>
<h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>很早以前，在<a target="_blank" rel="noopener" href="https://dmesg.app/silence-is-harmful.html">《沉默是最大的伤害》</a>中就提到了思维能力与技术的观点：</p>
<p>作为IT 从业者应该不只是有技术能力，还应该有更强的<strong>自由思想、独立思考、批判性思维能力</strong>——只有这样才能跳出围墙。</p>
<p>在这堵围墙之内，你的思想只不过是党允许的；在这堵围墙之内，党拥有定义2+2&#x3D;5的权力；在这堵围墙之内，你并不具有任何实质性的自由意志；在这堵围墙之内，你只不过是傻傻被割的韭菜。</p>
<p>这也是3年前，我灌水的一篇<a target="_blank" rel="noopener" href="https://dmesg.app/other-than-tech.html">《除了技术，你还应该会什么》</a>曾经提到过三点非常重要的能力：</p>
<p><strong>自由思想、独立思考、批判性思维</strong>。</p>
<p>人人都知道，越是多样性的生态系统，越是稳定，越是不容易遭到破坏；即使遭到破坏，也较容易恢复过来。</p>
<p>我想，作为程序员，怎么说也是个有点门槛的工作，英文阅读能力更强，更能有机会使用Google，更能有机会了解到外面的世界，更能有机会了解一些除了技术之外的事情吧，更能够<strong>摆脱洗脑教育并形成多元化的自由思想</strong>。看来真的是我想多了。哎。</p>
<p>希望，读到这篇文章的读者们，能够渐渐理解这三点吧。那么我也就没白费口水，我的下班后的三个小时四个小时也就没有白费。</p>
<hr>
<p> </p>
<p>这篇应该是本博客2019年的最后一篇了，希望各位读者们2019年完美收尾，2020年生活工作双加好更加顺利。俺也会再接再厉，争取2020年多写点，打破前面自己的预言:-)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2019/12/25/work-life-balance/index/" data-id="clhp7rtne00bes2qr36l44db7" data-title="工作与生活" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-akira/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/12/15/akira/index/" class="article-date">
  <time class="dt-published" datetime="2019-12-15T00:00:00.000Z" itemprop="datePublished">2019-12-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/justsay/">justsay</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/12/15/akira/index/">深海晶好难啊</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>有一句话一定要小点声说?，新垣结衣是我老婆。</p>
<p>一年前，我刚刚参加工作，正好碰到ガッキー老婆主役的《无法成为野兽的我们》，于是便去追了。</p>
<p>直到剧终，我都没怎么理解这部剧究竟在讲什么。阿晶怎么就和京谷分手了，恒星怎么就身败名裂了，我老婆怎么就跟了松田龙平。野木阿姨是不是有点玩脱了。</p>
<p>好吧，我要承认，可能是当初看剧不认真，总是一边玩手机一边看，哎。老婆对不起你，我下次再也不敢玩手机了。</p>
<hr>
<p>一年后的今天，在一个非常阳光明媚的、难得的风平浪静的闲暇的周末下午，我从移动硬盘里找到了这部剧，重新看了起来。</p>
<p>深海晶真的好难啊。生活真的好难啊。阿晶如果能再强势一点就好了。强势一点，把朱里撵走；强势一点，怕他什么99老娘就是要辞职。</p>
<p>阿晶工作能力这么强，公关、接待、写PPT、演示业务，一个人干三四个人的活，带薪假还要被人吵醒工作，不明不白的做了很多本来应该工作职责以外的事情。社长像精神病一样大吼大叫，分不清工作任务。此时应该呼叫一下程序员津崎平匡：指示非常明确。</p>
<p>竟然还要为人擦屁股而土下座，甚至在之后还要被职务骚扰。我的刀已经拔出来了。</p>
<p><img src="/images/2019121513315242.png" alt="《我们无法成为野兽》这部剧火到爆"></p>
<p>周一零点，哦不是周二，地铁站的末班电车，被人撞翻的手机，如果跳下去了一切就都解决了吧。四杯啤酒都无法排遣的艰难。</p>
<p>一切都是生活所迫啊，另一边的根元恒星也被人抓着把柄。恒星说阿晶的笑容恶心，是假笑。是恒星的冷嘲热讽使得深海晶脱下了只会逃避、不会拒绝、只会忍让、总是以虚假的笑容面对一切的面具。</p>
<p>也许，只有到了一定年纪，有了一定的经历，才能体会到吧。</p>
<hr>
<p>日本人这一两年就是不想上班呢……</p>
<p>从《无法成为野兽里的》到《凪的新生活》中就是不想上班的黑木华；</p>
<p>《我要准时下班》里准时下班的东山结衣（吉高由里子）；</p>
<p>《我的事说来话长》家里蹲，话多喜欢和秘书姐姐对着干的生田斗真；</p>
<p>就算上班，《这个不可以报销》里的多部未华子也会让你的报销很痛苦的哦；</p>
<p>那还是不上班了，但是《坡道上的家》带孩子也是很困难的哦！</p>
<hr>
<p>你看，就是要这样贴近生活嘛。</p>
<p>工作一年半之后，再次看这部剧，莫名的觉得感同身受，真的好难啊。我也好难啊。什么时候能够像野兽一样自由自在就好了。????</p>
<p>哦对了，这位冈持三郎，有没有觉得有些好似戏外的我们呢？</p>
<p><img src="/images/2019121513320032.jpeg" alt="https://pic.pimg.tw/ricgrady/1540040590-2364988629_l.jpg"></p>
<p><img src="/images/2019121513320775.jpeg" alt="https://pic.pimg.tw/ricgrady/1540040592-1740601626_l.jpg"></p>
<hr>
<p>不说了，我爱老婆。老婆爱我。</p>
<blockquote>
<p>在这一点上我不接受一切异议和反驳。</p>
</blockquote>
<p><img src="/images/2019121513321127.jpeg" alt="https://2.bp.blogspot.com/-HAbvKir5GTY/WGXhP-Q62zI/AAAAAAAABig/DtBLL9pkEUgAPEsDKs2xEdzZpbj7kgaiACLcB/s1600/snapshot20161230122157.jpg"></p>
<p>我要去赚钱养老婆啦。じゃあね。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2019/12/15/akira/index/" data-id="clhp7rtds0003s2qr484jemdg" data-title="深海晶好难啊" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-esxi-tutorial/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/11/16/esxi-tutorial/index/" class="article-date">
  <time class="dt-published" datetime="2019-11-16T00:00:00.000Z" itemprop="datePublished">2019-11-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/it/">it</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/11/16/esxi-tutorial/index/">ESXi入门指南</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="什么是ESXi"><a href="#什么是ESXi" class="headerlink" title="什么是ESXi"></a>什么是ESXi</h2><blockquote>
<p>VMware ESXi是由VMware开发的用于部署和服务虚拟计算机的企业级1类管理程序。作为Type-1虚拟机管理程序，ESXi不是操作系统上安装的软件应用程序；相反，它包括并集成了重要的OS组件，例如内核。在4.1版之后，VMware将ESX重命名为ESXi。</p>
</blockquote>
<p>摘自维基百科英文版翻译</p>
<p>简单的说，ESXi就是一个虚拟机。但是与VMware Workstation、VirtualBox等工具却又有些不同。更具体的说，VMware Workstation等工具是运行在操作系统之上的一个软件，如果没有对应的操作系统（Windows、macOS、Linux）等，它自身是无法运行的，操作系统不让它做的事情它也做不了，这种虚拟机我们一般叫“Type 2”虚拟机。</p>
<p>既然有Type 2，那也是有Type 1的，所谓Type 1虚拟机，就是它本身就是一个操作系统，直接运行在裸机上。ESXi就属于这种。</p>
<p> </p>
<p>“人傻钱多戴，美帝良心想”</p>
<p>提到戴尔，我相信绝大部分人的印象都是这家伙不是卖笔记本、卖显示器，还卖服务器的吗？</p>
<p>哦好吧，其实<strong>VMware是DELL的子公司</strong>。是这样的，VMware被EMC收购了，DELL又把EMC收购了。</p>
<h2 id="ESXi硬件要求"><a href="#ESXi硬件要求" class="headerlink" title="ESXi硬件要求"></a>ESXi硬件要求</h2><p>ESXi的硬件要求很低，总结来说大概如下：</p>
<ul>
<li>至少双核CPU</li>
<li>至少4G内存</li>
<li>以太网控制器</li>
</ul>
<p>除此之外，最好再支持硬件虚拟化Intel VT-x 或 AMD RVI</p>
<p>具体详细硬件配置可以查看官网的文档 <a target="_blank" rel="noopener" href="https://docs.vmware.com/cn/VMware-vSphere/6.5/com.vmware.vsphere.install.doc/GUID-DEB8086A-306B-4239-BF76-E354679202FC.html">ESXi硬件要求</a></p>
<p>相信大家的配置绝对足够跑ESXi了，不过有几点需要注意的地方</p>
<ul>
<li>ESXi本身不支持无线网卡，但是我们可以把无线网卡直通给虚拟机</li>
<li>“不支持”Realtek 螃蟹?️网卡，VMware因为商业化原因移除了对Realtek的支持，但是可以找办法添加回去的</li>
</ul>
<h2 id="使用什么设备运行ESXi"><a href="#使用什么设备运行ESXi" class="headerlink" title="使用什么设备运行ESXi"></a>使用什么设备运行ESXi</h2><p>很简单，用旧的笔记本，各种服务器……好吧，对于个人使用来说，服务器还是算了，那个耗电和噪音受不了的。</p>
<p>对于个人使用来说， 淘汰的笔记本（配置足够的话）、各种迷你主机是比较好的选择。</p>
<p>比如说<a target="_blank" rel="noopener" href="https://www.intel.cn/content/www/cn/zh/products/boards-kits/nuc.html">Intel NUC</a>就是很不错的选择，但是NUC价格又有些贵；所以最终我选择的是占美主机，便宜省电呀……如下图所示</p>
<p><img src="/images/2019111607252622.jpeg" alt="https://gd2.alicdn.com/imgextra/i2/186209729/O1CN01MJP69n2LjvsAbH8Re_!!186209729.jpg"></p>
<p>只不过这个无线网卡，被我拆了卖咸鱼了。</p>
<p>由于NUC这类都是不带内存硬盘的，所以咱要自己买。推荐的话，既然都跑虚拟机了，起步16G为佳。存储的话，自然是M2 NVME或者mSATA的固态了。SATA接口建议还是别插固态，SATA接口留给普通的机械硬盘，做备份存储之类的用途。土豪直接上1T的固态那就不算啦！</p>
<p><img src="/images/2019111607252949.png"></p>
<p>这个功耗很低吧，一个月下来也就是三四块钱的电费</p>
<h2 id="ESXi安装镜像调整（打补丁）"><a href="#ESXi安装镜像调整（打补丁）" class="headerlink" title="ESXi安装镜像调整（打补丁）"></a>ESXi安装镜像调整（打补丁）</h2><h3 id="判断网卡类型"><a href="#判断网卡类型" class="headerlink" title="判断网卡类型"></a>判断网卡类型</h3><p>前面说过，ESXi不支持?️网卡（有好些网卡都是不支持的，所以可以参考上面的硬件要求链接），所以这里需要先判断下自己的机器上什么网卡？如果是螃蟹卡的话，那么需要对安装镜像进行调整。具体判断方法，拆开看芯片，看产品介绍，Live CD下lspci什么的都可以</p>
<h3 id="下载ESXi镜像"><a href="#下载ESXi镜像" class="headerlink" title="下载ESXi镜像"></a>下载ESXi镜像</h3><p>ESXi介绍页面</p>
<p><a target="_blank" rel="noopener" href="https://www.vmware.com/products/vsphere.html">https://www.VMware.com/products/vsphere.html</a></p>
<p>ESXi下载</p>
<p><a target="_blank" rel="noopener" href="https://my.vmware.com/en/web/vmware/info/slug/datacenter_cloud_infrastructure/vmware_vsphere/6_7">https://my.VMware.com/en/web/VMware/info/slug/datacenter_cloud_infrastructure&#x2F;VMware_vsphere&#x2F;6_7</a></p>
<p>我们就点击页面上的 VMware vSphere Hypervisor (ESXi) 6.7U3 下载就可以了。</p>
<p>镜像有两种类型</p>
<p><img src="/images/2019111607252958.png"></p>
<p>第一种的ISO，直接能启动；第二种下载回来说一个zip包，我们可以用它来打补丁。如果你是?️卡，那就选第二种吧</p>
<h3 id="ESXi打补丁"><a href="#ESXi打补丁" class="headerlink" title="ESXi打补丁"></a>ESXi打补丁</h3><p>这个网上文章真的是太多了，基本上就是用ESXi-customer-PS之类的把网卡驱动添加进去</p>
<p>ESXi-customer-ps官网</p>
<p><a target="_blank" rel="noopener" href="https://www.v-front.de/p/esxi-customizer-ps.html">https://www.v-front.de/p/ESXi-customizer-ps.html</a></p>
<p>需要先安装powercli，下载页面</p>
<p><a target="_blank" rel="noopener" href="https://code.vmware.com/web/tool/11.2.0/vmware-powercli">https://code.VMware.com/web/tool/11.2.0/VMware-powercli</a></p>
<p>网卡补丁，根据自己的型号下载offline-bundle，避免网络问题</p>
<p><a target="_blank" rel="noopener" href="https://vibsdepot.v-front.de/wiki/index.php/List_of_currently_available_ESXi_packages">https://vibsdepot.v-front.de/wiki/index.php/List_of_currently_available_ESXi_packages</a></p>
<p>如何打补丁可以自己搜索下，我这里贴上来两篇</p>
<p><a target="_blank" rel="noopener" href="https://www.smbinn.com/vmnetwork.html">https://www.smbinn.com/vmnetwork.html</a></p>
<p><a target="_blank" rel="noopener" href="https://rexzhang.com/post/cf06a796-44d5-11e4-9bb5-f23c9150b910">https://rexzhang.com/post/cf06a796-44d5-11e4-9bb5-f23c9150b910</a></p>
<p>简单描述是这样的，打开powershell，切换到对应的目录</p>
<p># 取消可能的系统限制<br>Set-ExecutionPolicy -ExecutionPolicy RemoteSigned<br>Set-ExecutionPolicy Unrestricted</p>
<h1 id="离线打补丁-official-zip是ESXi的offline-bundle，drivers目录包含了vib文件的目录"><a href="#离线打补丁-official-zip是ESXi的offline-bundle，drivers目录包含了vib文件的目录" class="headerlink" title="离线打补丁  official.zip是ESXi的offline bundle，drivers目录包含了vib文件的目录"></a>离线打补丁  official.zip是ESXi的offline bundle，drivers目录包含了vib文件的目录</h1><p>.\ESXi-Customizer-PS-v2.6.0.ps1 -izip .\official.zip -pkgDir C:\Users\abc\Dropbox\ESXi\drivers</p>
<h1 id="在线打补丁，依赖比较好的网络环境"><a href="#在线打补丁，依赖比较好的网络环境" class="headerlink" title="在线打补丁，依赖比较好的网络环境"></a>在线打补丁，依赖比较好的网络环境</h1><p>.\ESXi-Customizer-PS-v2.6.0.ps1 -v67 -vft -load net55-r8168</p>
<h3 id="支持Realtek-8168-x2F-8111-x2F-8411-x2F-8118的成品"><a href="#支持Realtek-8168-x2F-8111-x2F-8411-x2F-8118的成品" class="headerlink" title="支持Realtek 8168&#x2F;8111&#x2F;8411&#x2F;8118的成品"></a>支持Realtek 8168&#x2F;8111&#x2F;8411&#x2F;8118的成品</h3><p>如果你的网卡也是Realtek 8168&#x2F;8111&#x2F;8411&#x2F;8118的话，并且信任我，可以考虑用我的现成的，<a target="_blank" rel="noopener" href="https://www.dropbox.com/s/aly7y4nrhjdpdmr/ESXi-6.7.0-20190802001-standard-customized.iso?dl=0">戳这里去dropbox</a></p>
<h2 id="ESXi安装"><a href="#ESXi安装" class="headerlink" title="ESXi安装"></a>ESXi安装</h2><p>把iso写到U盘中，比如说使用rufus这种，然后启动插U盘启动电脑，哦对了还要有个显示器和HDMI……</p>
<p>安装过程很简单，接受，输入密码，下一步，下一步……</p>
<p> </p>
<p>小提示：没有显示器怎么办？</p>
<p>靠着虚拟机、网卡指示灯、硬盘灯摸索着来吧。</p>
<p>哦当然了，ESXi要插网线直接连到网络设备（如路由器）的，要不玩什么呀！</p>
<h2 id="ESXi管理"><a href="#ESXi管理" class="headerlink" title="ESXi管理"></a>ESXi管理</h2><p>ESXi安装完成之后，想办法获取到它的IP地址，直接浏览器访问就可以了。</p>
<h3 id="使用ESXi网页端管理虚拟机"><a href="#使用ESXi网页端管理虚拟机" class="headerlink" title="使用ESXi网页端管理虚拟机"></a>使用ESXi网页端管理虚拟机</h3><p>界面很简洁，看着就会用</p>
<p><img src="/images/2019111607253217.png"></p>
<h3 id="使用VMware-Workstation管理虚拟机"><a href="#使用VMware-Workstation管理虚拟机" class="headerlink" title="使用VMware Workstation管理虚拟机"></a>使用VMware Workstation管理虚拟机</h3><p>如果你的电脑上装有VMware Workstation的话，文件-连接到服务器，输入IP用户名（root）、密码也是可以进行简单的管理的</p>
<h3 id="进一步的管理：Vcenter"><a href="#进一步的管理：Vcenter" class="headerlink" title="进一步的管理：Vcenter"></a>进一步的管理：Vcenter</h3><p>ESXi本身的管理功能比较基础，甚至连克隆、迁移等功能都没有。为了做到这点，可以开个虚拟机安装vcenter。</p>
<p>什么是注册虚拟机</p>
<h2 id="ESXi创建虚拟机方法"><a href="#ESXi创建虚拟机方法" class="headerlink" title="ESXi创建虚拟机方法"></a>ESXi创建虚拟机方法</h2><p>ESXi的使用非常简单，只要是用过虚拟机的人应该就是十分清楚的，傻瓜化操作</p>
<h3 id="直接创建虚拟机"><a href="#直接创建虚拟机" class="headerlink" title="直接创建虚拟机"></a>直接创建虚拟机</h3><p><img src="/images/2019111607253436.png"></p>
<h3 id="从ovf部署虚拟机"><a href="#从ovf部署虚拟机" class="headerlink" title="从ovf部署虚拟机"></a>从ovf部署虚拟机</h3><p>从VMware Workstation和virtualbox导出的文件都可以导入进来的</p>
<p><img src="/images/2019111607253765.png"></p>
<h3 id="注册虚拟机"><a href="#注册虚拟机" class="headerlink" title="注册虚拟机"></a>注册虚拟机</h3><p>假如已经有了虚拟机的vmdk文件，并且这个文件在datastore中，那么我们可以直接注册虚拟机的。方法太简单了，不说了。</p>
<h3 id="使用cloud-image"><a href="#使用cloud-image" class="headerlink" title="使用cloud image"></a>使用cloud image</h3><p>作为非常爱惜硬盘的我，如果从Ubuntu Server安装一个服务器版Ubuntu的话，不仅浪费时间，需要手工干预安装，而且还很占用硬盘。所以ubuntu官方维护了一个云镜像，其中包含各种环境使用的镜像，可以直接导入。</p>
<p>下面这个链接是每日构建的，点进去选一个日期，下载对应的ovf&#x2F;ova文件就可以了</p>
<p><a target="_blank" rel="noopener" href="https://cloud-images.ubuntu.com/bionic/">https://cloud-images.ubuntu.com/bionic/</a></p>
<p>这个链接是发布版的，同样下载ovf&#x2F;ova文件</p>
<p><a target="_blank" rel="noopener" href="https://cloud-images.ubuntu.com/releases/">https://cloud-images.ubuntu.com/releases/</a></p>
<p><img src="/images/201911160725385.png"></p>
<p>下载回来直接导入就可以了</p>
<p>但是这个cloud image的root密码是什么呀！别怕，随机密码。开机按shift进grub，选择recovery mode破个密码就好了。然后再parted或者fdisk弄下分区，完美。Cloud image安装完占用硬盘不到1G哦～</p>
<h2 id="ESXi-虚拟机设置"><a href="#ESXi-虚拟机设置" class="headerlink" title="ESXi 虚拟机设置"></a>ESXi 虚拟机设置</h2><h3 id="CPU资源限制"><a href="#CPU资源限制" class="headerlink" title="CPU资源限制"></a>CPU资源限制</h3><p>如下图所示，我们可以为此虚拟机预留一定的CPU资源、限制CPU资源（虚拟机不会使用超过这个频率的CPU）、份额，以及常见的硬件虚拟化、性能计数器等。</p>
<p><img src="/images/2019111607253924.png"></p>
<p>份额这个概念比较特殊，详细解释如下：</p>
<blockquote>
<p>份额指定虚拟机（或资源池）的相对重要性。如果某个虚拟机的资源份额是另一个虚拟机的两倍，则在这两个虚拟机争用资源时，第一个虚拟机有权消耗两倍于第二个虚拟机的资源。</p>
<p>份额通常指定为高、正常或低，这些值将分别按 4:2:1 的比例指定份额值。还可以选择自定义为各虚拟机分配特定的份额值（表示比例权重）。</p>
</blockquote>
<p>举个例子，</p>
<blockquote>
<p>一台聚合 CPU 容量为 8 GHz 的主机上运行着两个受 CPU 约束的虚拟机。它们的 CPU 份额设置为正常，因此各得 4GHz。</p>
<p>现在打开了第三个受 CPU 约束的虚拟机的电源。它的 CPU 份额设置为高，这意味着它拥有的份额值应该是设置为正常的虚拟机的两倍。新的虚拟机获得 4GHz，其他两个虚拟机各自仅获得 2GHz。如果用户为第三个虚拟机指定的自定义份额值为 2000，也会出现相同的结果。</p>
</blockquote>
<h3 id="内存资源限制"><a href="#内存资源限制" class="headerlink" title="内存资源限制"></a>内存资源限制</h3><p>与CPU资源限制类似，内存也是可以进行限制的，道理类似</p>
<p><img src="/images/2019111607254012.png"></p>
<h3 id="硬盘资源限制"><a href="#硬盘资源限制" class="headerlink" title="硬盘资源限制"></a>硬盘资源限制</h3><p>同理，可以限制硬盘写入，所以知道怎么做<strong>石头盘</strong>了吧！</p>
<p><img src="/images/2019111607254134.png"></p>
<h3 id="添加其他设备"><a href="#添加其他设备" class="headerlink" title="添加其他设备"></a>添加其他设备</h3><p>前面提过，ESXi不支持无线网卡，但是我们可以把无线网卡直接分配给虚拟机，那么就要用到网卡直通。具体方法就是编辑虚拟机设置，添加其他设备-PCI设备&#x2F;USB设备</p>
<p><img src="/images/2019111607254256.png"></p>
<h3 id="虚拟机引导选项"><a href="#虚拟机引导选项" class="headerlink" title="虚拟机引导选项"></a>虚拟机引导选项</h3><p>和VMware Workstation的设置基本差不多，一看就懂</p>
<p><img src="/images/2019111607254455.png"></p>
<h2 id="ESXi-控制台连接"><a href="#ESXi-控制台连接" class="headerlink" title="ESXi 控制台连接"></a>ESXi 控制台连接</h2><p>我们可以直接通过网页端访问控制台端口，也可以通过下载VMware Remote Console，或是VMware Workstation访问。</p>
<h2 id="数据存储管理"><a href="#数据存储管理" class="headerlink" title="数据存储管理"></a>数据存储管理</h2><p>要装虚拟机，自然就要用ISO镜像，那ISO镜像自然就要上传到ESXi中……具体就是使用数据存储功能。</p>
<p>左侧导航栏直接点进去存储</p>
<p><img src="/images/2019111607254569.png"></p>
<h3 id="数据存储管理器"><a href="#数据存储管理器" class="headerlink" title="数据存储管理器"></a>数据存储管理器</h3><p>点击数据存储管理器，太简明易懂了……上传就是了。</p>
<p><img src="/images/2019111607254683.png"></p>
<h3 id="添加存储"><a href="#添加存储" class="headerlink" title="添加存储"></a>添加存储</h3><p>ESXi默认会识别接驳的硬盘等设备，但是我们也可以添加网络存储，比如NFS，点击新建数据存储，选择NFS</p>
<p><img src="/images/201911160725471.png"></p>
<p>相应的添加就好了</p>
<h2 id="ESXi网络设置之物理网卡"><a href="#ESXi网络设置之物理网卡" class="headerlink" title="ESXi网络设置之物理网卡"></a>ESXi网络设置之物理网卡</h2><p>熟悉VMware Workstation可能知道，VMware Workstation的网络可以分为桥接、NAT、host only等，那么ESXi呢……对不起，ESXi天生桥接。</p>
<p>在ESXi的网络设置中……</p>
<p>物理网卡的概念很好理解，就是真实接线的网卡，ESXi本身是支持多网卡的，利用多网卡可以玩出很多花样，比如软路由……</p>
<p><img src="/images/2019111607254984.png"></p>
<h2 id="ESXi网络设置之虚拟交换机"><a href="#ESXi网络设置之虚拟交换机" class="headerlink" title="ESXi网络设置之虚拟交换机"></a>ESXi网络设置之虚拟交换机</h2><p>交换机这个概念，对于不是搞网络的人来说，可能很生疏。路由器、交换机、集线器这三者究竟有啥区别啊？这不是本文讨论的重点。</p>
<p>ESXi中的虚拟机交换机的概念很简单，简单的说就是连到虚拟机的那个“设备”，由ESXi的内核提供，只有二层桥接的功能，不像真实的交换机，又能配ACL又能配这配那的。比如我们看下下面的这个图</p>
<p><img src="/images/2019111607255041.png"></p>
<p>这么多台虚拟机都“连接”到了这一虚拟交换机上，然后这个虚拟交换机用两条真实的网线连接到了我的路由器上。</p>
<p>虚拟交换机有啥意义呢？比如我有两块物理网卡，一块是192.168.1.0&#x2F;24，另一块是192.168.2.0&#x2F;24，那么我们就可以通过添加两个vSwitch，然后不同的虚拟机就可以属于不同的网段啦。</p>
<h3 id="添加vSwitch"><a href="#添加vSwitch" class="headerlink" title="添加vSwitch"></a>添加vSwitch</h3><p>虚拟交换机这东西，由于是内核虚拟的，自然也可以自己添加。方法也很简单，直接点击添加，起个名字，选择绑定到哪块物理网卡，确定就可以了。如下图所示</p>
<p><img src="/images/2019111607255231.png"></p>
<p>当然了需要注意的是，一块网卡一旦属于某个虚拟交换机，那它就不能属于其他的虚拟交换机了。</p>
<h3 id="虚拟交换机、添加上行链路"><a href="#虚拟交换机、添加上行链路" class="headerlink" title="虚拟交换机、添加上行链路"></a>虚拟交换机、添加上行链路</h3><p>俗话说，狡兔三窟。一个虚拟交换机，如果增加网线作为备份线路，那也是有备无患的。</p>
<p>所以编辑vSwitch，添加另外一条上行链路作为冗余。这样当你拔掉一条网线，虚拟机们还能无缝切换（真的是无缝，可能连TCP丢包都没有），一点不受影响。</p>
<p>添加方法很简单，直接编辑，添加另一条物理链路就好了</p>
<p>另外，假如你的ESXi不接网线，那么属于同一个vSwitch之间的虚拟机还是能通信的，而且是万兆网卡哦！只是流量不能往外走，要不怎么叫上行链路呢。</p>
<h2 id="虚拟交换机-网卡绑定"><a href="#虚拟交换机-网卡绑定" class="headerlink" title="虚拟交换机 网卡绑定"></a>虚拟交换机 网卡绑定</h2><p>所谓网卡绑定，就是当你为一个虚拟交换机添加多条上行链路的时候，想让ESXi怎么调度啊？类似链路聚合，你是想round-robin，还是active backup，还是load balance呢？网卡绑定就是干这个事情的。</p>
<p><img src="/images/2019111607255418.png"></p>
<p>ESXi的这四种模式，对应的意义如下：</p>
<ul>
<li>基于源端口 ID 的路由（默认）：则根据流量进入虚拟交换机的虚拟端口选择上行链接。</li>
</ul>
<p>基于 IP 哈希的路由：根据每个数据包的源和目标 IP 地址的 Hash 选择上行链接。对于非 IP 数据包，会使用位于这些偏移上的任何内容计算 Hash。</p>
<ul>
<li>基于源 MAC 哈希的路由：根据源以太网的 Hash 选择上行链接。</li>
<li>使用明确故障切换顺序：始终使用“活动适配器”列表中位于最前列的符合故障切换检测标准的上行链路。（本图就是vmnic0）</li>
</ul>
<h3 id="虚拟交换机-流量调整"><a href="#虚拟交换机-流量调整" class="headerlink" title="虚拟交换机 流量调整"></a>虚拟交换机 流量调整</h3><p>买VPS的时候……你这个口不是独享的！好吧，ESXi也能针对虚拟交换机进行流量限制，如下图所示</p>
<p><img src="/images/2019111607255593.png"></p>
<h2 id="ESXi-网络设置-端口组"><a href="#ESXi-网络设置-端口组" class="headerlink" title="ESXi 网络设置 端口组"></a>ESXi 网络设置 端口组</h2><p>实际上呢，虚拟机并不是直接连到vSwitch的。虚拟机上直接连接到端口组上的。不同的虚拟机可以属于不同的端口组。</p>
<p>端口组与虚拟机网络设置</p>
<p><img src="/images/201911160725566.png"></p>
<p>添加端口组</p>
<p><img src="/images/2019111607255657.png"></p>
<h2 id="ESXi-VMkernel网卡"><a href="#ESXi-VMkernel网卡" class="headerlink" title="ESXi VMkernel网卡"></a>ESXi VMkernel网卡</h2><p>ESXi本身是通过网络管理的，那么自然也要有一个对应的“网卡”，这里就是vmk网卡。可以把它理解成一个特殊的端口组，主要就是提供管理相关的访问。</p>
<p><img src="/images/2019111607255838.png"></p>
<p>有的时候，我们可能希望，所有虚拟机使用某一段的IP，但是管理使用另一段IP，这里就可以通过添加VMKernel网卡做到。</p>
<p><img src="/images/2019111607255920.png"></p>
<p>比如我们希望ESXi的管理IP能够有多个，做个备份，那么添加vmkernel也能做到</p>
<p>添加之后的结果</p>
<p><img src="/images/2019111607260117.png"></p>
<p>此时Vmkernel的拓扑</p>
<p><img src="/images/2019111607260113.png"></p>
<h2 id="我的ESXi玩法"><a href="#我的ESXi玩法" class="headerlink" title="我的ESXi玩法"></a>我的ESXi玩法</h2><ul>
<li>kali，还有一个XP，用途你懂的；</li>
<li>Windows 7，用于下载电影电视剧什么的；</li>
<li>Ubuntu Desktop，装了点GUI应用，开了samba服务，默认启动到multi-user。上面的Windows 7下载的文件直接存到了这里，然后电视iPad等直接就能看了；</li>
<li>csr1000v，模拟Cisco IOS网络设备，其实并无卵用，放着吃灰的。</li>
<li>TimeMachine，从Cloud Image导入的，用于macOS的时间机器备份，做了LVM，啥都不怕。</li>
<li>Ubuntu Minimal，从Cloud Image导入的，我也不知道干啥的</li>
<li>Tiny Core，不知道干啥的，玩的吧。</li>
</ul>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>ESXi真是太强大了，开虚拟机随便玩，部分硬件可以直通到虚拟机中；甚至可以给ESXi主机开ssh，然后可以执行一些ssh命令，甚至可以运行Python，吼。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2019/11/16/esxi-tutorial/index/" data-id="clhp7rths005vs2qrc9339pvl" data-title="ESXi入门指南" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-first-mbp/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/11/08/first-mbp/index/" class="article-date">
  <time class="dt-published" datetime="2019-11-08T00:00:00.000Z" itemprop="datePublished">2019-11-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/justsay/">justsay</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/11/08/first-mbp/index/">还是早日享乐吧——年轻人的第一台MacBook</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>小时候的梦想是能有一个游戏机，能够开心的玩魂斗罗，大概就像下图这种。</p>
<p><img src="https://pbs.twimg.com/media/EIfnoJdUcAEEL4i?format=png&name=360x360" alt="图像"></p>
<p><a target="_blank" rel="noopener" href="https://twitter.com/BennyThinks/status/1191175312043720709?s=20">两年前我实现了这个梦想，买了个Xbox</a>。</p>
<p>上大学的时候呢，希望自己能够有个MacBook……</p>
<p>但是MacBook很贵呀，那时我又没有收入，学费还那么贵，不能花父母的钱呀。</p>
<h2 id="为什么呢？"><a href="#为什么呢？" class="headerlink" title="为什么呢？"></a>为什么呢？</h2><p>工作之后，开始有了收入，周末还会出去做兼职，开始渐渐有了一些积蓄。对于现在的我来说，买房？首付的一半都还没攒到，连个厕所都买不起。我是小有成就，我是有点积蓄，但是这有什么用。</p>
<p>生于穷人家的孩子总是在体验同龄人都在毕业游而我却要<a target="_blank" rel="noopener" href="https://twitter.com/BennyThinks/status/1011895319100051456?s=20">为生活而奔波的落差感</a>。</p>
<p>与其这么辛苦，不如早日享受。无论我再怎么勤俭节约，努力工作赚外快，我也买不起房。</p>
<p>全款是别想了，贷款还需要家里的大力支持。但是我既不想贷款，又不想要家里的钱。</p>
<p>我不想牺牲快乐和自由去换一套房。</p>
<p>原本生活中的必需品，此时却变成奢侈品。</p>
<p>反正既然也买不起房，那就不如享受，人生就是这样，在自己的承受范围内，买一些自己喜欢的东西。</p>
<h2 id="怎么买？"><a href="#怎么买？" class="headerlink" title="怎么买？"></a>怎么买？</h2><p>考虑再三，甚至都做了Excel分析哪家卖的便宜，我得出了以下几个结论</p>
<ul>
<li>闲鱼二手不太靠谱，这么贵重的东西，买二手怕是后患无穷吧</li>
<li>13.3寸的MacBook Pro，京东上只有8G内存版的，15.5寸的才有16G</li>
<li>区域版本，国行12967 CNY，港版12073 CNY，日版11789（税前） 12970（税后），美版11864 CNY，台版12785 CNY，</li>
<li>国行教育，12021 CNY</li>
</ul>
<p>所以这么一看，如果能国行教育优惠，其实是非常划算的。日版退税要求短期出入日本的，那只能麻烦出差的同事了，还要等……</p>
<p>那教育优惠，我又不是学生……但是我认识好多学弟学妹们，这真太简单啦！</p>
<h2 id="开箱"><a href="#开箱" class="headerlink" title="开箱?"></a>开箱?</h2><p>周一买，周三审核通过，周五EMS竟然就给送到了，不错不错。</p>
<p>从快递上看，是从成都发货的，我原以为是北京或者上海呢。</p>
<p>送过来的时候，一个纸箱子，拆开就是MacBook的包装啦！</p>
<p><img src="/images/201911081507474.png"></p>
<p>拆开之后，emmm这个包装还很小的嘛，比ThinkPad X1 Carbon的包装小多了</p>
<p><img src="/images/2019110815075314.jpeg"></p>
<p>拆箱～～</p>
<p><img src="/images/201911081507561.jpeg"></p>
<p>开机设置网络</p>
<p><img src="/images/2019110815080168.png"></p>
<h2 id="第N件事……"><a href="#第N件事……" class="headerlink" title="第N件事……"></a>第N件事……</h2><p>第一件事情，毫无疑问，当然是进行科学上网啦！shadowsocks-ng你懂的！</p>
<p>第二件事情，那就是登录一些账号啦，Google GitHub什么的；</p>
<p>第三件事情，把Python和PyCharm、golang、GoLand什么的都请回来，然后把字号调大点；</p>
<p>第四件事情，你看哦！</p>
<p><a target="_blank" rel="noopener" href="https://dmesg.app/wp-content/uploads/2019/11/2019110815131870.png"><img src="/images/2019110815131870.png"></a></p>
<p>第五件事情，ohmyzsh，然后就是配置下iTerm2、用上zsh以及ohmyzsh，咦；</p>
<p>第六件事情，dropbox、telegram等等一大堆工具；</p>
<p>第七件事情，改个壁纸啦～吼吼吼</p>
<h2 id="总体感受"><a href="#总体感受" class="headerlink" title="总体感受"></a>总体感受</h2><p>真好看啊！真是太好看了！</p>
<p>新的键盘有点不适应，目前看来可能得花一段时间去习惯了。</p>
<p>操作系统有些不熟悉，好些快捷键都记不住，目前处于广场舞老大妈的电脑水平。</p>
<p>这个快捷键和手势有点多，对于我这种只有三天记忆的高级的鱼来说，好难啊?</p>
<p>回到家竟然自动连接上了家里的Wi-Fi，看来是因为iPad所以自来熟了嘛！</p>
<p>Touch Bar有点意思呀，有的时候还是挺方便的，比如点确定的时候，再比如：</p>
<p><img src="/images/2019110815081593.jpeg"></p>
<p>Apple ?标志不亮，这个有点不开心。</p>
<p>原彩显示这个功能有点懵哦，总感觉开了它之后，我的屏幕一片黄。</p>
<p>什么，竟然没有电源按钮。好吧，开盖就开机……呃？是不是有这种情况，我在屏幕和键盘之间夹了一张纸，想要拿出来看?</p>
<p>用力按压触摸板好像有个什么功能哎，还没有学会。</p>
<h2 id="与ThinkPad-X1-Carbon的对比"><a href="#与ThinkPad-X1-Carbon的对比" class="headerlink" title="与ThinkPad X1 Carbon的对比"></a>与ThinkPad X1 Carbon的对比</h2><p>明显能感受出来比X1要沉一些，因为是金属的外壳吧，密度要比X1 Carbon的碳纤维低一些?哎呀终于知道为什么叫Carbon了，原来是因为外壳的碳哦！（据说X1的这个碳纤维还是高科技的？）</p>
<p>屏幕不能180度平躺，这是一个遗憾。</p>
<p>显示效果比X1细腻太多啦，因为屏幕尺寸小、分辨率更高，因此像素密度也更高了。</p>
<p>既然分辨率这么高，那字自然也是小一点咯！由于俺眼神不太好，所以开了第二大的缩放，吼吼吼。</p>
<p>我有点困了，以后再说吧?</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2019/11/08/first-mbp/index/" data-id="clhp7rtht005xs2qrdu3ke1fa" data-title="还是早日享乐吧——年轻人的第一台MacBook" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-trojan/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/10/02/trojan/index/" class="article-date">
  <time class="dt-published" datetime="2019-10-02T00:00:00.000Z" itemprop="datePublished">2019-10-02</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/gfw/">gfw</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/10/02/trojan/index/">使用trojan翻越长城的进阶使用方法</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>今天偶然看到了另外一个梯子<a target="_blank" rel="noopener" href="https://github.com/trojan-gfw/trojan">trojan</a>，大致看了下，感觉这东西还是蛮有意思的嘛，思路和其他工具不太一样：把流量放到Application Data里，然后伪装成正常的HTTPS通信，甚至还有一个完全真正的TLS握手。从结果上看起来，有点像Shadowsocks&#x2F;ShadowsocksR的obfs之类的功能，只不过这个从网络层上看就像真正的HTTPS一样。</p>
<p>由于这是一个比较新的项目，所以相关的基础设施还不如shadowsocks那么完善，比如缺少或不完善的移动平台客户端等等~不过这都不是事，相信社区的力量ﾚ(ﾟ∀ﾟ;)ﾍ&#x3D;3&#x3D;3&#x3D;3</p>
<p>配置也很容易，大概可以分为6步</p>
<ul>
<li>准备服务器</li>
<li>准备http服务</li>
<li>弄个域名</li>
<li>搞个证书</li>
<li>写配置，调试，运行</li>
<li>客户端配置、测试</li>
<li>进阶配置</li>
</ul>
<p>[v_blue]想要快速开始？<a target="_blank" rel="noopener" href="https://github.com/trojan-gfw/trojan/wiki/Binary-&-Package-Distributions">戳我</a></p>
<p>@<a target="_blank" rel="noopener" href="https://blog.horo.moe/">ホロちゃん</a>[&#x2F;v_blue]</p>
<h2 id="准备服务器"><a href="#准备服务器" class="headerlink" title="准备服务器"></a>准备服务器</h2><h3 id="VPS"><a href="#VPS" class="headerlink" title="VPS"></a>VPS</h3><p>首先，咱需要准备一个VPS，KVM之类的完全虚拟化的最好，OpenVZ也行。</p>
<p>我就用前段时间免费薅的Oracle Cloud Korea为例了，延迟真是非常理想的，也基本没丢包。</p>
<p><img src="/images/2019100206341267.png"></p>
<p>其他的厂商，可以试试</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.vultr.com/?ref=7771693-4F">Vultr</a>：注册送$50，一个月用完，最低$3.5&#x2F;月，但是据说现在有时会开出来不能用的IP</li>
<li><a target="_blank" rel="noopener" href="https://www.linode.com/?r=c2f16f9ad7b8b9fe0bb5c70de03bca0bbde134ca">Linode</a>：老牌厂商了，$5</li>
<li><a target="_blank" rel="noopener" href="https://www.conoha.jp/referral/?token=dyhzf0fk27vw8znAqdIq2gtp9Ab3JOGctRgrzhrOY.q2MfYpgyY-WHJ">Conoha</a>：日本的主机商，900日元&#x2F;月，据说ToS有点严格，但是我跑梯子、rtorrent、ffmpeg都没被封过，吼吼</li>
<li><a target="_blank" rel="noopener" href="https://m.do.co/c/efaeb1b7c950">DigitalOcean</a>：和Vultr一样也是送$50一个月用完</li>
<li><a target="_blank" rel="noopener" href="https://billing.virmach.com/aff.php?aff=8589">VirMach</a>：被称作低价屠夫，特别便宜的年付VPS，比如有时促销会有年付$7的KVM机器，新用户貌似还能折扣，不过他家换IP就要交钱，这点就比较坑了</li>
</ul>
<h3 id="防火墙"><a href="#防火墙" class="headerlink" title="防火墙"></a>防火墙</h3><p>装好系统，ssh连接上，记得把防火墙什么的都搞定了，需要注意，不仅要关注系统自身的防火墙，也要注意下厂商的“安全组”这类东西。</p>
<p>清除iptables的规则，可以参考如下命令：</p>
<p>sudo iptables -P INPUT ACCEPT<br>sudo iptables -P FORWARD ACCEPT<br>sudo iptables -P OUTPUT ACCEPT<br>sudo iptables -t nat -F<br>sudo iptables -t mangle -F<br>sudo iptables -F<br>sudo iptables -X</p>
<p>如有必要，可以安装iptables-save等工具持久化</p>
<h2 id="准备http服务"><a href="#准备http服务" class="headerlink" title="准备http服务"></a>准备http服务</h2><p>官方文档建议配置一个http服务器，所以咱就简单的弄下吧，Debian系为例，使用root权限执行如下命令：</p>
<p>apt install nginx</p>
<p>CentOS可以用yum安装</p>
<p>yum install nginx</p>
<p>此时访问<a target="_blank" rel="noopener" href="http://ip/">http://ip</a> 应该能看到默认的欢迎页面了。</p>
<h2 id="弄个域名"><a href="#弄个域名" class="headerlink" title="弄个域名"></a>弄个域名</h2><p>域名的话，什么域名都无所谓的，可以自己注册个免费的cf什么的域名，也可以注册个正经的域名，假如不想花钱，那用DDNS也可以，比如<a target="_blank" rel="noopener" href="https://www.dynu.com/zh-CN/">dynu</a>提供免费的二级域名。</p>
<p>域名搞到手之后，做个A记录的解析到服务器IP</p>
<h2 id="搞个证书"><a href="#搞个证书" class="headerlink" title="搞个证书"></a>搞个证书</h2><p>有两种方式，一种是申请一个真正的证书，另外一种是用openssl生成一个自签名证书。官方建议使用真正的证书。</p>
<h3 id="申请证书"><a href="#申请证书" class="headerlink" title="申请证书"></a>申请证书</h3><p>直接使用Let’s Encrypt就可以了，可以参考如下命令</p>
<p>certbot certonly</p>
<p>然后一步一步按照说明做</p>
<p>详细信息可以参考如下两篇</p>
<p><a target="_blank" rel="noopener" href="https://dmesg.app/letsencrypt-nginx-subdomain.html">https://dmesg.app/letsencrypt-nginx-subdomain.html</a></p>
<p><a target="_blank" rel="noopener" href="https://letsencrypt.org/zh-cn/getting-started/">https://letsencrypt.org/zh-cn/getting-started/</a></p>
<h3 id="自签名证书"><a href="#自签名证书" class="headerlink" title="自签名证书"></a>自签名证书</h3><p>openssl req -newkey rsa:2048 -nodes -keyout key.pem -x509 -days 3650 -out certificate.pem</p>
<h2 id="服务端配置，调试，运行"><a href="#服务端配置，调试，运行" class="headerlink" title="服务端配置，调试，运行"></a>服务端配置，调试，运行</h2><p>直接从GitHub Release下载二进制文件</p>
<p>wget <a target="_blank" rel="noopener" href="https://github.com/trojan-gfw/trojan/releases/download/v1.13.0/trojan-1.13.0-linux-amd64.tar.xz">https://github.com/trojan-gfw/trojan/releases/download/v1.13.0/trojan-1.13.0-linux-amd64.tar.xz</a><br>tar xf trojan-1.13.0-linux-amd64.tar.xz<br>cd trojan</p>
<p>examples目录中有一个<code>server.json-example</code>，我们直接把他拷贝到上层目录</p>
<p>cp exmaples&#x2F;server.json-example config.json</p>
<p>配置文件的内容很简单，基本上只需要修改password字段和ssl字段就可以了</p>
<p><img src="/images/2019100206341356.png"></p>
<p>运行</p>
<p>.&#x2F;trojan</p>
<p>基本上没报错，在运行了就可以~</p>
<h2 id="客户端配置运行"><a href="#客户端配置运行" class="headerlink" title="客户端配置运行"></a>客户端配置运行</h2><p>这里以PC为例，Android&#x2F;iOS可以找找相应的工具</p>
<p>同样从GitHub Release下载对应的文件，解压缩，把<code>client.json-example</code>拷贝出来</p>
<p>我们只需要关注<code>local_port、remote_addr、remote_port、password</code>和<code>ssl</code>的几个字段</p>
<ul>
<li><code>local_port</code> 本地监听的端口，我这里设置为了11080，避免和本机的Shadowsocks冲突</li>
<li><code>remote_addr</code>：申请的域名</li>
<li><code>remote_port</code>：上面服务端配置的端口，一般来说就是443</li>
<li><code>password</code>：密码，要与服务端配置的密码列表中的一个相符</li>
<li>ssl：如果你使用的是自签名证书，那么<code>verify</code>要写false，假如common name也是瞎写的，那么<code>verify_hostname</code>也要写false；假如用的是真证书，那么就都true就可以了</li>
</ul>
<p><img src="/images/2019100206341423.png"></p>
<p>然后<code>./trojan</code>运行就可以了，此时trojan会监听指定的端口，socks5，本例为11080</p>
<p>然后打开你的proxyswitchy omega，这么配置下就可以了</p>
<p><img src="/images/2019100206341518.png"></p>
<p>更进一步，可以用proxy switchy omega的自动切换模式+GFWList</p>
<p>如果在Windows上运行提示缺少VCRUNTIME等，请安装相应的VC运行库，可以参考文末链接</p>
<h2 id="测速"><a href="#测速" class="headerlink" title="测速"></a>测速</h2><p>都在服务端开启了BBR的情况下进行的测试</p>
<h3 id="使用Shadowsocks"><a href="#使用Shadowsocks" class="headerlink" title="使用Shadowsocks"></a>使用Shadowsocks</h3><p><img src="/images/201910020634178.png"></p>
<h3 id="trojan"><a href="#trojan" class="headerlink" title="trojan"></a>trojan</h3><p><img src="/images/2019100206341889.png"></p>
<p>速度还是很理想的，就是不知道稳不稳了。</p>
<h2 id="进阶配置"><a href="#进阶配置" class="headerlink" title="进阶配置"></a>进阶配置</h2><h3 id="使用BBR"><a href="#使用BBR" class="headerlink" title="使用BBR"></a>使用BBR</h3><p>偷懒，<a target="_blank" rel="noopener" href="https://teddysun.com/489.html">直接用秋水逸冰的吧</a></p>
<p>wget –no-check-certificate <a target="_blank" rel="noopener" href="https://github.com/teddysun/across/raw/master/bbr.sh">https://github.com/teddysun/across/raw/master/bbr.sh</a> &amp;&amp; chmod +x bbr.sh &amp;&amp; .&#x2F;bbr.sh</p>
<h3 id="开启TFO（TCP-Fast-Open）"><a href="#开启TFO（TCP-Fast-Open）" class="headerlink" title="开启TFO（TCP Fast Open）"></a>开启TFO（TCP Fast Open）</h3><p>sysctl -w net.ipv4.tcp_fastopen&#x3D;3<br>sysctl -p &#x2F;etc&#x2F;sysctl.conf<br>cat &#x2F;proc&#x2F;sys&#x2F;net&#x2F;ipv4&#x2F;tcp_fastopen</p>
<p>结果为3就对了</p>
<p>然后服务端和客户端的<code>tcp.fast_open</code>都改成true</p>
<p><img src="/images/2019100206342045.png"></p>
<h3 id="配置systemd"><a href="#配置systemd" class="headerlink" title="配置systemd"></a>配置systemd</h3><p>创建文件，<code>/etc/systemd/system/trojan.service</code>或者<code>/lib/system/system/trojan.service</code></p>
<p>[Unit]<br>Description&#x3D;Trojan<br>After&#x3D;network.target network-online.target nss-lookup.target</p>
<p>[Service]<br>Restart&#x3D;on-failure<br>Type&#x3D;simple<br>ExecStart&#x3D;&#x2F;path&#x2F;to&#x2F;trojan config.json</p>
<p>[Install]<br>WantedBy&#x3D;multi-user.target</p>
<p>自启</p>
<p>systemctl daemon-reload</p>
<p>systemctl enable trojan<br>systemctl start trojan<br>systemctl status trojan</p>
<h3 id="使用非root、non-login-shell运行"><a href="#使用非root、non-login-shell运行" class="headerlink" title="使用非root、non-login shell运行"></a>使用非root、non-login shell运行</h3><h4 id="新增用户"><a href="#新增用户" class="headerlink" title="新增用户"></a>新增用户</h4><p>useradd –s &#x2F;usr&#x2F;sbin&#x2F;nologin trojan</p>
<h1 id="改权限"><a href="#改权限" class="headerlink" title="改权限"></a>改权限</h1><p>chown -R trojan:trojan &#x2F;path&#x2F;to&#x2F;trojan</p>
<h4 id="授予监听标准端口权限"><a href="#授予监听标准端口权限" class="headerlink" title="授予监听标准端口权限"></a>授予监听标准端口权限</h4><p>由于1024以下端口默认只能由root监听，所以要让非root用户监听，大概有以下几个方法：</p>
<ul>
<li>suid：<code>chmod u+x /opt/trojan/trojan</code></li>
<li>iptables转发，确保开启转发<code>net.ipv4.ip_forward=1</code>，然后<code>iptables -t nat -A PREROUTING -p tcp --dport 443 -j DNAT --to:4433</code></li>
<li>CAP_NET_BIND_SERVICE <code>setcap cap_net_bind_service=+eip /opt/trojan/trojan</code></li>
</ul>
<h4 id="system微调"><a href="#system微调" class="headerlink" title="system微调"></a>system微调</h4><p>[Unit]<br>Description&#x3D;Trojan<br>After&#x3D;network.target network-online.target nss-lookup.target</p>
<p>[Service]<br>User&#x3D;trojan<br>Group&#x3D;trojan<br>Restart&#x3D;on-failure<br>Type&#x3D;simple<br>ExecStart&#x3D;&#x2F;path&#x2F;to&#x2F;trojan</p>
<p>[Install]<br>WantedBy&#x3D;multi-user.target</p>
<h3 id="使用HTTP-x2F-2"><a href="#使用HTTP-x2F-2" class="headerlink" title="使用HTTP&#x2F;2"></a>使用HTTP&#x2F;2</h3><p>服务端alpn中加入h2，如下图所示</p>
<p><img src="/images/2019100206342076.png"></p>
<p>当然客户端也要确保有这个h2哦~</p>
<h3 id="TLS-1-3"><a href="#TLS-1-3" class="headerlink" title="TLS 1.3"></a>TLS 1.3</h3><p>已经支持啦，当然了，要你的openssl版本在1.1.1以上哦。对啦，cipher suite要改下，比如说</p>
<p>TLS13-AES-256-GCM-SHA384:TLS13-CHACHA20-POLY1305-SHA256:TLS13-AES-128-GCM-SHA256:TLS13-AES-128-CCM-8-SHA256:TLS13-AES-128-CCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256</p>
<h3 id="使用数据库做验证"><a href="#使用数据库做验证" class="headerlink" title="使用数据库做验证"></a>使用数据库做验证</h3><p>更高级的配置，比如流量控制等，可以通过MySQL实现</p>
<p>在服务端配置最后的mysql字段，确保用户名密码正确，本机装好了MySQL</p>
<p><img src="/images/2019100206342119.png"></p>
<p>然后进入mysqlcli，创建数据库、创建表、插入用户</p>
<p># 创建数据库<br>create database trojan;<br>use trojan;</p>
<h1 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h1><p>CREATE TABLE users (<br>id INT UNSIGNED NOT NULL AUTO_INCREMENT,<br>username VARCHAR(64) NOT NULL,<br>password CHAR(56) NOT NULL,<br>quota BIGINT NOT NULL DEFAULT 0,<br>download BIGINT UNSIGNED NOT NULL DEFAULT 0,<br>upload BIGINT UNSIGNED NOT NULL DEFAULT 0,<br>PRIMARY KEY (id),<br>INDEX (password)</p>
<p>);</p>
<h1 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a>创建用户</h1><p>INSERT INTO users VALUES(NULL,’benny’,’Fire’,1024,100,50);</p>
<p>trojan会先查询配置文件中的password字段，然后查询数据库中的字段。之后会去计算50+100&lt;100（上传+下载是否小于限额），小于的话，允许链接。</p>
<p>上述SQL语句中，1024如果是负数，意味着不限额。</p>
<p>quota、download、upload单位都是字节</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p>项目主页<a target="_blank" rel="noopener" href="https://github.com/trojan-gfw/trojan">https://github.com/trojan-gfw/trojan</a></p>
<p>teddysun一键bbr脚本 <a target="_blank" rel="noopener" href="https://teddysun.com/489.html">https://teddysun.com/489.html</a></p>
<p>dynuddns <a target="_blank" rel="noopener" href="https://www.dynu.com/">https://www.dynu.com</a></p>
<p>nginx与trojan <a target="_blank" rel="noopener" href="https://github.com/trojan-gfw/trojan/issues/67">https://github.com/trojan-gfw/trojan/issues/67</a></p>
<p>设计讨论 <a target="_blank" rel="noopener" href="https://github.com/trojan-gfw/trojan/issues/14">https://github.com/trojan-gfw/trojan/issues/14</a></p>
<p>VC运行库<a target="_blank" rel="noopener" href="https://aka.ms/vs/16/release/VC_redist.x64.exe">https://aka.ms/vs/16/release/VC_redist.x64.exe</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/RPCS3/rpcs3/issues/6646">https://github.com/RPCS3/rpcs3/issues/6646</a></p>
<p>配置文件详解<a target="_blank" rel="noopener" href="https://trojan-gfw.github.io/trojan/config">https://trojan-gfw.github.io/trojan/config</a></p>
<p>android客户端 <a target="_blank" rel="noopener" href="https://github.com/trojan-gfw/igniter">https://github.com/trojan-gfw/igniter</a></p>
<p>iOS：shadowrocket的test flight版</p>
<p>SSL证书配置：<a target="_blank" rel="noopener" href="https://dmesg.app/letsencrypt-nginx-subdomain.html">https://dmesg.app/letsencrypt-nginx-subdomain.html</a>  <a target="_blank" rel="noopener" href="https://letsencrypt.org/zh-cn/getting-started/">https://letsencrypt.org/zh-cn/getting-started/</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2019/10/02/trojan/index/" data-id="clhp7rtmg00a6s2qr1jcohrfh" data-title="使用trojan翻越长城的进阶使用方法" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-yyets-bot/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/08/16/yyets-bot/index/" class="article-date">
  <time class="dt-published" datetime="2019-08-16T00:00:00.000Z" itemprop="datePublished">2019-08-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/share/">share</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/08/16/yyets-bot/index/">人人影视资源搜索机器人</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>弄了个人人影视资源机器人，???</p>
<h2 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h2><p><img src="/images/2019081602101377.jpeg"> <img src="/images/2019081602101378.jpeg"></p>
<h2 id="来源"><a href="#来源" class="headerlink" title="来源"></a>来源</h2><p>直接爬虫+解析oabt005.com 的资源搜索页面，就是这么简单</p>
<h2 id="二次开发"><a href="#二次开发" class="headerlink" title="二次开发"></a>二次开发</h2><p><code>html_request.py</code>返回网页源代码，<code>html_parser.py</code>返回解析之后的结构化数据，列表+字典</p>
<h2 id="源代码"><a href="#源代码" class="headerlink" title="源代码"></a>源代码</h2><p>[gt href&#x3D;’<a target="_blank" rel="noopener" href="https://github.com/BennyThink/YYeTsBot'/]%E5%BC%80%E6%BA%90%E5%9C%B0%E5%9D%80/[/gt/]">https://github.com/BennyThink/YYeTsBot&#39;\]开源地址\[/gt\]</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2019/08/16/yyets-bot/index/" data-id="clhp7rtnv00bws2qrgutz5b2n" data-title="人人影视资源搜索机器人" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-xiaoice/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/08/11/xiaoice/index/" class="article-date">
  <time class="dt-published" datetime="2019-08-11T00:00:00.000Z" itemprop="datePublished">2019-08-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/program/">program</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/08/11/xiaoice/index/">真正唯一可用的微软小冰API - realXiaoice</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>在聊天机器人中，微软小冰可以说是比较有特色的了。然而不友好的一点是微软小冰并没有开放给公众的API。上网搜一搜，也并没没有真正好用的API！所以本萌新只好自己动手，丰衣足食了。</p>
<p>（可惜图灵机器人要咱上传手持身份证的照片，(╯‵□′)╯︵┻━┻）</p>
<p>想和小冰聊天，只能看看与小冰合作的第三方平台了。</p>
<p><img src="/images/2019081112582530.png"></p>
<p>乍一看平台挺多，但是其实没有几个是提供了简单易用的SDK能够让我接管聊天这件事情的……哪像telegram那样嘛！！</p>
<p>本API呢……是从新浪微博入手的……</p>
<h2 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h2><p><img src="/images/2019081112582628.png" alt="https://github.com/BennyThink/realXiaoice/raw/master/assets/183303.png"></p>
<p>将<a target="_blank" rel="noopener" href="https://dmesg.app/expressbot.html">ExpressBot</a>与小冰结</p>
<p><img src="/images/2019081112582788.jpeg" alt="74964.jpg"></p>
<h2 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h2><ul>
<li>可用，2019年唯一真正可用的API</li>
<li>异步非阻塞：尽管如此，还是需要一两秒给小冰那边的~</li>
<li>可维护：咱是要维护这个的……</li>
</ul>
<p>先来简单的介绍下使用方法吧！</p>
<h2 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h2><h3 id="支持GET、POST方法，也可以POST-JSON"><a href="#支持GET、POST方法，也可以POST-JSON" class="headerlink" title="支持GET、POST方法，也可以POST JSON"></a>支持GET、POST方法，也可以POST JSON</h3><p>GET <a target="_blank" rel="noopener" href="http://127.0.0.1:6789/chat?text=hello">http://127.0.0.1:6789/chat?text=hello</a></p>
<h3 id="假如一切正常，HTTP-200"><a href="#假如一切正常，HTTP-200" class="headerlink" title="假如一切正常，HTTP 200"></a>假如一切正常，HTTP 200</h3><p>{<br>“text”: “想我干嘛”,<br>“debug”: “”<br>}</p>
<h3 id="假如客户端有错，HTTP-400"><a href="#假如客户端有错，HTTP-400" class="headerlink" title="假如客户端有错，HTTP 400"></a>假如客户端有错，HTTP 400</h3><p>{<br>“text”: “”,<br>“debug”: “client wrong reason”<br>}</p>
<h3 id="假如服务端有错，HTTP-500"><a href="#假如服务端有错，HTTP-500" class="headerlink" title="假如服务端有错，HTTP 500"></a>假如服务端有错，HTTP 500</h3><p>{<br>“text”: “”,<br>“debug”: “server wrong reason”<br>}</p>
<h2 id="部署方法"><a href="#部署方法" class="headerlink" title="部署方法"></a>部署方法</h2><p>其实部署本程序很简单的啦！以下步骤，如果理想的话，只需要十年再来一次哦~</p>
<h3 id="1-领养小冰"><a href="#1-领养小冰" class="headerlink" title="1. 领养小冰"></a>1. 领养小冰</h3><p>注册一个新浪微博账号，领养小冰，确保与小冰的私信是正常的</p>
<h3 id="2-登录微博账号"><a href="#2-登录微博账号" class="headerlink" title="2. 登录微博账号"></a>2. 登录微博账号</h3><p>使用Chrome或者Firefox，建议开启隐身模式，打开 <a target="_blank" rel="noopener" href="https://m.weibo.cn,/">https://m.weibo.cn，</a> 登录你的微博账号</p>
<h3 id="3-获取headers"><a href="#3-获取headers" class="headerlink" title="3. 获取headers"></a>3. 获取headers</h3><p>打开和小冰的私信页面，按F12打开控制台，切换到Network，并选中XHR，然后和小冰说句话，点开名为send的请求</p>
<p>复制全部Request Headers中<strong>除了Content-Length以外所有行</strong>，粘贴到headers.txt中</p>
<p><img src="/images/2019081112582868.png" alt="https://github.com/BennyThink/realXiaoice/raw/master/assets/182123.png"></p>
<h3 id="4-安装Python-3与依赖"><a href="#4-安装Python-3与依赖" class="headerlink" title="4. 安装Python 3与依赖"></a>4. 安装Python 3与依赖</h3><p>安装适合自己平台的Python，然后</p>
<p>pip install tornado requests</p>
<h3 id="5-运行"><a href="#5-运行" class="headerlink" title="5. 运行"></a>5. 运行</h3><p>python ice_server.py</p>
<h3 id="6-systemd单元文件"><a href="#6-systemd单元文件" class="headerlink" title="6. systemd单元文件"></a>6. systemd单元文件</h3><p>可能需要给<code>headers.txt</code>设置足够的权限</p>
<p>[Unit]<br>Description&#x3D;xiaoice API by Benny<br>After&#x3D;network.target network-online.target nss-lookup.target</p>
<p>[Service]<br>User&#x3D;nobody<br>Restart&#x3D;on-failure<br>Type&#x3D;simple<br>WorkingDirectory&#x3D;&#x2F;path&#x2F;to&#x2F;realXiaoice<br>ExecStart&#x3D;&#x2F;usr&#x2F;bin&#x2F;python3 &#x2F;path&#x2F;to&#x2F;realXiaoice&#x2F;ice_server.py</p>
<p>[Install]<br>WantedBy&#x3D;multi-user.target</p>
<h2 id="其他使用细节"><a href="#其他使用细节" class="headerlink" title="其他使用细节"></a>其他使用细节</h2><h2 id="自定义监听端口"><a href="#自定义监听端口" class="headerlink" title="自定义监听端口"></a>自定义监听端口</h2><p>python ice_server.py –p&#x3D;41123</p>
<h2 id="自定义监听地址"><a href="#自定义监听地址" class="headerlink" title="自定义监听地址"></a>自定义监听地址</h2><p>python ice_server.py –h&#x3D;0.0.0.0</p>
<h2 id="目前计划"><a href="#目前计划" class="headerlink" title="目前计划"></a>目前计划</h2><ul>
<li>只允许特定IP访问API</li>
<li>对小冰的回复增加图片支持</li>
</ul>
<h2 id="开源地址"><a href="#开源地址" class="headerlink" title="开源地址"></a>开源地址</h2><p><a target="_blank" rel="noopener" href="https://github.com/BennyThink/realXiaoice">https://github.com/BennyThink/realXiaoice</a></p>
<p>[gt href&#x3D;’<a target="_blank" rel="noopener" href="https://github.com/BennyThink/realXiaoice'/]%E6%88%B3~/[/gt/]">https://github.com/BennyThink/realXiaoice&#39;\]戳~\[/gt\]</a></p>
<p> </p>
<h2 id="我想要个现成的！"><a href="#我想要个现成的！" class="headerlink" title="我想要个现成的！"></a>我想要个现成的！</h2><p>那么……可以使用智障版呀！</p>
<p>  curl “<a target="_blank" rel="noopener" href="http://39.106.197.205:16789/chat?text=hey">http://39.106.197.205:16789/chat?text=hey</a>“</p>
<h2 id="人工智障聊天机器人"><a href="#人工智障聊天机器人" class="headerlink" title="人工智障聊天机器人"></a>人工智障聊天机器人</h2><p>另外，弄了一个机器学习的人工智障聊天机器人，可以<a target="_blank" rel="noopener" href="https://drive.google.com/open?id=1bdEdLni8X5cz5iTPnJd3t6-2aQ5pmonV">到这里下载</a></p>
<p>使用起来很简单，<code>pip3 install -r requirements.txt</code>, 分别运行<code>interact_mmi.py</code>和<code>silly_ice.py</code>就可以了</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2019/08/11/xiaoice/index/" data-id="clhp7rtnp00bqs2qr5twhcwk0" data-title="真正唯一可用的微软小冰API - realXiaoice" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/8/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><a class="page-number" href="/page/11/">11</a><span class="space">&hellip;</span><a class="page-number" href="/page/23/">23</a><a class="extend next" rel="next" href="/page/10/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/azure/">azure</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/azure/program/">program</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/china/">china</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/china/justsay/">justsay</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/cloudflare/">cloudflare</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/gfw/">gfw</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/it/">it</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/it/justsay/">justsay</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/it/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/it/security/">security</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/it/share/">share</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/justsay/">justsay</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/justsay/gfw/">gfw</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/justsay/program/">program</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/linux/security/">security</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/website/">website</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/program/">program</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/program/share/">share</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/security/">security</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/security/justsay/">justsay</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/security/program/">program</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/share/">share</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/website/">website</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/website/program/">program</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/what/">what</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/what/gfw/">gfw</a></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/" rel="tag">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ubuntu/" rel="tag">ubuntu</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/linux/" style="font-size: 10px;">linux</a> <a href="/tags/ubuntu/" style="font-size: 10px;">ubuntu</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2025/03/">March 2025</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/12/">December 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/11/">November 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/10/">October 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/09/">September 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/08/">August 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/07/">July 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/04/">April 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/03/">March 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/02/">February 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/12/">December 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/11/">November 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">April 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">March 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">February 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">January 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">September 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">August 2015</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2025/03/16/py-azure-oai-proxy/index/">使用50行Python代码实现一个Azure OpenAI Proxy</a>
          </li>
        
          <li>
            <a href="/2024/12/12/candlestick-llm/index/">使用Python 通过K线计算技术指标，并用 LLM 预测趋势</a>
          </li>
        
          <li>
            <a href="/2024/11/03/warp-http-proxy/index/">把 Cloudflare WARP 转换为 http 代理</a>
          </li>
        
          <li>
            <a href="/2024/10/12/aca-php/index/">用 Azure Container Apps 运行PHP网站</a>
          </li>
        
          <li>
            <a href="/2024/10/06/aca-vm-scale/index/">Azure Container Apps 连接到虚拟机并配置CPU自动缩放</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2025 Benny小土豆<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>