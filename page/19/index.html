<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>土豆不好吃</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="土豆不好吃">
<meta property="og:url" content="http://example.com/page/19/index.html">
<meta property="og:site_name" content="土豆不好吃">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Benny小土豆">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="土豆不好吃" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">土豆不好吃</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-diskgenius-mbr2gpt/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2016/03/19/diskgenius-mbr2gpt/index/" class="article-date">
  <time class="dt-published" datetime="2016-03-19T00:00:00.000Z" itemprop="datePublished">2016-03-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/it/">it</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2016/03/19/diskgenius-mbr2gpt/index/">DiskGenius：MBR转GPT磁盘的首、尾部分没有转换到GUID分区表所必须的空间</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p> </p>
<p>话说，前几天比较忙，因为从Windows 7迁移到Windows 10——顺路从MBR改成了GPT，解决了以前的一个问题。</p>
<p>以前写过一篇<a target="_blank" rel="noopener" href="https://dmesg.app/newbie-no-need-to-reload-windows-7-started-by-the-bios-to-uefi.html">《[新手向]无需重装，Windows 7 由BIOS改成UEFI启动》</a></p>
<p>其实我自己在弄的时候就遇见了这么一个问题：</p>
<p><img src="/images/031916_1157_DiskGeniusM1.png"></p>
<blockquote>
<p>磁盘的首、尾部分没有转换到GUID分区表所必须的空间（除了MBR扇区外还需要各33个扇区）。请先删除分区或者对分区进行调整后再转换。</p>
</blockquote>
<p>这个问题属实棘手，怎么搜索也都没解决方案……后来经过我的研究，终于找到了解决解决方案——而且不会丢任何文件！</p>
<p>DiskGenius提示首、尾部分没有所必须的空间，那咱们就手动的弄出来点空间呗……</p>
<p>首先必须先启动到PE，然后大部分人的硬盘应该是有很多个分区的，我们就选择最后一个分区，右键-调整分区大小。</p>
<p>不用多，给后面空出来点，前面也给空出来点就可以。</p>
<p><img src="/images/031916_1157_DiskGeniusM2.png"></p>
<p>调整之后硬盘的这个条前后就多出了空白的空间。</p>
<p><img src="/images/031916_1157_DiskGeniusM3.png"></p>
<p>再试试转换，噢耶！</p>
<p><img src="/images/031916_1157_DiskGeniusM4.png"></p>
<p>你看是GPT了吧！</p>
<p>后面的空间嘛……愿意就合并回去，不愿意就拉倒。</p>
<p>一不小心又暴露了我是虚拟机测试的……但是我想说，真实情况也差不多是这样。</p>
<p>那我是怎么创造出来这种无法转换的情况呢？</p>
<p>其实很简单啊，一个空白的硬盘，你一个扇区都不丢一点空间都不留的，都给分了就可以了……</p>
<p> </p>
<p>管理，献上我的壁纸！啦啦啦！</p>
<p><a target="_blank" rel="noopener" href="https://dmesg.app/wp-content/uploads/2016/03/2016031912040444.jpg"><img src="/images/2016031912040444.jpg" alt="Battlefield (57)"></a></p>
<p>Battlefield 3 - 碎剑者行动→_→英文我忘记了。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2016/03/19/diskgenius-mbr2gpt/index/" data-id="clhp7rtf7001ls2qrd5o356th" data-title="DiskGenius：MBR转GPT磁盘的首、尾部分没有转换到GUID分区表所必须的空间" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-timeline-subtitles/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2016/03/12/timeline-subtitles/index/" class="article-date">
  <time class="dt-published" datetime="2016-03-12T00:00:00.000Z" itemprop="datePublished">2016-03-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/it/">it</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2016/03/12/timeline-subtitles/index/">[新手向]如何制作时间轴、字幕和压制影片</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>作为一名字幕组的小小翻译，其实我老早就想写写制作字幕的方法了，结果一直拖到今天。</p>
<p>今天就以最简单的方式来教教大家如何制作双语字幕，还有卡轴、压制等~</p>
<p> </p>
<h2 id="一-扫个盲，编码格式、封装格式"><a href="#一-扫个盲，编码格式、封装格式" class="headerlink" title="一.扫个盲，编码格式、封装格式"></a>一.扫个盲，编码格式、封装格式</h2><p>先来搞清楚一个概念，视频&#x2F;音频编码格式、封装格式。我不是这个领域的绝对专家，但是解释下概念还是可以做到的。</p>
<h3 id="视频编码格式"><a href="#视频编码格式" class="headerlink" title="视频编码格式"></a>视频编码格式</h3><p>就是一种编码视频的标准（这不是废话吗），目前最流行的莫过于AVC（通常我们叫它H.264）了，还有DivX等等。</p>
<h3 id="音频编码格式"><a href="#音频编码格式" class="headerlink" title="音频编码格式"></a>音频编码格式</h3><p>就是编码音频的标准，又是一句废话，目前很流行的有AC3，DTS，AAC——很不幸的是前两者是杜比公司的专利，所以很多软件为了避免版权问题，都不会【直接提供】这两者的解码器，所以就会造成”只有图像没有声音”的假象，在iOS上这个现象会更明显。</p>
<h3 id="封装格式"><a href="#封装格式" class="headerlink" title="封装格式"></a>封装格式</h3><p>我们常见的mp4、mkv、avi等结尾的视频，其实这个”mp4”是封装格式。封装格式是什么意思呢？我们知道一部视频里最起码要有视频流、音频流，可能还会有字幕等其他的”流”。如果把所有的”流”比作水，那么封装格式就是装水的杯子——有的”杯子”设计的很好，就可以装很多种不同的”水”并且利于饮用；而有些杯子设计的不好，可能会像滴管一样，很糟心的。</p>
<p>现在除非专业人士，否则大部分人都是不太懂这三个”格式”的区别的，但是时刻铭记在心，一个视频文件的扩展名并不代表他的编码格式，AVC可以封装到mkv里，DivX也可以。当然，绝大部分有良心的制作者们都喜欢mkv搭配AVC这种。</p>
<p>播放器能否流畅完整的播放一个视频也是由这三者共同制约的。</p>
<p><img src="/images/031216_0537_1.png"></p>
<p>可以看到这个视频的封装格式是MPEG-4，也就是扩展名是mp4，视频和音频编码分别是AVC、AAC</p>
<p>其实这个扫盲根本就是废话，不喜欢看就略过嘛……</p>
<p> </p>
<h2 id="二-制作字幕的简介"><a href="#二-制作字幕的简介" class="headerlink" title="二.制作字幕的简介"></a>二.制作字幕的简介</h2><p>以我的经历来说，通常会有轴组的人先处理时间轴使字幕和说话配上，然后由翻译进行翻译，然后校对、特效、压制。自己的话只能一人包揽，说着很难但其实很简单。</p>
<p>先祭上我们组都在使用的字幕处理工具：<strong>TimeMachine</strong>，此工具是使用了Windows Media Player作为播放界面的，所以只要WMP能播放的视频都可以的。加上外挂字幕插件之后会直接在播放窗口上显示字幕，就不用来回切换播放器了。</p>
<p><a target="_blank" rel="noopener" href="https://dmesg.app/wp-content/uploads/2016/03/201603120605578.jpg"><img src="/images/201603120605578-1024x552.jpg" alt="主界面"></a></p>
<p>界面还是很简洁实用的！</p>
<p>[dl href&#x3D;’<a target="_blank" rel="noopener" href="http://7xljcn.com1.z0.glb.clouddn.com/TimeM.7z'/]TimeM%E4%B8%8B%E8%BD%BD%E5%9C%B0%E5%9D%80/[/dl/]">http://7xljcn.com1.z0.glb.clouddn.com/TimeM.7z&#39;\]TimeM下载地址\[/dl\]</a></p>
<p>PS，此工具是由VS2008编译而来，所以在最新的Windows 10上可能不是那么好用，而且有时会抽风不显示字幕，此时需要重装VodSub……</p>
<p>为此，我将此工具的代码上传到GitHub以GPLv2开源，希望有能力的人能够继续开发此工具（不用试了，我从05试到了15全都编译出错），希望组织不会找到我哈哈哈</p>
<p>[gt href&#x3D;’<a target="_blank" rel="noopener" href="https://github.com/BennyThink/TimeM'/]%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE%E5%9C%B0%E5%9D%80/[/gt/]">https://github.com/BennyThink/TimeM&#39;\]开源项目地址\[/gt\]</a></p>
<p> </p>
<h2 id="三-卡轴"><a href="#三-卡轴" class="headerlink" title="三.卡轴"></a>三.卡轴</h2><p>做时间轴是一个比较苦的活。我假设你的TM已经能够播放视频了，这是最起码的条件！</p>
<p>我们用TM打开一个范例视频，好像没什么反应哎！对，你只能看到一个准备就绪。</p>
<p><img src="/images/031216_0537_3.png"></p>
<p>此时在左侧选择新字幕，我们就插入个50行吧！</p>
<p><img src="/images/031216_0537_4.png"></p>
<p>之后要注意保存的文件名，假如视频文件叫做1.mp4，字幕就要叫1.srt，这样播放器就会默认加载字幕。因为srt结构比较简单，方便查错校正什么的嘛。</p>
<p><img src="/images/031216_0537_5.png"></p>
<p>下面的编辑窗口就出现了50个空行。</p>
<p>记住两个快捷键，F8和F9。F8对应轴开始的时间，F9对应轴结束的时间。</p>
<p><img src="/images/031216_0537_6.png"></p>
<p>现在开始播放视频，并且使字幕定位在第一行，类似下图这样。</p>
<p><img src="/images/031216_0537_7.png"></p>
<p>人物开始说话，就按F8，觉得这一行差不多够字数了，就按F9，然后什么都不用管，人物再说，就F8记录下一个轴的开始，F9记录结束。TM会自动往下选择下一个空轴的。</p>
<p><img src="/images/031216_0537_8.png"></p>
<p>粉色的圈起来的是每次按F9都会往下跳。</p>
<p>可能有的人反应比较慢，导致开始说话过了0.x秒字幕才出现，那怎么办呢？很简单，设计个延迟就可以啦！</p>
<p>设置-软件选项-字幕选项。根据自身情况设置吧！</p>
<p><img src="/images/031216_0537_9.png"></p>
<p>这样一直卡轴，直到最后，就算做完了时间轴的工作</p>
<p>[v_blue]Tips： 通常来说，美剧&#x2F;电影等都是提供CC字幕的，也就是说英文字幕绝大部分都不是听译出来的。当然CC字幕的格式惨不忍睹，是需要进行大量修改的。[&#x2F;v_blue]</p>
<p> </p>
<h2 id="四-翻译"><a href="#四-翻译" class="headerlink" title="四.翻译"></a>四.翻译</h2><p>翻译这一步嘛，不只是翻译那么简单。翻译的信达雅是一方面，格式的统一也是一方面。</p>
<p>上面提到了对CC的处理，这点基本各大字幕组的处理都差不多：</p>
<p>删掉冗余字幕、标点符号初步统一、语气词感叹词等。</p>
<p>字幕格式，不同组的要求就不同了。大致说下我们组的规则以便参考：</p>
<blockquote>
<p>**1.**不论何时， 严禁出现中文标点！ **2.**中文行断句无需标点句号逗号等，只需两段话之间空两格即可。 **3.**中文行出现书籍、杂志、影视作品名称等。 必须加书名号《》 **4.**特殊引用加英文引号””，比如说讽刺啊反语等。 **5.**外国人名之间加· **6.**对话格式如果一个时间轴里面有两个人的对话，字幕中对话一般没有对话的标记，所以，翻译需要自行加符号-来区分，英文对话之间-后面需要空一格，中文对话的-后面则不用空格， 如： 00:01:25,241 –&gt; 00:01:27,527 -你摸什么呢 -动脉 - What are you looking for? - A pulse. 一个时间轴里面有两个人对话前面要使用横断线-号分开，以区别是两人说的话，并且两人对白中间要用空格隔开。中文空两格，英文空一格。 **7.**大小写，这个嘛就是英语功底的事情了…… **8.**字幕长度，我们推荐的是英文不超过65字幕，中文不超过18字符，免得字幕变成两行影响效果。如果太长，那么就要根据意群进行分割。 **9.**硬字幕，一些说明头衔、学校等字幕，需要再翻一下方便观众理解，插入新轴用{\an8}置顶内容即可。插入按钮在倒数第四个。</p>
</blockquote>
<p>拆分字幕方法：</p>
<p>在要拆分的字母上右键，自定义拆分</p>
<p><img src="/images/031216_0537_10.png"></p>
<p>选择好分割的位置，然后点击确定，之后点击新增，把中文的也分割了，确定就好。</p>
<p><img src="/images/031216_0537_11.png"></p>
<p>需要注意的是分割之后这两个轴可能会对不上，所以建议重新看看。</p>
<p> </p>
<h2 id="五-后期"><a href="#五-后期" class="headerlink" title="五.后期"></a>五.后期</h2><p>我呐，不是做后期的，但是一点特效都没有的字幕我是忍受不了的！简单的设置下字幕的字体、字形，我一般都使用SrtEdit，aegisub这种东西太高级用不来……</p>
<p>[dl href&#x3D;’<a target="_blank" rel="noopener" href="http://7xljcn.com1.z0.glb.clouddn.com/SrtEdit.7z'/]SrtEdit%E4%B8%8B%E8%BD%BD%E5%9C%B0%E5%9D%80/[/dl/]">http://7xljcn.com1.z0.glb.clouddn.com/SrtEdit.7z&#39;\]SrtEdit下载地址\[/dl\]</a></p>
<p>由于srt对字幕特效的支持有限，所以我通常先将其转换为ass格式，用SrtEdit打开字幕，另存为，选择ass即可。</p>
<p>之后Ctrl+A全选字幕，格式-文本特效编辑</p>
<p><img src="/images/031216_0537_12.png"></p>
<p>大家伙就看着办吧！其他特效也看着办吧</p>
<p><img src="/images/031216_0537_13.png"></p>
<p>要注意，如果你使用的字体文件在别的电脑上不存在，那么就会变成默认的字体——这也是为什么我们要压制的原因。</p>
<p>这是我选择的英文字体Ubuntu Mono，中文字体幼圆。</p>
<p><img src="/images/031216_0537_14.png"></p>
<p>要注意的是，KMPlayer需要选项-字幕处理-多重字幕&#x2F;其他，选择“高级”选项卡，第一栏里选中开启、实时渲染、保持三项才可以显示字幕的字体。</p>
<p> </p>
<h2 id="六-压制"><a href="#六-压制" class="headerlink" title="六.压制"></a>六.压制</h2><p>前面预备知识里提过，一个封装格式里面可以带有很多信息，其中也自然而然的包括字幕。个人比较喜欢mkv这种封装格式。</p>
<p>有一个工具叫做mkvtoolnix，可以看到一个mkv文件里有哪些东西。双击mmg.exe，将视频文件拖入，可以看到这个视频有两个流。</p>
<p><img src="/images/031216_0537_15.png"></p>
<p>有些电影是”国英粤”三个音频轨，如果只想要英语，就取消对应的勾选，然后开始混流即可。</p>
<p>所以在这里，压制就有了两种办法：</p>
<p>一种是简单的把字幕放到这个”容器”里，仍旧<strong>无法避免</strong>在没有对应字体的电脑上无法显示特效；</p>
<p>另一种则是重新编码，把字幕作为视频流的一部分，这样字体特效无论放到哪都不会丢了。那些喜欢纯净的不要字幕的就会挑剔了。</p>
<h3 id="第一种办法"><a href="#第一种办法" class="headerlink" title="第一种办法"></a>第一种办法</h3><p>直接用mkvtoolnix混流就可以了，把字幕添加进去，混流，基本上几分钟就可以完成；</p>
<h3 id="第二种办法"><a href="#第二种办法" class="headerlink" title="第二种办法"></a>第二种办法</h3><p>就要用到俺组开发的傻瓜压制工具，通常来说会花费很长时间——当初我压制《阿凡达》花费了差不多三四个小时。</p>
<p>首先需要安装AviSynthPlus-r1576和VC，在setup里有。</p>
<p>然后打开压制工具，左上角选择新建任务，选择对应的视频和字幕，确定。</p>
<p><img src="/images/031216_0537_16.png"></p>
<p>右上角选择压制之后的分辨率即可。至于码率什么的，都是不用管的！</p>
<p>64位操作系统选择x64会更好~</p>
<p>PS，如果某位喜欢1080P的压制，可是这里又没有1080P的，那怎么办呢？</p>
<p>其实很简单，打开encode文件夹，会发现有很多批处理文件。我已经为你们准备好了压制1080P的批处理了。</p>
<p>该怎么办还用说吗~~修改完直接把视频拖上去就可以了。</p>
<p>[v_error]警告 视频文件名最好不要带空格哦，毕竟windows这家伙不会拿\转义嘛……[&#x2F;v_error]</p>
<p><img src="/images/031216_0537_17.png"></p>
<p>压制过程是非常耗费CPU的，那个喜欢浮点运算的GPU呢？</p>
<p><img src="/images/031216_0537_18.png"></p>
<p>真的是1080P</p>
<p><img src="/images/031216_0537_19.png"></p>
<p>mmg分析表示，字幕已经成了视频的一部分。</p>
<p>如果想要裁剪视频，简单的可以拿格式工厂来做到……另外，格式工厂转换格式的时候加字幕貌似有些bug…… [dl href&#x3D;’<a target="_blank" rel="noopener" href="http://7xljcn.com1.z0.glb.clouddn.com/mkvtoolnix.7z'/]mkvtoolnix/[/dl/]">http://7xljcn.com1.z0.glb.clouddn.com/mkvtoolnix.7z&#39;\]mkvtoolnix\[/dl\]</a></p>
<p>[dl href&#x3D;’<a target="_blank" rel="noopener" href="http://download2.file.alimmdn.com/%E5%8E%8B%E7%89%87%E5%B7%A5%E5%85%B7.7z?t=1484276984176%27%5C%5D%E5%8E%8B%E7%89%87%E5%B7%A5%E5%85%B7%5C%5B/dl%5C%5D">http://download2.file.alimmdn.com/%E5%8E%8B%E7%89%87%E5%B7%A5%E5%85%B7.7z?t=1484276984176&#39;\]压片工具\[/dl\]</a></p>
<h3 id="第三种方法：高手必备的ffmpeg"><a href="#第三种方法：高手必备的ffmpeg" class="headerlink" title="第三种方法：高手必备的ffmpeg"></a>第三种方法：高手必备的ffmpeg</h3><p>好吧，<a target="_blank" rel="noopener" href="https://dmesg.app/ffmpeg.html/2">看这里就好了</a>。</p>
<h2 id="七-后话"><a href="#七-后话" class="headerlink" title="七.后话"></a>七.后话</h2><p>本文提到的所有工具打包下载，多贴心啊！ [dl href&#x3D;’<a target="_blank" rel="noopener" href="http://download2.file.alimmdn.com/%E5%AD%97%E5%B9%95%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7%E9%9B%86%E5%90%88.7z?t=1484277347506%27%5C%5D%E5%AD%97%E5%B9%95%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7%E6%89%93%E5%8C%85%E4%B8%8B%E8%BD%BD%5C%5B/dl%5C%5D">http://download2.file.alimmdn.com/%E5%AD%97%E5%B9%95%E5%A4%84%E7%90%86%E5%B7%A5%E5%85%B7%E9%9B%86%E5%90%88.7z?t=1484277347506&#39;\]字幕处理工具打包下载\[/dl\]</a></p>
<p>附：特别喜欢的一段演讲，尽管是游戏里的而且我还没玩过……Assassins Creed 2 - Ezio’s Speech </p>
<p>[v_act]There are those who will take that freedom from us, and too many of you gladly give it. But it is our ability to choose whatever you think is true that makes us human. Choose your own way![&#x2F;v_act]</p>
<p> </p>
<h2 id="八-晒壁纸"><a href="#八-晒壁纸" class="headerlink" title="八.晒壁纸"></a>八.晒壁纸</h2><p>又到了晒壁纸的时候……</p>
<p>然而并没有壁纸可以，哈哈哈。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2016/03/12/timeline-subtitles/index/" data-id="clhp7rtma00a0s2qr55nv4j1f" data-title="[新手向]如何制作时间轴、字幕和压制影片" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-prevent-from-network-audit/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2016/03/03/prevent-from-network-audit/index/" class="article-date">
  <time class="dt-published" datetime="2016-03-03T00:00:00.000Z" itemprop="datePublished">2016-03-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/security/">security</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2016/03/03/prevent-from-network-audit/index/">如何防范网络审计</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p> </p>
<p>咳咳，怎么会写起这个话题呢？起因是某个小伙伴发给了我<a target="_blank" rel="noopener" href="https://www.zhihu.com/question/40543633/answer/88747638?from=singlemessage&isappinstalled=0&code=021ec89ac291c875d6f701e974c275b2&state=1a394b6ce165363accb5a08f16b0bbbd">知乎的链接</a>让我提提神。</p>
<p>本来是想给写到总结里，结果一口气就写了2000来字，已经不适合在总结里出现啦，所以就单独拎出来好了！</p>
<p>事先声明，俺呀，<strong>不是</strong>什么大牛，也不是安全圈的业内人士，更不是密码学专家。我只是来科普下科普下……当然了是原创的科普。</p>
<p>另外，本篇文章是应对”审计”的哟……社会工程学等等不在此列。</p>
<p> </p>
<h1 id="一。网络审计是什么？"><a href="#一。网络审计是什么？" class="headerlink" title="一。网络审计是什么？"></a>一。网络审计是什么？</h1><p>这里我指的是”<strong>上网行为管理审计</strong>“。在某些企业、学校里，会在网关部署一个设备（当然也有可能是旁路），所有进出网关的东西都会被记录下来。简而言之就是，理论上你看了什么网页，听了什么歌，下了什么电影都是可以在审计工具里看到的。</p>
<p><a target="_blank" rel="noopener" href="https://dmesg.app/wp-content/uploads/2016/03/2016030305595622.jpg"><img src="/images/2016030305595622.jpg" alt="QQ截图20160303135839"></a></p>
<p>当然审计的程度是不同的，有的可能不会部署这类工具，有的可能会对某些端口进行屏蔽（比如屏蔽BT端口来禁止下载），有的可能会特殊关照某些端口（比如HTTP的80）。</p>
<p>防范之心不可无。</p>
<p>当然你可以说，我们处在运营商这一个大的”公司”之中，无论怎么防范都是没用的。对待这种言论，我只想说，滚犊子！人活着早晚得死，那就现在死了呗。防范是有针对性的，你在公司里主要的防范对象是公司领导，关电信CEO什么事？况且，互联网的存在使得匿名真正成为了可能。</p>
<p>有人可能会问，有这么坏的公司&#x2F;学校吗？就引用鲁迅老人家的那句话：我向来不惮以最坏的恶意揣测中国人。</p>
<h1 id="二。如何防范网络审计"><a href="#二。如何防范网络审计" class="headerlink" title="二。如何防范网络审计"></a>二。如何防范网络审计</h1><p>想要避开网络审计工具，那就要从多个方面来避免，这还是要借鉴编程随想的<a target="_blank" rel="noopener" href="https://program-think.blogspot.com/2013/06/privacy-protection-0.html">《如何保护隐私》</a>系列和<a target="_blank" rel="noopener" href="https://program-think.blogspot.com/2010/04/howto-cover-your-tracks-0.html">《如何隐藏你的踪迹，避免跨省追捕</a>》系列。此两系类博文堪称经典，隐匿&#x2F;匿名必看！看了他那两个系类博文，就可以直接×了我这个了。</p>
<p>拿着和国家机器隐匿的办法来对付区区一个公司显然大材小用。尽管不同人对匿名有不同的需求，但是这种意识应该得到提高、加强。</p>
<p>对待网络审计工具，首先是无法避免要通过网关了，所以只能在通信手段上进行保护。相信现代密码学，相信科学。</p>
<p>[v_error]编程随想的博客搭建于Blogspot，被墙——因为Blogspot是Google的[&#x2F;v_error]</p>
<h2 id="1-网络层面的防范："><a href="#1-网络层面的防范：" class="headerlink" title="1.网络层面的防范："></a>1.网络层面的防范：</h2><p>毫无疑问你的所有数据都得有一个网关一样的设备转发出去，这是无法避免的。也就是说，所有明文传输的东西都会被记录下来。想当然的那么就不明文传输，直接密文传输就好了。</p>
<p>那么应对措施就来了：</p>
<h3 id="1-VPN工具"><a href="#1-VPN工具" class="headerlink" title="(1).VPN工具"></a>(1).VPN工具</h3><p>我们可以使用VPN协议来创建加密隧道，所有的数据都会在这个隧道里传播，网关<strong>只能知道</strong>你的VPN服务器的IP和你在使用VPN，却<strong>比较难</strong>解密你的VPN通信。当然，推荐使用OpenVPN这种可以防止中间人攻击的证书体系VPN，当然L2TP+IPSec也可以做到一定程度的防护，PPTP还是免了吧。</p>
<h3 id="2-加密代理"><a href="#2-加密代理" class="headerlink" title="(2).加密代理"></a>(2).加密代理</h3><p>除了VPN这种加密隧道之外，还可以使用代理工具，比如非常著名的加密socks5代理Shadowsocks。当然要注意选择一个<strong>比较健壮的加密算法，</strong>比如说aes256cfb而不是RC4——尽管我们有理由怀疑，一个公司的网络审计有那么多时间和计算能力来破解RC4吗？</p>
<h3 id="3-加密的通信协议"><a href="#3-加密的通信协议" class="headerlink" title="(3).加密的通信协议"></a>(3).加密的通信协议</h3><p>加密的通信协议，而且是公认的加密协议。时刻记住，尽可能使用加密连接，而且是使用了强大的加密算法和健壮的安全体系的<strong>强加密</strong>。越是公开的加密算法，它的健壮性也就越强，封闭的算法反而越弱，这是密码学的违反常识的理论之一。常见的安全的加密协议有，VPN中的OpenVPN,L2TP+IPSec, Shadowsocks，HTTPS，POP3S,IMAPS,SMTPS等，SSH和基于SSH的SFTP ,SCP等。</p>
<p>最常见的莫过于HTTPS了，你看这篇博文的时候， 右上角是不是绿色的小锁头？你打开淘宝的时候，是不是也是小锁头？甚至某些还会显示Certificate Transparency</p>
<p><img src="/images/030316_0533_1.png"></p>
<p>我可没钱……不过需要注意的是，即使访问了https网站，审计工具也依旧能够知道你访问了某个网站，因为在DNS查询，密钥协商交换证书的时候是一定会泄漏域名的；但是网络审计工具无法得知你具体看了某个文章以及其内容。想要避免此种泄漏，那么最好的方式是使用shadowsocks，或者VPN+远程DNS解析（DNSCrypt也行），这样审计工具就只能看到你和代理服务器的加密通信了。</p>
<p>此网络层面的防范乃是比较全能的办法。可是也<strong>别天真的以为</strong>，用了VPN就不会泄露你的IP，开了全局模式就不会泄露IP——有一种东西叫Flash和WebRTC的，这就是隐匿的内容了。</p>
<h2 id="2-软件层面的防范"><a href="#2-软件层面的防范" class="headerlink" title="2.软件层面的防范"></a>2.软件层面的防范</h2><p>编程随想把这部分分成了”操作系统的防范”、”个人软件的防范”、”通讯工具的防范”，我觉得在应对公司的审计工具有点大材小用。</p>
<h3 id="1-IM软件："><a href="#1-IM软件：" class="headerlink" title="(1).IM软件："></a>(1).IM软件：</h3><p>即时通信工具，比如说QQ，飞信等这是存在国家级监控的，小小公司应该管不到。但是QQ客户端是否加密传输聊天记录、加密程度、是否可以防范中间人至今还是未知数。</p>
<p>我们可以使用Skype、Google环聊等工具。请注意是国际版Skype哟，绝对的加密安全和保障。</p>
<h3 id="2-CA证书："><a href="#2-CA证书：" class="headerlink" title="(2).CA证书："></a>(2).CA证书：</h3><p>CA证书对于整个HTTPS的安全体系有多么重要，不了解的人可能完全无法理解。为此，我大家伙可以同样去看看编程随想的系列博文：<a target="_blank" rel="noopener" href="https://program-think.blogspot.com/2014/11/https-ssl-tls-0.html">《扫盲 HTTPS 和 SSL&#x2F;TLS 协议》</a></p>
<p>如果公司在各位预装的系统上植入了自签名的CA证书，那么毫无疑问所有HTTPS都存在被劫持的风险。</p>
<p>如图，被签发了伪证书的GitHub</p>
<p><a target="_blank" rel="noopener" href="https://dmesg.app/wp-content/uploads/2016/03/2016030306085390.jpg"><img src="/images/2016030306085390.jpg" alt="t011407dbd01decd039"></a></p>
<p>说到CA，就得提到臭名昭著的CNNIC Root和12306的SRCA根证书。那么大的铁道部买不起一个证书？我只能再次引用并改编鲁迅老人家的那句话：我向来不惮以最坏的恶意揣测党国。</p>
<h3 id="3-邮件的防范"><a href="#3-邮件的防范" class="headerlink" title="(3).邮件的防范"></a>(3).邮件的防范</h3><p>目前QQ邮箱是默认开启https的，如果在QQ面板直接打开邮箱，是https的web页面，这样审计工具只能知道你访问了QQ邮箱，却没办法知道你的邮件内容。</p>
<p>如果使用邮件客户端，那么可以设置相应的SSL连接。</p>
<p>比如QQ邮箱的帮助里是这样的：</p>
<p><img src="/images/030316_0533_2.png"></p>
<h3 id="4-客户端监控软件："><a href="#4-客户端监控软件：" class="headerlink" title="(4).客户端监控软件："></a>(4).客户端监控软件：</h3><p>有些变态公司可能会在员工的电脑中安装监控工具，好似当初绿坝，有些甚至可能是驱动级监控工具。最简单的办法就是重装系统——怕啥BIOS密码，大部分电脑都可以在启动的时候按F8、ESC之类按键选择启动设备。哪怕不能选择，你都看这篇文章了，难道不会拆机箱抠电池么~顺手重建MBR来防范MBR病毒吧……好像现在都是GPT了耶。</p>
<p>可能重装系统会被发现或者引起怀疑，那么也有一个替代的办法，使用一些Linux发行版的LiveCD，制作成启动U盘，随插随用。当然这就有点技术门槛了，大部分人还是不太能适应各种Linux发行版吧！</p>
<p>对待不截屏的监控软件，也可以使用虚拟机隔离之。</p>
<h3 id="5-浏览器的防范："><a href="#5-浏览器的防范：" class="headerlink" title="(5.)浏览器的防范："></a>(5.)浏览器的防范：</h3><p>大概不会有公司会无聊到给员工的电脑装上自己开发的“监控浏览器”吧，但是依旧要注意一点，电脑被收走了，浏览器的历史记录不也就”公之于众”了吗？</p>
<p>Chrome有隐身模式。</p>
<h2 id="3-硬件层面的防范："><a href="#3-硬件层面的防范：" class="headerlink" title="3.硬件层面的防范："></a>3.硬件层面的防范：</h2><p>电脑又被收走了，那平时下的小黄片不就被发现了吗？</p>
<p>没关系，只要我们做好了预防措施，那么就可以让监管人员欲哭无泪。</p>
<p>我们可以用BitLocker（Windows 7就自带了哦）、GnuPG、VeraCrypt（或许大家还记得TrueCrypt）这类工具加密文件、乃至于整个分区，而且保证是让NSA都欲哭无泪的加密。</p>
<p>GPG和VC的简要使用方法可以参考<a target="_blank" rel="noopener" href="https://dmesg.app/encrypt-tech-gnupg-veracrypt-turial.html">《加密技术的科普以及GnuPG和VeraCrypt教程》</a></p>
<p>或许有人要抬杠了，领导说不给他密码，就给我开除让我喝西北风，我没办法啊就给了密码。这再次印证了一个安全圈的俗话：越是安全的系统，最大的弱点往往就越在于人。</p>
<p>对待这种胁迫，我们可以使用VeraCrypt的隐藏卷，或者干脆死无对证——销毁数据。千万<strong>别天真的以为</strong>清空回收站、任何格式化（低级格式化、快速格式化、完全格式化）可以保护你的数据不被恢复，请使用粉碎工具或者完全物理销毁掉你的存储设备。</p>
<p>关于TrueCrypt更多更牛逼的介绍以及使用技巧等方法，我就不瞎说了，参考随想的牛逼哄哄的<a target="_blank" rel="noopener" href="https://program-think.blogspot.com/2011/05/recommend-truecrypt">《TrueCrypt——文件加密的法宝》</a></p>
<p>以及<a target="_blank" rel="noopener" href="https://program-think.blogspot.com/2015/10/VeraCrypt.html">《扫盲 VeraCrypt——跨平台的 TrueCrypt 替代品》</a></p>
<p> </p>
<h2 id="4-物理层面的防范："><a href="#4-物理层面的防范：" class="headerlink" title="4.物理层面的防范："></a>4.物理层面的防范：</h2><p>老板就在你身后呢，你就别看小黄片了；身后就亮着一个摄像头呢，就悠着点……这种物理层面的防范，只能靠各位自己了……</p>
<p> </p>
<h1 id="三。话外："><a href="#三。话外：" class="headerlink" title="三。话外："></a>三。话外：</h1><p> </p>
<h2 id="密码学"><a href="#密码学" class="headerlink" title="密码学"></a>密码学</h2><p>要不是密码学的发展，哪能给一个普通人和国家机器、哪怕是全世界的人斗争的可能？</p>
<p>在信息时代之前，就几乎已经注定了个人几乎无法匹敌政府，个人往往在任何一个方面都是非常渺小的……</p>
<p>举个例子，一个人能造什么武器？顶多是把枪，而政府却能制造出飞机坦克甚至是核武器。</p>
<p>不光是”武器”，其它领域（比如交通工具）也差不多。在信息时代之前，个人吖那个渺小。</p>
<p>信息时代之后，其实大部分领域也并没有什么变化。你现在能造出来坦克？能玩的出来高铁？别逗了。</p>
<p>但是密码学是个例外。</p>
<p>多亏了当初PGP创始人Philip Zimmermann的抗争，他抵着被无数爱国者们骂成卖国贼的心理压力、抵着被FBI抓走坐牢的压力，义无反顾的发布了PGP——当然，靠着宪法修正案第一条他出口了一本书，书里的内容就是PGP的源代码。（二战以来，密码学一直被大部分国家认作军事机密，所以是禁止出口的。大家晓得图灵不）</p>
<p>如今，随意一个人都可以在网上下载到一些非常优秀的加密工具，稍微学习几分钟，就可以进行<strong>高高高高高强度加密</strong>。而政府方面即使用上超级计算机，也只好干瞪眼。</p>
<p>当然了这无法解密是说，在有意义的时间内无法解密，比如说一百年一千年。</p>
<p>在密码学上，俺们屁民，是和政府们平起平坐的。</p>
<p>再说一句，别以为保密的加密算法就是牛逼的……反而是越开放的加密算法越健壮。</p>
<h2 id="隐私权"><a href="#隐私权" class="headerlink" title="隐私权"></a>隐私权</h2><p>有没有这种意识，隐私权就是基本人权，是不可以被侵犯的。如果隐私是非法的，那也就非法之徒才能够有隐私。</p>
<p> </p>
<h1 id="四。抽风"><a href="#四。抽风" class="headerlink" title="四。抽风"></a>四。抽风</h1><p>最后，我的新规则是，编辑结束发表之前，贴上当前的壁纸，耶。</p>
<p> </p>
<p><a target="_blank" rel="noopener" href="https://dmesg.app/wp-content/uploads/2016/03/2016030306244250.jpg"><img src="/images/2016030306244250-1024x576.jpg" alt="Battlefield (53)"></a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2016/03/03/prevent-from-network-audit/index/" data-id="clhp7rti2006ps2qrgqgx2l51" data-title="如何防范网络审计" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-swiffy-flash2html5/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2016/02/28/swiffy-flash2html5/index/" class="article-date">
  <time class="dt-published" datetime="2016-02-28T00:00:00.000Z" itemprop="datePublished">2016-02-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/it/">it</a>►<a class="article-category-link" href="/categories/it/share/">share</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2016/02/28/swiffy-flash2html5/index/">swiffy的本地化：在线Flash转HTML5</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>[v_error]swiffy下线了[&#x2F;v_error] [dl href&#x3D;’<a target="_blank" rel="noopener" href="https://o2klrn0xq.qnssl.com/hamster.swf'/]%E6%9C%AC%E6%96%87%E7%A4%BA%E4%BE%8Bswf%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD/[/dl/]">https://o2klrn0xq.qnssl.com/hamster.swf&#39;\]本文示例swf文件下载\[/dl\]</a></p>
<p>[v_error]Flash已死，请大家转向HTML5……[&#x2F;v_error]</p>
<p>本博客也将追寻乔帮主的步伐，开启去Flash化——其实本身也没啥Flash元素啊。</p>
<p>有的时候看到个比较好玩的Flash动画，想要挂到网站上，但是移动端却很难支持Flash。那就只有想办法将Flash转换成人见人爱花见花开的HTML5了。搜索良久，发现一些所谓的”转换工具”其实就是让你玩那个Flash，然后录制成视频，简直是滑天下之大稽<img src="/images/022816_0347_swiffyF1.png"></p>
<p>终于在Google找到了一个工具swiffy，也是老大爷Google开发的，可以用来转换Flash到HTML5.可喜可贺的是这个工具不仅仅提供了Adobe Flash CC的扩展，还提供了一个在线转换工具。悲伤的是这个在线转换工具只支持1M以下的swf文件。</p>
<p>当然了即使网页版够用，想要稳稳的在国内使用这个Flash也是略有难度的，那就让我来一步一步的说教吧！</p>
<p>事先打个小广告，哪位好心人<a target="_blank" rel="noopener" href="https://dmesg.app/it">帮我喂喂小仓鼠吧！</a></p>
<hr>
<p> </p>
<p>首先需要翻墙（如何翻墙，请参考<a target="_blank" rel="noopener" href="https://dmesg.app/all-platform-scientific-internet-all-in-one.html">《[2016-01-22]全平台科学上网[翻墙]工具集合》</a>）</p>
<p>打开<a target="_blank" rel="noopener" href="https://developers.google.com/swiffy/">Google开发者中心</a></p>
<p>简单粗暴的界面，点convert，上传本地的swf文件。文件限制1M以下，当然了，Adobe Flash扩展应该没啥限制。有兴趣可以自己去Adobe官网下载安装Flash试用版玩玩。友情提示，是扩展不是插件哦，需要Adobe Extension Manager，不是丢进某个目录就可以的。</p>
<p><img src="/images/022816_0347_swiffyF2.png"></p>
<p>这还用说么…简单的不得了。</p>
<p><img src="/images/022816_0347_swiffyF3.png"></p>
<p>Upload上传。</p>
<p>之后在view conversion上右键，选择<strong>链接另存为</strong>。</p>
<p><img src="/images/022816_0347_swiffyF4.png"></p>
<p>[v_blue]不知道为啥我的Chrome总是蹦不出来保存窗口，于是我换成了小狐狸Firefox。[&#x2F;v_blue] 可以看到有一些警告，也<strong>并不是</strong>所有swf都能完美的转换成h5的。</p>
<p>直接双击保存的html文件就能看到动画了</p>
<p><img src="/images/022816_0347_swiffyF5.png"></p>
<p>但是天真的你以为这就结束了吗？<strong>并没有</strong></p>
<p>假如你给没翻墙的人看的话，很大的可能就会一片空白。如果安装了Switchy Omega还会看到有一个资源没加载。</p>
<p><img src="/images/022816_0347_swiffyF6.png"></p>
<p>Chrome检查工具同样告诉我们这个文件超时了</p>
<p><img src="/images/022816_0347_swiffyF7.png"></p>
<p>gstatic是Google的……so拜祖国伟大的墙所赐呵呵呵 :smile:  :smile:</p>
<p><img src="/images/022816_0347_swiffyF8.png"></p>
<p>几乎是完全屏蔽。</p>
<p>没关系，我们手动的对这个HTML文件进行改造。</p>
<p>Chrome检查工具已经告诉我们了那个js没有加载成功，那就用任意文本编辑器打开这个HTML文件</p>
<p><img src="/images/022816_0347_swiffyF9.png"></p>
<p>把这个链接复制下来，然后粘贴到浏览器中，很自然的就打开了吧（前提是翻墙了）</p>
<p><a target="_blank" rel="noopener" href="https://dmesg.app/wp-content/uploads/2016/02/2016022804234694.png"><img src="/images/2016022804234694-1024x662.png" alt="2"></a></p>
<p> </p>
<p>还想啥啊，快把这个runtime.js另存为了吖。</p>
<p>然后找个支持外链的地方，比如自己的博客，七牛云，阿里百川，这里就拿<strong>七牛云</strong>做例子了。当然了如果是HTTPS的博客网站的话，为了避免Mix Content而JavaScript的Mix Content是一定会被浏览器拦截的，还是去七牛充个十块钱或者拿自己网站吧……</p>
<p>这里拿七牛做例子……</p>
<p>打开<a target="_blank" rel="noopener" href="http://www.qiniu.com/">http://www.qiniu.com/</a>，选择一个https默认域名的空间，上传刚刚的那个js文件，然后取得文件的外链，这里的例子是<a target="_blank" rel="noopener" href="https://o13hhk496.qnssl.com/runtime.js">https://o13hhk496.qnssl.com/runtime.js</a></p>
<p>[v_tips]如果你懒直接用这个也未尝不可，反正我流量也是用不完的用……（什么？免费用户就10G难道你充钱呢？不，<a target="_blank" rel="noopener" href="http://hd.qiniu.com/qingcong/pack">青葱创业计划</a>）[&#x2F;v_tips]</p>
<p>还用我说嘛…用这个外链替换html文件里的那个js。</p>
<p>嗯就是酱</p>
<p><img src="/images/022816_0347_swiffyF11.png"></p>
<p>打开隐身模式看下，游戏<strong>尚未结束</strong>……说不定这个js又加载了哪些js是吧……</p>
<p>真是人品好，秒开有木有！当然了，如果这个js又加载了其他被墙的js，那就得顺藤摸瓜用检查工具一个调试了……<a target="_blank" rel="noopener" href="https://dmesg.app/baidu-shares-support-https.html">百度分享</a>不就是这么解决的么</p>
<p><img src="/images/022816_0347_swiffyF12.png"></p>
<p>到这这个转换就算彻底做完了。</p>
<p>有博客的小伙伴可能会想把这个467KB的HTML文件的全部内容粘贴到博客侧边栏的文本框中，大概就是这样：</p>
<p><img src="/images/022816_0347_swiffyF13.png"></p>
<p>实际上我并<strong>不推荐</strong>这样做，保存下你就会发现一卡一卡的……而且拜伟大的墙所赐，这么大（467KB很大了，真的）的文件加载还是有点慢的……那怎么办呢？</p>
<p>好办，不是有七牛吗，继续把这个HTML文件存到七牛，取得外链，然后文本框这么写就可以了，src自行替换，宽度和高度自己看着摸索吧。</p>
<p>如图所示</p>
<p><img src="/images/022816_0347_swiffyF14.png"></p>
<p><embed> 标签是 HTML 5 中的新标签哦。</p>
<p>这才算结束……还不快跟我一起大吼，H5大法好！</p>
<p>当然了，一些嵌入了比较大HTML源码的页面（比如说<a target="_blank" rel="noopener" href="https://dmesg.app/hamster">这个</a>），我也直接用了embed…</p>
<p>PS，有些主题的404界面插了个Flash游戏，主题对应的404.php可能会对应如下代码</p>
<p>甭想了，替换成类似这样的</p>
<p>当然前面可能有必要来几个<br>（换行）</p>
<p>效果图，我还是很满足的。</p>
<p><a target="_blank" rel="noopener" href="https://dmesg.app/wp-content/uploads/2016/02/2016022804264364.jpg"><img src="/images/2016022804264364-1024x494.jpg" alt="QQ截图20160228122615"></a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2016/02/28/swiffy-flash2html5/index/" data-id="clhp7rtkj009as2qraw732rui" data-title="swiffy的本地化：在线Flash转HTML5" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-psg1208-noads/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2016/02/26/psg1208-noads/index/" class="article-date">
  <time class="dt-published" datetime="2016-02-26T00:00:00.000Z" itemprop="datePublished">2016-02-26</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/it/">it</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2016/02/26/psg1208-noads/index/">斐讯PSG1208刷第三方固件、去广告备忘</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>今天入了个路由器，斐讯PSG1208，免单的贼船哈哈哈，很爱玩的给刷成第三方的固件来玩玩。</p>
<p>由于本人在刷路由器上没啥经验可言，就直接看这两篇文章吧。</p>
<p><a target="_blank" rel="noopener" href="http://post.smzdm.com/p/415240/">http://post.smzdm.com/p/415240/</a></p>
<p><a target="_blank" rel="noopener" href="http://www.right.com.cn/forum/thread-161324-1-1.html">http://www.right.com.cn/forum/thread-161324-1-1.html</a></p>
<p>个人整理下留个备忘</p>
<p>建议用网线连接到路由器，因为刷写bootloader之后重启会关掉无线的。</p>
<h2 id="登陆路由器"><a href="#登陆路由器" class="headerlink" title="登陆路由器"></a>登陆路由器</h2><p>浏览器地址栏输入</p>
<p><a target="_blank" rel="noopener" href="http://192.168.2.1/goform/Diagnosis?pingAddr=192.168.2.100%7Cecho%22%22%7Ctelnetd">http://192.168.2.1/goform/Diagnosis?pingAddr=192.168.2.100|echo&quot;&quot;|telnetd</a></p>
<p>(pingAddr&#x3D;后面是本机ip,如果你的电脑ip不是192.168.2.100,请改成你电脑的ip)</p>
<p>成功后浏览器出现系统诊断界面。</p>
<p>最小化。</p>
<p>需要telent，Windows默认没安装需要手动安装下。</p>
<p>或者用putty之类的工具</p>
<p>telnet 192.168.2.1</p>
<p>输入路由器管理的账号密码</p>
<p>cd &#x2F;tmp<br>wget <a target="_blank" rel="noopener" href="http://breed.hackpascal.net/breed-mt7620-reset1.bin">http://breed.hackpascal.net/breed-mt7620-reset1.bin</a><br>mtd_write write breed-mt7620-reset1.bin Bootloader</p>
<p>提示Unlocking bootloader…</p>
<p>Writing from…..即成功。</p>
<p>输入reboot重启。同时按住机身后面复位键不放。等到前边LED闪烁4次，代表进入breed。</p>
<p>浏览器地址栏输入192.168.2.1，当然此时是没有无线的，用网线吧……</p>
<p><a target="_blank" rel="noopener" href="https://dmesg.app/wp-content/uploads/2016/02/2016022612273276.jpg"><img src="/images/2016022612273276.jpg" alt="0"></a></p>
<p>这吖的配置，其实拿树莓派做路由器也是可以的啊哈哈。 推荐备个份吧！</p>
<p>进入breed选择固件备份。之后勾上EEPROM，选择备份保存到本地即可。</p>
<p>返回主界面。选择固件升级，选中固件。该怎么做都知道了吧……</p>
<p>之后选择上传，确认信息之后刷入……还用说怎么做吗</p>
<p>pandora box和Padavan ASUS默认管理地址都是192.168.1.1，用户名密码均为admin，Wi-Fi密码1234567890。</p>
<p> </p>
<p>刷完顺便到系统管理-服务，开启SSH……对我就是密钥登录的那个，嫌弃密码登陆。</p>
<p>去广告设置</p>
<p><img src="/images/022616_1208_PSG12082.png"></p>
<p>开机之后等待几十秒Adbyby就会自动启动并加载规则。</p>
<p><img src="/images/022616_1208_PSG12083.png"></p>
<p> </p>
<p>吐槽一句，这DHCP简直是随机分配啊。</p>
<p><a target="_blank" rel="noopener" href="https://dmesg.app/wp-content/uploads/2016/02/2016022612261528.jpg"><img src="/images/2016022612261528.jpg" alt="QQ截图20160226201254"></a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2016/02/26/psg1208-noads/index/" data-id="clhp7rti3006rs2qrfyxg7ngz" data-title="斐讯PSG1208刷第三方固件、去广告备忘" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-return-enter-linwin/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2016/02/18/return-enter-linwin/index/" class="article-date">
  <time class="dt-published" datetime="2016-02-18T00:00:00.000Z" itemprop="datePublished">2016-02-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/linux/">linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2016/02/18/return-enter-linwin/index/">Win和Linux换行回车的问题：can&#39;t cd to home</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>最近在学shell，但是却发现一件很蹊跷的事情。</p>
<p>提示无法切换到&#x2F;home</p>
<p><img src="/images/021516_0517_WinLinux1.png"></p>
<p>源代码如下：</p>
<p><img src="/images/021516_0517_WinLinux2.png"></p>
<p>简直简单的不能再简单。</p>
<p>百思不得其解。后来查查资料，想起来了，Windows下的回车是\n\r，而Linux只有\n。一个直接后果是，Linux系统下的文件在Windows里打开的话，所有文字会变成一行；而Windows里的文件在Linux下打开的话，在每行的结尾可能会多出一个^M符号。再算上BOM的问题嘿嘿嘿…</p>
<p>解决办法呢，以后直接在Linux环境下工作、或者终端里使用nano、vi，或者转换。</p>
<p>有个软件叫 dos2unix可以删掉行尾的^M</p>
<p>先安装</p>
<p>sudo apt-get install dos2unix<br>dos2unix test.sh</p>
<p>用vi替换掉行尾的^M也可以</p>
<p>或者干脆在NotePad++里选择编辑-档案格式转换-转换为UNIX格式。</p>
<p><img src="/images/021516_0517_WinLinux3.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2016/02/18/return-enter-linwin/index/" data-id="clhp7rtij007ls2qr5o8b2wt8" data-title="Win和Linux换行回车的问题：can&#39;t cd to home" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-nethogs-bug-v0-8-0/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2016/02/17/nethogs-bug-v0-8-0/index/" class="article-date">
  <time class="dt-published" datetime="2016-02-17T00:00:00.000Z" itemprop="datePublished">2016-02-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/linux/">linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2016/02/17/nethogs-bug-v0-8-0/index/">nethogs - creating socket failed are you root?</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>话说前几天更新了服务器之后，再用nethogs就会出现这种问题</p>
<p>Creating socket failed while establishing local IP - are you root?</p>
<p><img src="/images/021516_0516_nethogscrea1.png"></p>
<p>分明是root权限的好嘛！</p>
<p>其实这是nethogs version 0.8.0的一个bug，只要更新到0.8.1即可。可是Ubuntu软件源里并没有更新到0.8.1，那么只好拿来传统大法，手动下载源码包编译安装了。</p>
<p>首先要确保安装了gcc、make这类工具。如果没有就先安装下。</p>
<p>sudo apt-get install build-essential<br>sudo apt-get install libncurses5-dev libpcap-dev<br>wget -c <a target="_blank" rel="noopener" href="https://github.com/raboof/nethogs/archive/v0.8.1.tar.gz">https://github.com/raboof/nethogs/archive/v0.8.1.tar.gz</a><br>tar xf v0.8.1.tar.gz<br>cd .&#x2F;nethogs-0.8.1&#x2F;<br>make &amp;&amp; sudo make install</p>
<p>之后退出或者重启当前终端</p>
<p>sudo nethogs</p>
<p>即可发现变成了0.8.1.</p>
<p><img src="/images/021516_0516_nethogscrea2.png"></p>
<p>问题完美解决。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2016/02/17/nethogs-bug-v0-8-0/index/" data-id="clhp7rtho005fs2qrgxwl955k" data-title="nethogs - creating socket failed are you root?" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-ssh-welcome-funny-command/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2016/02/16/ssh-welcome-funny-command/index/" class="article-date">
  <time class="dt-published" datetime="2016-02-16T00:00:00.000Z" itemprop="datePublished">2016-02-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/linux/">linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2016/02/16/ssh-welcome-funny-command/index/">草泥马SSH登录信息、几个好玩的Linux命令</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="分享个好玩的Ubuntu-Server-SSH登录欢迎信息"><a href="#分享个好玩的Ubuntu-Server-SSH登录欢迎信息" class="headerlink" title="分享个好玩的Ubuntu Server SSH登录欢迎信息"></a>分享个好玩的Ubuntu Server SSH登录欢迎信息</h1><p>还有几个好玩的Linux软件</p>
<p>先萌妹镇着！</p>
<p><img src="/images/021516_0518_SSH1.jpg"></p>
<p>Ubuntu登录欢迎信息保存在&#x2F;etc&#x2F;update-motd.d下</p>
<p>其中的文件可以自己修改。我就修改帮助信息10-help-text啦！</p>
<p>按道理说，直接在那个文件里echo “欢迎信息”就可以了，但是不知道为啥总报错。所以之后创建一个文件，然后在那里执行下啦。</p>
<p>由于Windows和Linux对于回车、换行的处理不同，所以我直接把我的欢迎信息放出来下载吧！</p>
<p>cd &#x2F;etc&#x2F;update-motd.d<br>wget <a target="_blank" rel="noopener" href="http://7xljcn.com1.z0.glb.clouddn.com/cnm.sh">http://7xljcn.com1.z0.glb.clouddn.com/cnm.sh</a><br>nano 10-help-text</p>
<p>注释掉全部内容，添加如下内容</p>
<p>sh &#x2F;etc&#x2F;update-motd.d&#x2F;cnm.sh</p>
<p>看效果图！</p>
<p><img src="/images/021516_0518_SSH2.png"></p>
<p>另外，有个工具叫jp2a，可以把图片转成ASCII字符画。</p>
<p>sudo apt-get install jp2a<br>jp2a test.jpg</p>
<p>好好的一个萌妹变成什么样子了。其实这里用Photoshop处理下，去掉复杂的背景，改成铅笔画这类的，出来的字符画效果会更好。</p>
<p><img src="/images/021516_0518_SSH3.png"></p>
<p>顺便写个脚本， 可以把jp2a的输出结果制作成可以执行的脚本文件。 如果想看到彩色的字符画，就加上–colors 再把这个文件在10-help-text添加执行就可以了</p>
<p>#&#x2F;bin&#x2F;sh<br>echo ‘echo “ ‘ &gt; welcome.sh<br>jp2a test.jpg &gt;&gt; welcome.sh<br>echo ‘“‘ &gt;&gt; welcome.sh</p>
<p>注意，当前SSH窗口多大，jp2a就会生成多大的字符画；默认图片文件名是test.jpg，生成的欢迎脚本叫做welcome.sh</p>
<p>不需要图形化界面的</p>
<h1 id="几个好玩的软件"><a href="#几个好玩的软件" class="headerlink" title="几个好玩的软件"></a>几个好玩的软件</h1><h2 id="toilet-字符画"><a href="#toilet-字符画" class="headerlink" title="toilet 字符画"></a>toilet 字符画</h2><p>sudo apt-get install toilet</p>
<p><img src="/images/021616_0218_1.png"></p>
<h2 id="cowsay-牛说"><a href="#cowsay-牛说" class="headerlink" title="cowsay 牛说"></a>cowsay 牛说</h2><p>sudo apt-get install cowsay</p>
<p><img src="/images/021616_0218_2.png"></p>
<h2 id="lolcat-彩色的cat"><a href="#lolcat-彩色的cat" class="headerlink" title="lolcat 彩色的cat"></a>lolcat 彩色的cat</h2><p>可以和fortune、screenfetch等搭配使用</p>
<p>sudo apt-get install lolcat</p>
<p><img src="/images/021616_0218_3.png"></p>
<h2 id="fortune随机显示名言什么的。"><a href="#fortune随机显示名言什么的。" class="headerlink" title="fortune随机显示名言什么的。"></a>fortune随机显示名言什么的。</h2><p>sudo apt-get install fortune</p>
<p>fortune-zh可以显示中文</p>
<p><img src="/images/021616_0218_4.png"></p>
<p> </p>
<h2 id="linuxlogo显示系统信息"><a href="#linuxlogo显示系统信息" class="headerlink" title="linuxlogo显示系统信息"></a>linuxlogo显示系统信息</h2><p>可以配合lolcat</p>
<p>sudo apt-get install screenfetch linuxlogo<br>linuxlogo|lolcat</p>
<p><img src="/images/021616_0218_5.png"></p>
<h2 id="the-fuck"><a href="#the-fuck" class="headerlink" title="the fuck"></a>the fuck</h2><p>这家伙挺好玩的！</p>
<p>先放上GitHub页<a target="_blank" rel="noopener" href="https://github.com/nvbn/thefuck">https://github.com/nvbn/thefuck</a></p>
<p>GitHub上已经写了很明确的安装方法了，这里搬运一下：</p>
<h3 id="方法一。一键安装脚本（Ubuntu-amp-Mac）"><a href="#方法一。一键安装脚本（Ubuntu-amp-Mac）" class="headerlink" title="方法一。一键安装脚本（Ubuntu &amp; Mac）"></a>方法一。一键安装脚本（Ubuntu &amp; Mac）</h3><p>wget -O - <a target="_blank" rel="noopener" href="https://raw.githubusercontent.com/nvbn/thefuck/master/install.sh">https://raw.githubusercontent.com/nvbn/thefuck/master/install.sh</a> | sh - &amp;&amp; $0</p>
<h3 id="方法二。包管理器安装（Ubuntu-amp-Debian）"><a href="#方法二。包管理器安装（Ubuntu-amp-Debian）" class="headerlink" title="方法二。包管理器安装（Ubuntu &amp; Debian）"></a>方法二。包管理器安装（Ubuntu &amp; Debian）</h3><p>sudo apt-get install python-pip python-dev<br>sudo pip install psutil thefuck</p>
<p>安装后的配置（一键安装脚本无需配置）</p>
<p>nano ~&#x2F;.bashrc</p>
<p>最后一行添加</p>
<p>eval $(thefuck –alias)</p>
<p><a target="_blank" rel="noopener" href="https://dmesg.app/wp-content/uploads/2016/02/2016021602324086.jpg"><img src="/images/2016021602324086.jpg" alt="QQ截图20160216102753"></a></p>
<p>自动纠错了哈哈哈~</p>
<h2 id="还有个，放到终端里试试哈。"><a href="#还有个，放到终端里试试哈。" class="headerlink" title="还有个，放到终端里试试哈。"></a>还有个，放到终端里试试哈。</h2><p>echo ‘</p>
<p>..XXX. .XXX..</p>
<p>.XXXXY.TXXXX.</p>
<p>XXXXXYXTXXXXX</p>
<p>.VXXVYXTVXXX.</p>
<p>`.TYXTXYXTV .</p>
<p>` ,YVTXYYV .,</p>
<p>`…XXXXX`..,</p>
<p>.`…XXX…,.</p>
<p>..`   V   ,.’ | tr ‘.\`, VYTX’ ‘ ()__() ‘</p>
<h2 id="需要x-org的"><a href="#需要x-org的" class="headerlink" title="需要x.org的"></a>需要x.org的</h2><p>oneko</p>
<p>一只跟着光标走的小猫</p>
<p>xeyes一双盯着光标的眼睛</p>
<p>xcowsay 图形化的cowsay</p>
<p>sudo apt-get install oneko等等即可。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2016/02/16/ssh-welcome-funny-command/index/" data-id="clhp7rtkd0092s2qr035ve222" data-title="草泥马SSH登录信息、几个好玩的Linux命令" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-cron-mysql-autorestart/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2016/02/15/cron-mysql-autorestart/index/" class="article-date">
  <time class="dt-published" datetime="2016-02-15T00:00:00.000Z" itemprop="datePublished">2016-02-15</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/linux/">linux</a>►<a class="article-category-link" href="/categories/linux/website/">website</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2016/02/15/cron-mysql-autorestart/index/">利用cron监测mysql状态并自动重启</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>话说以前（→_→至少有两个多月了）有一段时间，服务器负载过大导致MySQL服务被kill，作为一个具有灵性的码农，怎么能每天刷自己的博客手动重启呢？</p>
<p><img src="/images/021516_0235_cronmysql1.png"></p>
<p>恰巧近几天学习了点shell编程，在配合到cron，简要的写一个监测MySQL运行状态，如果挂了就自动开启的脚本！</p>
<p>下面上代码：</p>
<p>#!&#x2F;bin&#x2F;sh<br>pidof mysqld &gt;&#x2F;dev&#x2F;null<br>if [ $? -eq 0 ]<br>then<br>echo “It is running.”<br>else<br>echo “At `date` MySQL Server was stopped”&gt;&gt; &#x2F;home&#x2F;mysql_log<br>service mysql start<br>fi</p>
<p>下面是对代码的解释：</p>
<p>pidof mysqld可以得出mysql的PID，如果mysql进程（mysqld）不存在，就不会有结果。</p>
<p>&gt;重定向到黑洞里</p>
<p>$?的意思是上一个命令的退出值，通常来说0代表成功，1代表通用未知错误。所以在这里，假如mysqld不存在，那么$?就会是1</p>
<p>-eq是等于，shell执行$?是否等于0的判断，等于就是在运行，不等于就是没运行。</p>
<p>用echo和反引号并重定向到文件写日志，&gt;代表覆写，&gt;&gt;代表追加。后面日志路径大家伙看着改</p>
<p>将这段代码保存为restart_mysql.sh放到某个目录，俺就给放到&#x2F;home啦 :lol:  :lol: </p>
<p>，然后终端crontab –e，最后一行添加如下内容</p>
<p>意思是每隔两分钟运行一遍脚本。</p>
<p>*&#x2F;2 * * * * sh &#x2F;home&#x2F;restart_mysql.sh</p>
<p>俺这人比较懒，就没给脚本加上可执行权限，所以直接以”传参”的形式给sh了。</p>
<p>重启cron服务</p>
<p>service cron restart</p>
<p>亲测好用</p>
<p><img src="/images/021516_0235_cronmysql3.png"></p>
<p>如果你真的是懒得不能再懒了，那么就执行下面这句吧…root权限哦。当然了我其实是不太推荐的啦。</p>
<p>wget <a target="_blank" rel="noopener" href="http://7xljcn.com1.z0.glb.clouddn.com/restart/_mysql/_installation.sh">http://7xljcn.com1.z0.glb.clouddn.com/restart\_mysql\_installation.sh</a> &amp;&amp; sh .&#x2F;restart_mysql_installation.sh</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2016/02/15/cron-mysql-autorestart/index/" data-id="clhp7rtf4001es2qr062pd3li" data-title="利用cron监测mysql状态并自动重启" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-rm-dd-chmod-sudoers-root/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2016/02/10/rm-dd-chmod-sudoers-root/index/" class="article-date">
  <time class="dt-published" datetime="2016-02-10T00:00:00.000Z" itemprop="datePublished">2016-02-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/linux/">linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2016/02/10/rm-dd-chmod-sudoers-root/index/">rm –rf /, dd, chmod, sudoers和root权限的一些小事</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>预先警告一下，这些命令都是<strong>十分危险</strong>的，请不要在自己的电脑上尝试！</p>
<p>话说几个星期前，圈里爆出来这么一个事：一名Arch用户尝试使用rm –rf &#x2F;删除已有的arch然后重装，结果这条命令却成功的毁了他的固件。rm删掉了&#x2F;sys&#x2F;firmware&#x2F;efivars的内容……</p>
<p>更详细的讨论可以看这里：</p>
<p><a target="_blank" rel="noopener" href="https://www.reddit.com/r/linux/comments/43ls7j/no_post_after_rm_rf_systemd_uefi/">https://www.reddit.com/r/linux/comments/43ls7j/no_post_after_rm_rf_systemd_uefi&#x2F;</a></p>
<hr>
<p>传说中Linux是怎么自杀的，就是用的rm –rf &#x2F;，递归强制删除根目录下所有文件和目录。当然要root权限才能干这个事，Ubuntu还要加–no-preserve-root参数。</p>
<p>sudo rm -rf –no-preserve-root &#x2F;</p>
<p><img src="/images/021016_0304_rmrfdds1.png"></p>
<p>可以看到左侧的dock没了，语言支持没了，ls、rm等在命令没了（因为&#x2F;usr&#x2F;bin,&#x2F;sbin都被删掉了）。唯一还在的是bash内建命令……关了此终端之后，就彻底game over了。</p>
<hr>
<p>除此之外还有dd，dd是一个很强大的命令，裸读写，把指定的输入文件拷贝到指定的输出文件中，而且可以无视文件系统。if（此处不是如果，而是infile）指定来源，of指定目的，常常用它来备份文件或者制作镜像。但是这个命令如果滥用下…</p>
<p>dd if&#x3D;&#x2F;dev&#x2F;zero of&#x3D;&#x2F;dev&#x2F;sda</p>
<p>[v_blue]&#x2F;dev&#x2F;zero是啥？ &#x2F;dev&#x2F;zero是Linux的一个”伪文件”，它会提供连续不断的null，要多少有多少。比如说初始化文件的时候。 类似的有个&#x2F;dev&#x2F;null，这家伙外号”无底洞”、”黑洞”，什么东西放进去都没了，而且永远不会吃撑，比如说某些命令的输出结果就可以给它吃掉[&#x2F;v_blue]</p>
<p>这句话的意思是，读取0放到sda里……直接抹掉硬盘的内容。</p>
<p>而且更可怕的是，假想这种情况：某人双硬盘（sda，sdb），想把某个iso写到U盘上（sdc），结果一不小心就写成了of&#x3D;sdb，恰巧sda是Linux的&#x2F;所在磁盘，于是乎……和数据说拜拜，这里连root权限都没用上。</p>
<p>dd前要三思啊！要把of看三遍啊！使劲用df看磁盘信息啊！</p>
<hr>
<p>还有一个神级蛋疼的命令，chmod，用于改变文件的权限。和rm类似以下，sudo chmod –R 777 &#x2F;，此命令会将递归的将&#x2F;下所有文件的权限都设置成777（设置成000会更酸爽）。乍一看好像没什么，文件都还在。但是，Linux是一个权限管理比较严格的系统，有些文件是需要正确权限才可以运行的，像ssh，sudo等。</p>
<p>[v_blue]那三个数字是什么意思？ 4读 2写 1执行，第一个数字表示属主（文件的所有者，文件的主人，谁创建的），第二个数字表示同组用户，第三个数字表示其他用户。当然，这里的”其他用户”不包括root，因为root拥有一切权限。775的意思就是，属主可以读写执行（4+2+1&#x3D;7），同组可以读写执行，其他用户只可以读和执行。[&#x2F;v_blue]</p>
<p><img src="/images/021016_0304_rmrfdds2.png"></p>
<p>这是chmod –R 000&#x2F;的后果，<strong>失去了对一切文件的访问权限</strong>，当前的终端都没了，壁纸都没了！要远比777可怕的多。此时唯一的解救方法就是用liveCD重新改权限了。</p>
<p>再次警告下，这些命令<strong>十分危险</strong>，如要尝试请在和宿主机<strong>完全隔离</strong>的虚拟机上进行。完全隔离的意思就是，别装VMTools那类工具！</p>
<p>可是问题来了，这些命令这么危险，为什么还要存在呢？</p>
<p>其实这只是一种滥用，或者说是一时疏忽大意造成的灾难性后果。</p>
<p>rm –rf &#x2F;*（因为带了r参数，所以此时&#x2F;*和&#x2F;含义并无区别）更多情况下是对rm –rf .&#x2F;*的误打。注意后一个命令在&#x2F;之前 有个.，Linux中.&#x2F;表示当前目录，所以这句话的意思的删除当前目录下的所有文件和文件夹。很常见的一个操作了。</p>
<p>chmod也是一样，chmod –R 777 .&#x2F;*改变当前目录下所有文件目录的权限为777。</p>
<hr>
<p>可是这些事情本不该发生的，哪怕少打了一个.也不至于如此（更何况Ubuntu在rm –rf &#x2F;时还要加上–no-preserve-root）。为什么我们却看到了如此多的惨案呢？那是因为他们使用了root权限！</p>
<p>root权限就是上帝，无所不能。这也是很多书籍都<strong>强烈建议</strong>使用普通权限的用户，需要root时用sudo<strong>暂时提权</strong>到root的原因。</p>
<p>提到sudo，也就要提到sudoers了。比如说你新添加了一个用户给别人用，但是他也需要使用到root权限，可是常使用root权限太危险了，那我就给他sudo吧！</p>
<p>创建用户benny，设置密码</p>
<p>sudo useradd benny<br>sudo passwd benny</p>
<p>输入benny用户的密码。</p>
<p><img src="/images/021016_0304_rmrfdds3.png"></p>
<p>然后切换到benny，ls下&#x2F;root</p>
<p>su benny<br>sudo ls &#x2F;root</p>
<p>（root用户的家目录&#x2F;root只有root才可以访问，我们可以在此测试下是否提权到root了）</p>
<p><img src="/images/021016_0304_rmrfdds4.png"></p>
<p>天啊，好害怕，竟然还打小报告！</p>
<p>这是为什么，因为你新建的用户名没在sudoers里，&#x2F;etc&#x2F;sudoers定义了用户的权限，当然包括是否可以提权了。sudoers为440权限，属主可以读，同组可以读，其他人无权限。这也就是说，只有root才可以编辑。编辑就是写，权限2）此文件。</p>
<p>好学的小伙伴可能会上网搜索sudoers，其中很多文章建议先chmod成777权限，编辑，然后在改回440权限。但是我强烈建议<strong>不要这么做</strong>！为什么！一是因为对新手来说，很容易没办法改回权限；二是因为脱裤子放屁。</p>
<p>sudo只有在440权限的时候才可以使用，如果你现在是普通用户，看到那篇文章可能修改sudoers权限为777，于是你的命令是</p>
<p>sudo chmod 777 &#x2F;etc&#x2F;sudoers</p>
<p>777权限你的用户就可以编辑了，编辑完，当你再想改回权限时</p>
<p>sudo chmod 440 &#x2F;etc&#x2F;sudoers</p>
<p>会发现这么提示：</p>
<p><img src="/images/021016_0304_rmrfdds5.png"></p>
<p>任何sudo都会这么提示！</p>
<p>你再也没办法使用sudo了！如果你使用的是Ubuntu等系统，那就更悲剧了，因为Ubuntu默认的root用户默认是被禁用的。。这也就意味着当你输入su试图切换到root时永远也无法输入正确的密码。这也就是在说你需要liveCD才能当上帝了。</p>
<p>正确的办法是_sudo –s永久切换到root_，然后再改权限……</p>
<p>可是问题来了，既然都是root了，还改权限干嘛啊！直接nano得了呗！脱裤子放屁干嘛啊！</p>
<p>可可是，用文本编辑器修改sudoers是<strong>不科学的</strong>，假如你写错了，编辑器又不会提示你任何错误。</p>
<p>但是当你sudo的时候……</p>
<p><img src="/images/021016_0304_rmrfdds6.png"></p>
<p>一样的悲剧。</p>
<p>如果你看了sudoers文件，注意到最上面的注释，会看到这么一句：</p>
<p><img src="/images/021016_0304_rmrfdds7.png"></p>
<p>此文件必须使用”visudo”命令以root身份编辑。</p>
<p>用visudo的<strong>万无一失</strong>的，假如你不小心弄出了语法错误（此处的“万无一失”是指的不作死）：</p>
<p><img src="/images/021016_0304_rmrfdds8.png"></p>
<p>visudo提示有语法错误，并且依旧有重新编辑的机会！还有后悔药！</p>
<p>如果没有语法错误，visudo会正常退出。</p>
<p>当然请不要作死给Allow members of group sudo to excute any command注释了……</p>
<p>因为visudo只会检查语法错误。</p>
<hr>
<p> </p>
<p>说了这么多废话，正确创建一个用户benny、给它提权到root的方法如下：</p>
<p>创建用户</p>
<p>sudo useradd benny<br>sudo passwd benny</p>
<p>两次确认给benny设置密码</p>
<p>执行visudo</p>
<p>sudo visudo</p>
<p>在Allow members of group sudo to excute any command下仿造上面一行添加：</p>
<p>benny ALL&#x3D;(ALL:ALL) ALL</p>
<p>ctrl + x退出保存。</p>
<p><img src="/images/021016_0304_rmrfdds9.png"></p>
<p>其实仿造admin那个写也可以，我暂时还没搞懂少一个:ALL有何影响。</p>
<p>切换到新创建的benny用户</p>
<p>su benny</p>
<p>测试权限</p>
<p>sudo ls &#x2F;root</p>
<p><img src="/images/021016_0304_rmrfdds10.png"></p>
<p>没有提示Permission denied.</p>
<p>如果没有权限，应该是这样提示的：</p>
<p><img src="/images/021016_0304_rmrfdds11.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2016/02/10/rm-dd-chmod-sudoers-root/index/" data-id="clhp7rtil007rs2qrfmrdfp63" data-title="rm –rf /, dd, chmod, sudoers和root权限的一些小事" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/18/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><a class="page-number" href="/page/18/">18</a><span class="page-number current">19</span><a class="page-number" href="/page/20/">20</a><a class="page-number" href="/page/21/">21</a><span class="space">&hellip;</span><a class="page-number" href="/page/23/">23</a><a class="extend next" rel="next" href="/page/20/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/china/">china</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/china/justsay/">justsay</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/cloudflare/">cloudflare</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/gfw/">gfw</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/it/">it</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/it/justsay/">justsay</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/it/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/it/security/">security</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/it/share/">share</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/justsay/">justsay</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/justsay/gfw/">gfw</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/justsay/program/">program</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/linux/security/">security</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/website/">website</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/program/">program</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/program/share/">share</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/security/">security</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/security/justsay/">justsay</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/security/program/">program</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/share/">share</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/website/">website</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/website/program/">program</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/what/">what</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/what/gfw/">gfw</a></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/" rel="tag">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ubuntu/" rel="tag">ubuntu</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/linux/" style="font-size: 10px;">linux</a> <a href="/tags/ubuntu/" style="font-size: 10px;">ubuntu</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/07/">July 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/04/">April 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/03/">March 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/02/">February 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/12/">December 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/11/">November 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">April 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">March 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">February 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">January 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">September 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">August 2015</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/07/27/hide-in-cf/index/">隐藏于 Cloudflare 的全球网络之中</a>
          </li>
        
          <li>
            <a href="/2024/07/17/azure-waf/index/">救命！我的 Azure Front Door WAF 规则不生效怎么办！</a>
          </li>
        
          <li>
            <a href="/2024/07/16/azure-fd/index/">使用Azure Front Door 和 Load Balancer</a>
          </li>
        
          <li>
            <a href="/2024/04/30/usdt-trc20-scam/index/">警惕USDT-TRC20 数字货币诈骗</a>
          </li>
        
          <li>
            <a href="/2024/04/21/telegram-login-widget-verify-data/index/">Telegram Login Widget 如何验证用户数据</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 Benny小土豆<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>