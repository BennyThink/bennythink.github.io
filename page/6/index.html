<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>åœŸè±†ä¸å¥½åƒ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="åœŸè±†ä¸å¥½åƒ">
<meta property="og:url" content="http://example.com/page/6/index.html">
<meta property="og:site_name" content="åœŸè±†ä¸å¥½åƒ">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Bennyå°åœŸè±†">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="åœŸè±†ä¸å¥½åƒ" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">åœŸè±†ä¸å¥½åƒ</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-riseup-alias-email/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/07/29/riseup-alias-email/index/" class="article-date">
  <time class="dt-published" datetime="2021-07-29T00:00:00.000Z" itemprop="datePublished">2021-07-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/website/">website</a>â–º<a class="article-category-link" href="/categories/website/program/">program</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/07/29/riseup-alias-email/index/">riseupå¦‚ä½•ä½¿ç”¨è‡ªå·±åŸŸåé‚®ç®±å‘é‚®ä»¶</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>å…ˆè¯´è¯´ä¸€äº›æ”¶é‚®ä»¶çš„æ–¹æ³•å§</p>
<h2 id="æ”¶é‚®ä»¶-â€“-Email-Forwarding"><a href="#æ”¶é‚®ä»¶-â€“-Email-Forwarding" class="headerlink" title="æ”¶é‚®ä»¶ â€“ Email Forwarding"></a>æ”¶é‚®ä»¶ â€“ Email Forwarding</h2><p>æ”¶é‚®ä»¶çš„è¯ï¼Œæœ€ç®€å•çš„åŠæ³•å°±æ˜¯å»æ³¨å†Œå•†å“ªé‡Œè®¾ç½®ä¸€ä¸ªEmail Forwardingï¼Œæ¯”å¦‚namesiloä¸­å¯ä»¥è¿™æ ·è®¾ç½®ï¼š</p>
<p><img src="/images/2021072919313862.png"></p>
<p>ç­‰å‡ åˆ†é’Ÿç”Ÿæ•ˆï¼Œå‘ç»™ <a href="mailto:benny@dmesg.app">benny@dmesg.app</a> çš„é‚®ä»¶å°±ä¼šè¢«è½¬å‘ç»™æˆ‘çš„Gmailå•¦ã€‚</p>
<h2 id="æ”¶é‚®ä»¶-â€“-è‡ªå»º"><a href="#æ”¶é‚®ä»¶-â€“-è‡ªå»º" class="headerlink" title="æ”¶é‚®ä»¶ â€“ è‡ªå»º"></a>æ”¶é‚®ä»¶ â€“ è‡ªå»º</h2><p>ä¹Ÿå¯ä»¥é€‰æ‹©è‡ªå»ºï¼Œæ¯”å¦‚è¯´ç”¨iRedMailã€‚é…ç½®èµ·æ¥æ˜¯æŒºéº»çƒ¦çš„ï¼Œä½†æ˜¯ä¼šè®©äººå¾ˆæœ‰æˆå°±æ„Ÿã€‚åŒæ—¶ä¹Ÿå¯ä»¥å‘é‚®ä»¶äº†ã€‚ç¼ºç‚¹å°±æ˜¯æœ‰å¾ˆå¤šæ—¶å€™ä¼šè¢«å½“æˆSPAMï¼Œéœ€è¦è¿›ä¸€æ­¥è®¾ç½®DKIMå‘€ä»€ä¹ˆçš„ã€‚</p>
<h2 id="æ”¶é‚®ä»¶-â€“-ä¼ä¸šé‚®ç®±"><a href="#æ”¶é‚®ä»¶-â€“-ä¼ä¸šé‚®ç®±" class="headerlink" title="æ”¶é‚®ä»¶ â€“ ä¼ä¸šé‚®ç®±"></a>æ”¶é‚®ä»¶ â€“ ä¼ä¸šé‚®ç®±</h2><p>æ¯”å¦‚ç”¨Gsuiteå•¦ï¼Œè…¾è®¯ä¼ä¸šé‚®ç®±å•¦ï¼Œéƒ½å¾ˆå®¹æ˜“ï¼Œæ”¹ä¸ªMXå°±è¡Œã€‚</p>
<h2 id="å‘é‚®ä»¶"><a href="#å‘é‚®ä»¶" class="headerlink" title="å‘é‚®ä»¶"></a>å‘é‚®ä»¶</h2><p>å‘é‚®ä»¶ç›¸æ¯”ä¹‹ä¸‹å°±è¦éº»çƒ¦ç‚¹äº†ï¼Œå¯é€‰çš„æ–¹æ¡ˆæœ‰è‡ªå»ºã€ä¼ä¸šé‚®ç®±ã€‚è¿˜æœ‰å°±æ˜¯å¯ä»¥è®©riseupå¸®å¿™å‘ï¼å½“ç„¶å•¦ï¼Œç”¨Gmailä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p>
<p>ç”¨riseupå‘é‚®ä»¶çš„è¯ï¼Œéœ€è¦å…ˆè®©ä½ çš„é‚®ç®±èƒ½å¤Ÿæ”¶åˆ°é‚®ä»¶ï¼Œæ— è®ºä½ æ˜¯é€šè¿‡Email Forwardingè¿˜æ˜¯ä¼ä¸šé‚®ç®±ï¼Œæ€»ä¹‹è¦èƒ½æ”¶åˆ°é‚®ä»¶ã€‚</p>
<p>ç„¶åè®¾ç½®aliasï¼Œåœ¨è¿™ä¸ªé¡µé¢ä¸­ <a target="_blank" rel="noopener" href="https://account.riseup.net/mail/aliases">https://account.riseup.net/mail/aliases</a></p>
<p><img src="/images/2021072919314134.png"></p>
<p>ç¡®è®¤é‚®ç®±å¹¶ä¸”å·²ç»ç”Ÿæ•ˆä¹‹åï¼Œä¹‹åå»é‚®ç®±çš„identitiesé‡Œæ·»åŠ ä¸€ä¸‹è¿™ä¸ªé‚®ç®±</p>
<p><img src="/images/2021072919314274.png"></p>
<p>ç„¶ååœ¨riseupçš„webé¡µé¢å°±å¯ä»¥ç”¨è¿™ä¸ªé‚®ç®±å‘é‚®ä»¶å•¦</p>
<p><img src="/images/2021072919314467.png"></p>
<p>æƒ³è¦ç”¨ä»£ç æ¥è§£å†³çš„è¯ï¼Œä¹Ÿå¾ˆç®€å•ï¼ŒPythonçš„è¯ç›´æ¥ç”¨è‡ªå¸¦çš„smtplibå°±å¯ä»¥äº†</p>
<p><code>from_addr</code>å°±æ˜¯åŠ çš„é‚£ä¸ªaliasï¼Œåˆ«æƒ³ç€åŠ ä¸€ä¸ª <a href="mailto:&#x74;&#101;&#110;&#x63;&#101;&#x6e;&#116;&#x40;&#113;&#x71;&#x2e;&#x63;&#x6f;&#109;">&#x74;&#101;&#110;&#x63;&#101;&#x6e;&#116;&#x40;&#113;&#x71;&#x2e;&#x63;&#x6f;&#109;</a>ï¼Œä¸è¡Œçš„ï¼ˆè¿™ç§æƒ…å†µå€’æ˜¯å¯ä»¥ç”¨mailhogè‡ªå¨±è‡ªä¹ï¼‰ã€‚</p>
<p>def _format_addr(s):<br>    name, addr &#x3D; parseaddr(s)<br>    return formataddr((Header(name, â€˜utf-8â€™).encode(), addr))</p>
<p>def send_mail(to: str, subject: str, body: str):<br>    user &#x3D; os.getenv(â€œemail_userâ€)<br>    password &#x3D; os.getenv(â€œemail_passwordâ€)<br>    host &#x3D; os.getenv(â€œemail_hostâ€) or â€œlocalhostâ€<br>    port &#x3D; os.getenv(â€œemail_portâ€) or â€œ1025â€  # mailhog<br>    from_addr &#x3D; os.getenv(â€œfrom_addrâ€) or â€œ<a href="mailto:&#121;&#x79;&#101;&#116;&#x73;&#x40;&#100;&#x6d;&#101;&#115;&#103;&#46;&#97;&#x70;&#x70;">&#121;&#x79;&#101;&#116;&#x73;&#x40;&#100;&#x6d;&#101;&#115;&#103;&#46;&#97;&#x70;&#x70;</a>â€œ</p>
<pre><code>msg = MIMEText(body, &#39;html&#39;, &#39;utf-8&#39;)
msg\[&#39;From&#39;\] = \_format\_addr(&#39;YYeTs &lt;%s&gt;&#39; % from\_addr)
msg\[&#39;To&#39;\] = \_format\_addr(to)
msg\[&#39;Subject&#39;\] = Header(subject, &#39;utf-8&#39;).encode()

if port == &quot;1025&quot;:
    server = smtplib.SMTP(host, port)
else:
    server = smtplib.SMTP\_SSL(host, port)
server.login(user, password)
server.sendmail(from\_addr, \[to\], msg.as\_string())
server.quit()
</code></pre>
<p>if __name__ &#x3D;&#x3D; â€˜__main__â€˜:<br>    send_mail(â€œ<a href="mailto:&#98;&#101;&#x6e;&#110;&#x79;&#46;&#116;&#x68;&#105;&#x6e;&#107;&#x40;&#x67;&#x6d;&#x61;&#105;&#x6c;&#x2e;&#x63;&#x6f;&#x6d;">&#98;&#101;&#x6e;&#110;&#x79;&#46;&#116;&#x68;&#105;&#x6e;&#107;&#x40;&#x67;&#x6d;&#x61;&#105;&#x6c;&#x2e;&#x63;&#x6f;&#x6d;</a>â€œ, â€œsubjâ€, â€˜aaaa<br>bbbâ€™)</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/07/29/riseup-alias-email/index/" data-id="clhp7rtik007ps2qrfb710m85" data-title="riseupå¦‚ä½•ä½¿ç”¨è‡ªå·±åŸŸåé‚®ç®±å‘é‚®ä»¶" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-github-actions-docker-image/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/07/04/github-actions-docker-image/index/" class="article-date">
  <time class="dt-published" datetime="2021-07-04T00:00:00.000Z" itemprop="datePublished">2021-07-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/program/">program</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/07/04/github-actions-docker-image/index/">ä½¿ç”¨GitHub Actionsæ„å»ºMulti-arch Docker image</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>[v_notice]å‚è€ƒé…ç½®ï¼Œç›´æ¥æŠŠè¿™ä¸ªæ–‡ä»¶ä¸¢åˆ°ä½ çš„repositoryä¸‹ï¼Œå°±å¯ä»¥ç”¨å•¦</p>
<p><a target="_blank" rel="noopener" href="https://github.com/BennyThink/ActionTest/blob/master/.github/workflows/builder.yaml">https://github.com/BennyThink/ActionTest/blob/master/.github/workflows/builder.yaml</a> [&#x2F;v_notice] è¿™ä¸ªä¸–ç•Œå¯¹armæ˜¯å¦‚æ­¤çš„ä¸å‹å¥½ï¼š</p>
<blockquote>
<p>standard_init_linux.go:178: exec user process caused â€œexec format errorâ€</p>
</blockquote>
<p>å¤§éƒ¨åˆ†docker imageéƒ½æ˜¯ä¸ºäº†amd64æ„å»ºçš„ï¼Œé‚£ä¹ˆè¿™äº›imageæ— æ³•åœ¨arm64ä¸Šè¿è¡Œï¼Œå¦‚æœè¿è¡Œå°±ä¼šå‡ºç°å¦‚ä¸ŠæŠ¥é”™ã€‚</p>
<p>æœ‰ä¸€ç§æ„å»ºæ–¹å¼ï¼Œå«åš Multi-archï¼Œåœ¨docker hubä¸Šçœ‹åˆ°æ˜¯è¿™æ ·çš„</p>
<p><img src="/images/202107042101132.png"></p>
<p>æ„å»ºèµ·æ¥ä¹ŸæŒºç®€å•ï¼Œéœ€è¦å®‰è£…buildxï¼ŒLinuxéœ€è¦é¢å¤–å¼€å¯binfmt_miscï¼Œåˆ›å»ºæ–°çš„æ„å»ºå™¨ï¼Œç„¶åbuildxå¼€å§‹æ„å»ºï¼Œæ•´ä½“å‘½ä»¤å¤§æ¦‚å¦‚ä¸‹ï¼š</p>
<p># å¼€å¯buildx<br>export DOCKER_CLI_EXPERIMENTAL&#x3D;enabled</p>
<h1 id="éªŒè¯buildx"><a href="#éªŒè¯buildx" class="headerlink" title="éªŒè¯buildx"></a>éªŒè¯buildx</h1><p>docker buildx version</p>
<h1 id="å¦‚æœä¸Šè¿°å‘½ä»¤æŠ¥é”™ï¼Œæœªå®‰è£…-buildxï¼Œéœ€è¦æ‰‹åŠ¨å®‰è£…ä¸€ä¸‹"><a href="#å¦‚æœä¸Šè¿°å‘½ä»¤æŠ¥é”™ï¼Œæœªå®‰è£…-buildxï¼Œéœ€è¦æ‰‹åŠ¨å®‰è£…ä¸€ä¸‹" class="headerlink" title="å¦‚æœä¸Šè¿°å‘½ä»¤æŠ¥é”™ï¼Œæœªå®‰è£… buildxï¼Œéœ€è¦æ‰‹åŠ¨å®‰è£…ä¸€ä¸‹"></a>å¦‚æœä¸Šè¿°å‘½ä»¤æŠ¥é”™ï¼Œæœªå®‰è£… buildxï¼Œéœ€è¦æ‰‹åŠ¨å®‰è£…ä¸€ä¸‹</h1><p>mkdir -p ~&#x2F;.docker&#x2F;cli-plugins<br>wget -O ~&#x2F;.docker&#x2F;cli-plugins&#x2F;docker-buildx <a target="_blank" rel="noopener" href="https://github.com/docker/buildx/releases/download/v0.5.1/buildx-v0.5.1.linux-amd64">https://github.com/docker/buildx/releases/download/v0.5.1/buildx-v0.5.1.linux-amd64</a><br>chmod a+x ~&#x2F;.docker&#x2F;cli-plugins&#x2F;docker-buildx</p>
<h1 id="å¼€å¯-binfmt-miscï¼Œ-Linux-only"><a href="#å¼€å¯-binfmt-miscï¼Œ-Linux-only" class="headerlink" title="å¼€å¯ binfmt_miscï¼Œ Linux only"></a>å¼€å¯ binfmt_miscï¼Œ Linux only</h1><p>docker run â€“rm â€“privileged docker&#x2F;binfmt:66f9012c56a8316f9244ffd7622d7c21c1f6f28d</p>
<h1 id="éªŒè¯qemu"><a href="#éªŒè¯qemu" class="headerlink" title="éªŒè¯qemu"></a>éªŒè¯qemu</h1><p>ls -al &#x2F;proc&#x2F;sys&#x2F;fs&#x2F;binfmt_misc&#x2F;<br>cat &#x2F;proc&#x2F;sys&#x2F;fs&#x2F;binfmt_misc&#x2F;qemu-aarch64</p>
<h1 id="åˆ›å»ºæ–°çš„æ„å»ºå™¨"><a href="#åˆ›å»ºæ–°çš„æ„å»ºå™¨" class="headerlink" title="åˆ›å»ºæ–°çš„æ„å»ºå™¨"></a>åˆ›å»ºæ–°çš„æ„å»ºå™¨</h1><p>docker buildx create â€“use â€“name mybuilder</p>
<h1 id="æ„å»º"><a href="#æ„å»º" class="headerlink" title="æ„å»º"></a>æ„å»º</h1><p>docker buildx build -t bennythink&#x2F;test â€“platform&#x3D;linux&#x2F;arm,linux&#x2F;arm64,linux&#x2F;amd64 . â€“push</p>
<p>å½“ç„¶äº†ä¸èƒ½æ¯æ¬¡éƒ½è¿™æ ·æ‰‹åŠ¨æ„å»ºï¼Œå¯æ˜¯Docker Hubçš„è‡ªåŠ¨æ„å»ºä¸ä»…è¦åœäº†ï¼Œè¿˜ä¸èƒ½è¿™ä¹ˆæ„å»ºã€‚é‚£ä¹ˆå‰©ä¸‹çš„æ¯”è¾ƒä¼˜é›…çš„è§£å†³æ–¹æ¡ˆå°±æ˜¯ GitHub Actionså•¦ã€‚</p>
<p>æ•´ä¸ªæµç¨‹ä¹Ÿå¾ˆç®€å•ã€‚</p>
<ol>
<li>checkoutä»£ç ï¼Œå¦‚æœ‰éœ€è¦ä¹Ÿè¦å‡†å¤‡å¥½submodule</li>
<li>é…ç½®buildxã€QEMUä»€ä¹ˆçš„</li>
<li>æ„å»º</li>
<li>æ¨é€åˆ°Docker Hub</li>
</ol>
<p>build-push-actionæ–‡æ¡£å·²ç»å†™çš„å¾ˆå¥½å•¦ï¼Œæˆ‘ç®€å•å¤åˆ¶ç²˜è´´ä¸€ä¸‹</p>
<h2 id="checkout"><a href="#checkout" class="headerlink" title="checkout"></a>checkout</h2><p>ä½¿ç”¨ actions&#x2F;checkout@v2</p>
<p>- name: Checkout<br>  uses: actions&#x2F;checkout@v2<br>  with:<br>    submodules: true</p>
<p>å¦‚æœæ²¡æœ‰submoduleçš„è¯ï¼Œæ•´ä¸ªstepå¯ä»¥åˆ æ‰ï¼Œbuild-push-actionä¼šè‡ªåŠ¨checkout</p>
<h2 id="é…ç½®buildx"><a href="#é…ç½®buildx" class="headerlink" title="é…ç½®buildx"></a>é…ç½®buildx</h2><p>- name: Set up QEMU<br>  uses: docker&#x2F;setup-qemu-action@v1</p>
<ul>
<li>name: Set up Docker Buildx<br>uses: docker&#x2F;setup-buildx-action@v1</li>
</ul>
<p>ç„¶åç™»å½•åˆ°Docker Hubï¼Œéœ€è¦åœ¨repository â€“ settingsä¸­è®¾ç½®secrets</p>
<p>- name: Login to DockerHub<br>  uses: docker&#x2F;login-action@v1<br>  with:<br>    username: $<br>    password: $</p>
<h2 id="æ„å»ºæ¨é€"><a href="#æ„å»ºæ¨é€" class="headerlink" title="æ„å»ºæ¨é€"></a>æ„å»ºæ¨é€</h2><p>- name: Build and push<br>  uses: docker&#x2F;build-push-action@v2<br>  with:<br>    context: .<br>    platforms: linux&#x2F;amd64,linux&#x2F;arm64<br>    push: true<br>    tags: bennythink&#x2F;yyetsbot:latest</p>
<p>è¿™æ ·ä¸€æ³¢æ“ä½œä¹‹åï¼Œæ¯æ¬¡pushä¹‹åï¼ŒGitHub Actionså°±ä¼šè‡ªåŠ¨è¿è¡Œï¼Œç„¶åDocker Hubä¸Šå°±å¯ä»¥æœ‰amd64&#x2F;arm64çš„imageå•¦ã€‚</p>
<p>å‡ ä¹æ˜¯0æ’é˜Ÿï¼Œå†ä¹Ÿä¸ç”¨â€œæ„å»º100ç§’ï¼Œæ’é˜Ÿ90ç§’â€å•¦ã€‚</p>
<h2 id="ä½¿ç”¨cache"><a href="#ä½¿ç”¨cache" class="headerlink" title="ä½¿ç”¨cache"></a>ä½¿ç”¨cache</h2><p>GitHub Actionsä¼¼ä¹ä¹Ÿèƒ½åˆ©ç”¨build cacheï¼Œè¿™æ ·å¯ä»¥å¤§å¹…å¢åŠ æ„å»ºé€Ÿåº¦</p>
<p>å‚è€ƒè¿™é‡Œå¯ä»¥é…ç½®ä¸€ä¸‹</p>
<p><a target="_blank" rel="noopener" href="https://github.com/docker/build-push-action/blob/master/docs/advanced/cache.md#github-cache">https://github.com/docker/build-push-action/blob/master/docs/advanced/cache.md#github-cache</a></p>
<h2 id="è·å–secret"><a href="#è·å–secret" class="headerlink" title="è·å–secret"></a>è·å–secret</h2><p>ä½¿ç”¨å¦‚ä¸‹å½¢å¼å°±å¯ä»¥è·å–åˆ°secretsä¸­é…ç½®çš„å€¼</p>
<p>$</p>
<p>å¯ä»¥é…ç½®ç¯å¢ƒå˜é‡ä¸­ï¼Œåœ¨buildæ—¶å¯ä»¥è®¿é—®ã€‚åŒæ—¶ä¹Ÿå¯ä»¥åœ¨æŸä¸€ä¸ªstepä¸­çš„runæ‰‹åŠ¨è¿è¡Œä»»æ„å‘½ä»¤ï¼Œæ¥è¾¾åˆ°build hooksçš„æ•ˆæœã€‚æ¯”å¦‚ï¼š</p>
<p>- name: Run hooks<br>  env:<br>    SENTRY_ORG: $<br>  run: echo $SENTRY_ORG &gt;&gt; &#x2F;tmp&#x2F;1.txty</p>
<p>[v_blue]è¦è®°å¾—åŒºåˆ†æ„å»ºæ—¶ç¯å¢ƒå˜é‡ã€è¿è¡Œæ—¶ç¯å¢ƒå˜é‡è¿˜æœ‰build-argå“¦ã€‚[&#x2F;v_blue]</p>
<h2 id="Yarn-There-appears-to-be-trouble-with-your-network-connection-Retrying"><a href="#Yarn-There-appears-to-be-trouble-with-your-network-connection-Retrying" class="headerlink" title="Yarn - There appears to be trouble with your network connection. Retrying"></a>Yarn - There appears to be trouble with your network connection. Retrying</h2><p>æˆ‘åœ¨æ„å»ºæ—¶ç»å¸¸ä¼šå‡ºè¿™ç§é”™ï¼Œæ¯•ç«Ÿæ˜¯åœ¨QEMUä¸­è·‘çš„nodeï¼Œæ‰€ä»¥ä¼šå¾ˆæ…¢ã€‚ä¸€ä¸ªå¯è¡Œçš„è§£å†³æ–¹æ¡ˆå°±æ˜¯åŠ é•¿è¶…æ—¶æ—¶é—´</p>
<p>yarn â€“network-timeout 100000</p>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p>build-push-action <a target="_blank" rel="noopener" href="https://github.com/docker/build-push-action">https://github.com/docker/build-push-action</a></p>
<p>YYeTsBot workflow <a target="_blank" rel="noopener" href="https://github.com/tgbot-collection/YYeTsBot/blob/master/.github/workflows/builder.yaml">https://github.com/tgbot-collection/YYeTsBot/blob/master/.github/workflows/builder.yaml</a></p>
<p>å¦‚ä½•æ„å»ºå¤šæ¶æ„ Docker é•œåƒï¼Ÿ <a target="_blank" rel="noopener" href="https://www.infoq.cn/article/v9qj0fjj6hsgyq0lphxg">https://www.infoq.cn/article/v9qj0fjj6hsgyq0lphxg</a></p>
<p>ğŸ¤¨ç­‰æˆ‘æœ‰ç©ºçš„ï¼Œå°±æŠŠæˆ‘è‡ªå·±çš„ç»å¸¸ç»´æŠ¤çš„é¡¹ç›®éƒ½docker imageéƒ½å¼„åˆ°GitHub Actionsä¸Šï¼</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/07/04/github-actions-docker-image/index/" data-id="clhp7rtge0036s2qra9xab40s" data-title="ä½¿ç”¨GitHub Actionsæ„å»ºMulti-arch Docker image" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-r7000-ng386/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/27/r7000-ng386/index/" class="article-date">
  <time class="dt-published" datetime="2021-06-27T00:00:00.000Z" itemprop="datePublished">2021-06-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/it/">it</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/06/27/r7000-ng386/index/">NETGEAR R7000å‡çº§NG386è¸©å‘ç¬”è®°</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>ä¸€ç›´ä»¥æ¥ï¼Œæˆ‘çš„NETGEAR R700ä½¿ç”¨çš„æ˜¯Legacyçš„380å›ºä»¶ï¼Œåæ­£ä¹Ÿèƒ½ç”¨ï¼Œä¸å·®ä»€ä¹ˆã€‚ä½†æ˜¯ä¸€ç›´éƒ½æœ‰ä¸€ä¸ªå¾ˆä¸¥é‡çš„é—®é¢˜ï¼Œå°±æ˜¯ä¼španicç„¶åè‡ªå·±é‡å¯ã€‚æœ€é¢‘ç¹çš„æƒ…å†µä¸‹å¯èƒ½æ¯å¼€æœºå‡ åˆ†é’Ÿå°±é‡å¯ä¸€æ¬¡ã€‚</p>
<p>ç»è¿‡æˆ‘çš„æµ‹è¯•ï¼Œå‘ç°è¿™ç§æƒ…å†µä¼šåœ¨å¤§æµé‡BTæ—¶æ¯”è¾ƒé¢‘ç¹å‡ºç°ï¼ŒXboxä¸‹è½½æ¸¸æˆå°±ä»æ¥ä¸ä¼šã€‚å¦‚æœæ­¤æ—¶æˆ‘åœ¨è·¯ç”±å™¨ä¸ŠæŠ“åŒ…ï¼Œé‚£ä¹ˆå‡ºç°çš„æ¦‚ç‡ä¼¼ä¹å°±æ›´é«˜äº†ã€‚</p>
<p>ä»Šå¤©å®åœ¨å¿ä¸äº†äº†ï¼Œå°±æƒ³ç€å‡çº§ä¸€æ³¢å§ã€‚ä¸»è¦å‚è€ƒäº†è¿™ç¯‡æ•™ç¨‹ï¼š</p>
<p><a target="_blank" rel="noopener" href="https://koolshare.cn/thread-193031-1-1.html">https://koolshare.cn/thread-193031-1-1.html</a></p>
<p>åæ­£æ²¡å°‘è¸©å‘ã€‚</p>
<p><img src="/images/202106272044406.png"></p>
<h2 id="æ”¹cfeçš„macåœ°å€"><a href="#æ”¹cfeçš„macåœ°å€" class="headerlink" title="æ”¹cfeçš„macåœ°å€"></a>æ”¹cfeçš„macåœ°å€</h2><p>æˆ‘æœ‰ç‚¹æ²¡å’‹çœ‹æ˜ç™½ä»–çš„æ„æ€ï¼Œä½†æ˜¯æˆ‘çŒœæµ‹äº†ä¸€ä¸‹ï¼Œåº”è¯¥æ˜¯å»æ‰¾åŸæ¥è·¯ç”±å™¨çš„eth0å’Œeth1çš„macåœ°å€ï¼Œæœ€å+4åº”è¯¥æ˜¯æŠŠmacåœ°å€æœ€åä¸€ä½è¿ç®—ä¸€ä¸‹ï¼Œæ¯”å¦‚æœ€åä¸€ä½æ˜¯F3ï¼Œé‚£ä¹ˆå°±å†™F7.å¥½æ­¹æˆ‘ä¹Ÿæ›¾æ˜¯Enginerring - Networkï¼Œè¿™ç‚¹é—®é¢˜è¿˜èƒ½éš¾å¾—å€’æˆ‘ï¼Ÿ</p>
<p>è‡³å°‘æˆ‘æ˜¯è¿™ä¹ˆæçš„â€¦â€¦ç„¶ååˆ·è¿›å»äº†ã€‚</p>
<p>åœ¨CFEEDITé‡Œå¯ä»¥çœ‹åˆ°æœ‰è¿™æ ·çš„IPï¼Œè®°ä½å•¦</p>
<p>lan_ipaddr&#x3D;192.168.1.1<br>lan_netmask&#x3D;255.255.255.0</p>
<h2 id="æ— æ³•è¿›å…¥miniWeb-Server"><a href="#æ— æ³•è¿›å…¥miniWeb-Server" class="headerlink" title="æ— æ³•è¿›å…¥miniWeb Server"></a>æ— æ³•è¿›å…¥miniWeb Server</h2><p>è¿ç½‘çº¿ï¼Œæ”¹IPã€‚è¿™ä¸ªIPå…¶å®å°±åº”è¯¥æ˜¯ä¸Šé¢CFEçš„é‚£ä¸ªIP</p>
<p>æ‰‹åŠ¨è®¾å®šIPä¸º192.168.1.11ï¼Œping 192.168.1.1ï¼Œç„¶åæˆ‘pingé€šäº†ï¼Œä½†æ˜¯ç½‘é¡µæ‰“ä¸å¼€ã€‚éƒ½å¿«æŠŠäººå®¶å±è‚¡æ…æ¼äº†ï¼Œä¹Ÿæ‰“ä¸å¼€ã€‚å„ç§å°è¯•éƒ½ä¸è¡Œã€‚æˆ‘éƒ½ä¸Šnmapæ‰«ç«¯å£äº†ã€‚ğŸ˜ </p>
<p>åæ¥å®åœ¨æ²¡åŠæ³•ï¼ŒBoot Campå¯åŠ¨åˆ°Windowsï¼Œç«Ÿç„¶æ‰“å¼€äº†ï¼æˆ‘ä¹Ÿä¸çŸ¥é“è¿™æ˜¯å› ä¸ºå•¥â€¦â€¦æœ‰æ¯’å§ã€‚ğŸ¤¬</p>
<p>miniWeb Serveræ¯”è¾ƒæ…¢ï¼Œä¸Šä¼ å›ºä»¶ä¹Ÿå¾ˆæ…¢ï¼Œæ…¢æ…¢ç­‰å°±å¥½äº†</p>
<h2 id="Wi-Fié‡å¯è‡ªåŠ¨å…³é—­"><a href="#Wi-Fié‡å¯è‡ªåŠ¨å…³é—­" class="headerlink" title="Wi-Fié‡å¯è‡ªåŠ¨å…³é—­"></a>Wi-Fié‡å¯è‡ªåŠ¨å…³é—­</h2><p>æ–°çš„å›ºä»¶æˆåŠŸå¯åŠ¨äº†ï¼Œä½†æ˜¯å‘ç°æ²¡Wi-Fiâ€¦â€¦åœ¨ç½‘ä¸Šæœåˆ°å¯ä»¥åœ¨æ— çº¿ç½‘ç»œ-ä¸“ä¸šè®¾ç½®é‡Œå¯ç”¨ã€‚ä½†æ˜¯æ¯æ¬¡é‡å¯ä¹‹ååˆè‡ªåŠ¨å…³é—­äº†ï¼Œæˆ‘ä¹Ÿä¸èƒ½æ¯æ¬¡éƒ½è¿™ä¹ˆæ’ç½‘çº¿æå•Šã€‚ä¸‡ä¸€æˆ‘ä¸åœ¨å®¶å®ƒè‡ªå·±é‡å¯äº†å«æˆ‘æ€ä¹ˆæ’ç½‘çº¿å•ŠğŸ¤¬</p>
<p>åæ¥æ‰¾åˆ°ä¸ªå¸–å­ï¼š <a target="_blank" rel="noopener" href="https://koolshare.cn/thread-109794-1-1.html">https://koolshare.cn/thread-109794-1-1.html</a></p>
<p>ç®—æ˜¯è§£å†³äº†å§ã€‚ä¼¼ä¹sleepæ²¡é‚£ä¹ˆå¿…è¦â€¦â€¦ï¼Œåæ­£å°±æ”¾ç€å§ä¹Ÿä¸å·®20ç§’ï¼Œä¸æƒ³æµ‹è¯•äº†ã€‚</p>
<p>benny@router:&#x2F;tmp&#x2F;home&#x2F;root# cat &#x2F;jffs&#x2F;scripts&#x2F;init-start<br>#!&#x2F;bin&#x2F;sh<br>sleep 20<br>nvram set wl0_radio&#x3D;1<br>nvram set wl1_radio&#x3D;1<br>nvram commit</p>
<p>service restart_wireless</p>
<h2 id="æ¢¯å­å§‹ç»ˆæ˜¯âŒ"><a href="#æ¢¯å­å§‹ç»ˆæ˜¯âŒ" class="headerlink" title="æ¢¯å­å§‹ç»ˆæ˜¯âŒ"></a>æ¢¯å­å§‹ç»ˆæ˜¯âŒ</h2><p>ç”¨çš„æ˜¯è¿™ä¸ªé¡¹ç›® <a target="_blank" rel="noopener" href="https://github.com/hq450/fancyss">https://github.com/hq450/fancyss</a></p>
<p>ä¸‹è½½åœ°å€åœ¨è¿™é‡Œ</p>
<p><a target="_blank" rel="noopener" href="https://github.com/hq450/fancyss_history_package/tree/master/fancyss_arm384">https://github.com/hq450/fancyss_history_package&#x2F;tree&#x2F;master&#x2F;fancyss_arm384</a></p>
<p>ç¦»çº¿å®‰è£…å‰å…ˆæŠŠkoolshareå‚»é€¼éæ³•å…³é”®è¯çš„åŠŸèƒ½å¹²äº†ã€‚</p>
<p>ä½†æ˜¯é…ç½®å®Œä¾æ—§æ˜¯âŒã€‚åæ¥å‘ç°å®ƒæ˜¯ç”¨çš„httpingåšæ£€æµ‹ï¼Œé‚£ä¼šä¸ä¼šæ˜¯httpingæœ‰é—®é¢˜ï¼Ÿ</p>
<p>benny@router:&#x2F;tmp&#x2F;home&#x2F;root# .&#x2F;httping<br>.&#x2F;httping: canâ€™t load library â€˜libssl.so.1.0.0â€™</p>
<p>æœç„¶ğŸ¤”ğŸ¤¬ğŸ¤¦â€â™€ï¸</p>
<p>å»<a target="_blank" rel="noopener" href="https://firmware.koolshare.cn/binary/httping/">è¿™é‡Œ</a>ä¸‹è½½æ›¿æ¢ä¸€ä¸ªå°±å¥½äº†</p>
<p>cd &#x2F;koolshare&#x2F;bin<br>wget <a target="_blank" rel="noopener" href="http://firmware.koolshare.cn/binary/httping/armv7/httping">http://firmware.koolshare.cn/binary/httping/armv7/httping</a><br>chmod +x httping</p>
<p>ä½†æ˜¯æˆ‘å¥½åƒharpoxyä¸‹è¿˜æ˜¯å„ç§âŒï¼Œå…ˆè·‘å•ä¸ªèŠ‚ç‚¹ç®—äº†å§ã€‚åˆä¸æ˜¯ä¸èƒ½ç”¨</p>
<h2 id="htopé—®é¢˜"><a href="#htopé—®é¢˜" class="headerlink" title="htopé—®é¢˜"></a>htopé—®é¢˜</h2><p>åœ¨åˆšåˆšé‚£çœ‹åˆ°äº†htopï¼Œå°±æƒ³é¡ºä¾¿ä¹Ÿç”¨ä¸Šç®—äº†ã€‚</p>
<p>Error opening terminal: xterm-256color</p>
<p>ğŸ¤¨</p>
<p>æŸ¥äº†ä¸€ä¸‹ï¼Œä¼¼ä¹exportä¸€ä¸‹å°±å¯ä»¥äº†</p>
<p>export TERM&#x3D;xterm-256color</p>
<p>é‚£æˆ‘ä¹Ÿä¸èƒ½æ¯æ¬¡è¿è¡Œæ—¶éƒ½exportå•Šï¼Œè¿™ç©æ„å®ƒä¹Ÿæ²¡æœ‰zshæ›´æ²¡æœ‰oh-my-zshï¼Œè¿™è®©æˆ‘è¿™ä¸ªè®°å¿†é€€åŒ–çš„è€å¹´ç—´å‘†æ€ä¹ˆåŠã€‚æ‰¾ç¯å¢ƒå˜é‡æ–‡ä»¶å‘—ï¼Œ<code>/etc/profile, /etc/environment, /tmp/etc</code>â€¦.</p>
<p>çœŸæ£’<code>/etc/profile</code>æ— æƒé™å†™ï¼Œå› ä¸ºè¿™ä¸ªæ–‡ä»¶ç³»ç»Ÿæ˜¯ROçš„ã€‚</p>
<p>åæ¥å‘ç°æ˜¯è¿™ä¸ªæ–‡ä»¶â€¦â€¦<code>/jffs/configs/profile.add</code></p>
<h2 id="æŒ‡ç¤ºç¯å¤ªé—ª"><a href="#æŒ‡ç¤ºç¯å¤ªé—ª" class="headerlink" title="æŒ‡ç¤ºç¯å¤ªé—ª"></a>æŒ‡ç¤ºç¯å¤ªé—ª</h2><p>æˆ‘ä¸€ç›´ä¸å¤ªå–œæ¬¢æŒ‡ç¤ºç¯ï¼Œè´¹æˆ‘ç”µä¸è¯´ï¼Œè¿˜é—ªçæˆ‘ç‹—çœ¼ã€‚åœ¨è®¾ç½®é‡Œå¯ä»¥å…³æ‰ã€‚ä½†æ˜¯é‡å¯äº†ä¹‹ååˆå›æ¥äº†â€¦â€¦æ‡’å¾—ç ”ç©¶å¤ªå¤šäº†ï¼Œåæ­£è¿™å‡ è¡Œèƒ½ç®¡ç”¨</p>
<p>#!&#x2F;bin&#x2F;sh<br>nvram set led_disable&#x3D;1<br>nvram commit<br>service restart_leds</p>
<p>ä¸è¿‡ç¯è¿˜æ˜¯å¥½å¤šï¼Œä¹‹å‰æ˜¯åªæœ‰ç”µæºç¯åœ¨äº®ï¼Œç°åœ¨åªæ˜¯å…³æ‰äº†LAN 1234.å•Šç®—äº†å°±è¿™æ ·å§ã€‚å“ªå¤©å¿ƒæƒ…ä¸å¥½äº†æ‹¿é»‘èƒ¶å¸¦ç»™å®ƒè´´ä¸Šã€‚</p>
<p>åŠ åˆ°å¯åŠ¨é¡¹<code>/jffs/scripts/services-start</code> å¥½åƒä¸å¤ªå¥½ç”¨ï¼Œä¼°è®¡æ˜¯æ—¶æœºä¸å¯¹ã€‚ä¸ç®¡äº†æ‰‹åŠ¨æ‰§è¡Œç®—äº†å§ã€‚</p>
<h2 id="è‡ªå®šä¹‰å¯åŠ¨é¡¹"><a href="#è‡ªå®šä¹‰å¯åŠ¨é¡¹" class="headerlink" title="è‡ªå®šä¹‰å¯åŠ¨é¡¹"></a>è‡ªå®šä¹‰å¯åŠ¨é¡¹</h2><p>æˆ‘çš„è·¯ç”±å™¨ä¸Šè·‘äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„ç½‘ç»œç›¸å…³çš„å°ç¨‹åºï¼Œç”¨Goå†™çš„ï¼Œäº¤å‰ç¼–è¯‘æˆäº†armv7lçš„äºŒè¿›åˆ¶ï¼Œè¿™æ¬¡æ²¡æƒ³åˆ°åŠ åˆ°<code>/jffs/scripts/services-start</code>é‡Œç®¡ç”¨äº†ã€‚çœ‹æ¥ä»¥åä¸ç”¨æ‰‹åŠ¨æ£€æŸ¥äº†ã€‚</p>
<p>nohup &#x2F;jffs&#x2F;xxx&amp;</p>
<p>ç®¡å®ƒä¼˜é›…ä¸ä¼˜é›…çš„ï¼Œèƒ½è·‘å°±è¡Œã€‚ç”¨å¥¶å­èµ°è·¯åˆæ€ä¹ˆäº†å•Šï¼</p>
<p><a target="_blank" rel="noopener" href="https://dmesg.app/wp-content/uploads/2021/06/2021062720570093.gif"><img src="/images/2021062720570093.gif"></a></p>
<h2 id="IPä¸macåœ°å€ç»‘å®š"><a href="#IPä¸macåœ°å€ç»‘å®š" class="headerlink" title="IPä¸macåœ°å€ç»‘å®š"></a>IPä¸macåœ°å€ç»‘å®š</h2><p>æˆ‘çš„é‚£ä¸ªç¨‹åºæ˜¯å†™æ­»äº†IPåœ°å€çš„ï¼Œåˆ·äº†å›ºä»¶ä¹‹ååŸæ¥çš„ç»‘å®šå…¨ä¸¢äº†ã€‚æ‡’å¾—å†é‡æ–°ç¼–è¯‘ï¼Œç›´æ¥é‡æ–°ç»‘å®šç„¶åé‡å¯ä¸‹è®¾å¤‡å°±å¥½äº†ã€‚</p>
<p>è¿™ä¸ªå¾ˆå¥½åŠäº†ï¼ŒWebUIä¸Šç‚¹ç‚¹å°±å¥½äº†ã€‚é¡ºä¾¿æŠŠæœç´¢åŸŸæ”¹æˆlanï¼Œæˆ‘çš„é‚£ä¸ªç¨‹åºä¹Ÿæ˜¯å†™æ­»äº†æœç´¢åŸŸã€‚åˆ«é»‘æˆ‘äº†ï¼Œä»Šå¤©å°±æµè¡Œå†™æ­»ã€‚</p>
<p><img src="/images/2021062720444046.png"></p>
<h2 id="æ—¥å¿—ç³»ç»Ÿ"><a href="#æ—¥å¿—ç³»ç»Ÿ" class="headerlink" title="æ—¥å¿—ç³»ç»Ÿ"></a>æ—¥å¿—ç³»ç»Ÿ</h2><p>ä¸ºäº†æ›´å¥½çš„å¼„æ˜ç™½ä¸ºä»€ä¹ˆå®ƒä¼šè‡ªåŠ¨é‡å¯ï¼Œæˆ‘è§‰å¾—æˆ‘éœ€è¦æŠŠlogä¿å­˜èµ·æ¥ã€‚åº†å¹¸çš„æ˜¯åœ¨å›ºä»¶çš„è®¾ç½®ä¸­å¯ä»¥æ‰¾åˆ°è¿œç¨‹è®°å½•æœåŠ¡å™¨ã€‚é‚£ä¹ˆæˆ‘ä»¬åªè¦é…ç½®ä¸€ä¸ªsyslog serverå°±å¯ä»¥äº†ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://dmesg.app/wp-content/uploads/2021/06/2021062812333552.png"><img src="/images/2021062812333552.png"></a></p>
<p>è¿™æ–¹é¢çš„é€‰æ‹©å…¶å®æŒºå¤šçš„ï¼ŒVMware vRealize Log Insightsï¼Œlogstash+kibana+elastic searchï¼Œlokiï¼Œç”šè‡³SolarisWindsä¹Ÿæœ‰ä¸€ä¸ªkiwi log serverï¼Œè¿™äº›éƒ½æ”¯æŒsyslogã€‚ä½†æ˜¯ä»–ä»¬çš„ç¼ºç‚¹å°±æ˜¯é…ç½®èµ·æ¥å¤ªéº»çƒ¦ï¼æˆ‘çš„éœ€æ±‚å¤ªç®€å•äº†ï¼Œèƒ½æŠŠsyslogæ”¶ä¸‹æ¥å­˜èµ·æ¥æ–¹ä¾¿ä»¥åçœ‹ï¼Œæ›´å¥½çš„è¯æä¾›ä¸€ä¸ªwebç•Œé¢çœçš„æˆ‘æ¯æ¬¡sshæ‰“å‘½ä»¤é‚£å°±æ›´å¥½äº†ã€‚</p>
<p>ç®€å•çš„è¯´ï¼Œå¤§éƒ¨åˆ†å‘è¡Œç‰ˆéƒ½æœ‰rsyslogè¿™ä¸ªä¸œè¥¿ï¼Œç®€å•é…ç½®ä¸€ä¸‹å°±å¯ä»¥æ‹¿æ¥æ”¶æ—¥å¿—äº†ï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡ <a target="_blank" rel="noopener" href="https://leeyr.com/330.html">https://leeyr.com/330.html</a></p>
<p>æœ‰èƒ½åŠ›çš„ä¹Ÿå¯ä»¥æ‰‹å†™ï¼Œæ¯”å¦‚<a target="_blank" rel="noopener" href="https://github.com/mcuadros/go-syslog">go-syslog</a>è¿™ä¸ªåº“ï¼Œå¾ˆç®€å•ï¼Œæ³¨æ„logformatæ˜¯RFC3164</p>
<p>package main</p>
<p>import (<br>   â€œfmtâ€<br>   â€œgopkg.in&#x2F;mcuadros&#x2F;go-syslog.v2â€<br>)<br>func main() {<br>   channel :&#x3D; make(syslog.LogPartsChannel)<br>   handler :&#x3D; syslog.NewChannelHandler(channel)</p>
<p>   server :&#x3D; syslog.NewServer()<br>   server.SetFormat(syslog.RFC3164)<br>   server.SetHandler(handler)<br>   server.ListenUDP(â€œ0.0.0.0:514â€)<br>   server.Boot()</p>
<p>   go func(channel syslog.LogPartsChannel) {<br>      for logParts :&#x3D; range channel {<br>         fmt.Println(logParts)<br>      }<br>   }(channel)</p>
<p>   server.Wait()<br>}</p>
<p>ç”¨èµ·æ¥æ˜¯è¿™æ ·æ»´</p>
<p><a target="_blank" rel="noopener" href="https://dmesg.app/wp-content/uploads/2021/06/2021062812365940.png"><img src="/images/2021062812365940.png"></a></p>
<p>åæ¥åœ¨GitHubä¸Šæ‰¾åˆ°ä¸€ä¸ªç®€å•çš„å·¥å…·<a target="_blank" rel="noopener" href="https://github.com/pierredavidbelanger/raftman">raftman</a>ï¼Œè‡ªå¸¦äº†ä¸€ä¸ªç®€å•çš„UIï¼Œç”¨SQLiteå­˜æ•°æ®ã€‚</p>
<p>ç”±äºæˆ‘ä»¬è¦ç”¨RFC3164çš„æ ¼å¼ï¼Œå› æ­¤ç¨å¾®æ”¹ä¸‹å®ƒçš„<code>Dockerfile</code></p>
<p>ENTRYPOINT [â€œ&#x2F;usr&#x2F;local&#x2F;bin&#x2F;raftmanâ€, â€œ-frontendâ€, â€œsyslog+udp:&#x2F;&#x2F;:514?format&#x3D;RFC3164â€, â€œ-frontendâ€, â€œui+http:&#x2F;&#x2F;:8282&#x2F;â€œ]</p>
<p>ç„¶åbuild</p>
<p>docker build -t raftman .</p>
<p>ç„¶åå†èµ·é£</p>
<p>docker run -d â€“restart&#x3D;always â€“name raftman \<br>-v &#x2F;tmp:&#x2F;var&#x2F;lib&#x2F;raftman \<br>-p 514:514&#x2F;udp \<br>-p 5514:5514 \<br>-p 8181:8181 \<br>-p 8282:8282 \<br>raftman</p>
<p>å¥½çš„æ²¡é—®é¢˜ã€‚æ‰“å¼€<a href="http://ip:8282å°±æœ‰äº†ã€‚">http://ip:8282å°±æœ‰äº†ã€‚</a></p>
<p>æˆ‘çŸ¥é“æˆ‘ç©¿è¶Šäº†8ä¸ªå°æ—¶ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“ä¸ºå•¥ï¼Œæ‡’å¾—å»çœ‹ä»£ç å•¦ã€‚èƒ½ç”¨å°±è¡Œï¼</p>
<p><a target="_blank" rel="noopener" href="https://dmesg.app/wp-content/uploads/2021/06/2021062812385946.png"><img src="/images/2021062812385946.png"></a></p>
<p>å•ŠçŸ¥é“æ€ä¹ˆfixè¿™ä¸ªå•¦ï¼Œæš´åŠ›ç‚¹ <code>frontend/static/ui/index.js</code></p>
<p>var tsFormatter &#x3D; function (s) {<br>d &#x3D; new Date(s);<br>d.setHours(d.getHours() - 8);<br>return tsFormat(d);<br>};</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å·®ä¸å¤šå°±è¸©äº†è¿™ä¹ˆå¤šå‘ï¼Œä¸»è¦è¿˜æ˜¯è¿›miniwebæµªè´¹äº†å¤ªå¤šæ—¶é—´ï¼Œä¹Ÿä¸çŸ¥é“ç”¨Windowså¥½äº†æ˜¯ä¸æ˜¯å¶ç„¶ã€‚</p>
<p>ä¼¼ä¹å¯ä»¥ç›´æ¥å‡çº§AC68Uçš„å›ºä»¶ï¼Ÿæˆ‘æ‡’å¾—æŠ˜è…¾äº†ã€‚ğŸ˜ ğŸ’¢</p>
<p>æ„Ÿè§‰è¿™ä¸ªkoolshareæ”¹çš„å¯èƒ½è¿˜ä¼šæœ‰å„ç§bugï¼Œå†ä¸è¡Œæˆ‘å°±æ¢å›åŸç‰ˆâ€¦â€¦æ„Ÿè§‰è¿˜æ˜¯padavançœå¿ƒå•Šï¼Œä½†æ˜¯MT7620ä¼¼ä¹æ€§èƒ½æ€»æ˜¯å·®äº†é‚£ä¹ˆç‚¹ã€‚</p>
<p>å¥½å¿ƒç´¯ï¼æœ¬åº”è¯¥çœ‹æ´›åŸºçš„ï¼Œæˆ‘å´æŠ˜è…¾äº†ä¸€ä¸‹åˆè¿™ç©æ„â€¦â€¦</p>
<p>æœ¬æ¥äººå®¶å¿ƒæƒ…å°±ä¸å¥½ï¼Œè¿˜è¸©äº†è¿™ä¹ˆå¤šå‘â€¦â€¦æ€ä¹ˆä¸å‘åº•èººå¹³å¾—äº†å‘¢ã€‚ğŸ˜«ğŸ˜–</p>
<p><strong>æœ¬æ–‡ç”±æš´èºBennyç‹‚æš´ä¸”æŠ‘éƒåœ°åˆ›ä½œ</strong></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/27/r7000-ng386/index/" data-id="clhp7rtig0079s2qr14631dao" data-title="NETGEAR R7000å‡çº§NG386è¸©å‘ç¬”è®°" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-encounter/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/22/encounter/index/" class="article-date">
  <time class="dt-published" datetime="2021-06-22T00:00:00.000Z" itemprop="datePublished">2021-06-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/justsay/">justsay</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/06/22/encounter/index/">é‡è§</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>å‰æ®µæ—¶é—´çš„ç«¯åˆèŠ‚å‡æœŸï¼Œå¿ƒæƒ…éå¸¸å·®åŠ²ã€‚äºæ˜¯æˆ‘ä¾¿ä¸€ä¸ªäººå‡ºå»æ•£æ­¥ï¼Œæ”¾æ¾ä¸€ä¸‹å¿ƒæƒ…é¡ºä¾¿å½“ä½œé”»ç‚¼èº«ä½“äº†ã€‚åœ¨ç»è¿‡å®¶é™„è¿‘çš„å•†åœºæ—¶ï¼Œå®‰æ…•å¸Œåœ¨ä¿ƒé”€ï¼ŒæŒºçƒ­é—¹çš„ï¼Œæˆ‘å°±è¿‡å»å›´è§‚äº†ä¸€ä¼šã€‚</p>
<p>åœ¨äººç¾¤ä¸­æˆ‘çœ‹åˆ°äº†ä¸€ä¸ªç©¿ç€ç™½è‰²è¿è¡£è£™çš„å¥³å­©ï¼Œçœ‹èµ·æ¥åº”è¯¥æ˜¯å·¥ä½œäººå‘˜ã€‚é»‘è‰²çš„é•¿é•¿çš„å¤´å‘ï¼Œå¾ˆä¼˜é›…å¾ˆæœ‰æ°”è´¨ï¼Œæ˜¯æˆ‘å–œæ¬¢çš„ç±»å‹å‘€ã€‚äºæ˜¯æˆ‘å°±åœ¨æ—è¾¹è£…ä½œè·¯è¿‡çš„è·¯äººï¼Œé»˜é»˜åœ°çœ‹äº†ä¸€æ™šä¸Šã€‚</p>
<p>ç¬¬äºŒå¤©ä¸‹åˆï¼Œæˆ‘åˆè·¯è¿‡äº†é‚£ä¸ªå•†åœºï¼ŒåŒæ ·çœ‹åˆ°äº†å¥¹ã€‚äºæ˜¯æˆ‘å°±ååœ¨æ—è¾¹ï¼Œä»ä¸‹åˆå‘†åˆ°äº†æ™šä¸Šã€‚å¿ƒæƒ…è¿˜æ˜¯åƒç¬¬ä¸€å¤©å‡æœŸé‚£æ ·å·®åŠ²ï¼Œä¸è¿‡åœ¨å¤–é¢æ€»æ¯”åœ¨å®¶é‡Œå‘å‘†å¥½ï¼Œå†åŠ ä¸Šè¿™è¾¹æœ‰å…»çœ¼çš„å§‘å¨˜ï¼Œé‚£å°±æ›´å¥½äº†å‘€ã€‚</p>
<p>æˆ‘åœ¨æƒ³ï¼Œè¿™ä¸ªå·¥ä½œåº”è¯¥å¾ˆè¾›è‹¦å§ï¼Œè¦ä¸€ç›´ç«™ç€ï¼Œè¿˜è¦ç«¯ç€ç›˜å­å»é—®ç»è¿‡çš„è·¯äººè¦ä¸è¦å“å°ä¸€ä¸‹ã€‚æˆ‘åœ¨æ—è¾¹åç€éƒ½è§‰å¾—å¾ˆç´¯ï¼Œæ›´ä½•å†µæ˜¯ç«™ç€ä¸€ç›´åœ¨å¿™å‘¢ã€‚</p>
<p>æœŸé—´çœ‹åˆ°å§‘å¨˜åœ¨æ—¶ä¸æ—¶çš„æ”¾æ¾ä¸€ä¸‹è‡ªå·±ï¼Œä¸€å®šå¾ˆç´¯ï¼Œå¾ˆé¥¿å§ï¼Œå…«ç‚¹é’Ÿäº†è¿˜æ²¡åŠæ³•å»åƒé¥­ã€‚å°½ç®¡ç©¿ç€è¿åŠ¨é‹ï¼Œè…¿ä¹Ÿä¸€å®šé…¸é…¸çš„ã€‚</p>
<p>é‚£æ—¶ï¼Œæˆ‘åœ¨æƒ³ï¼Œè¦ä¸ç„¶æˆ‘å»æ­è®ªå§ï¼Œå¯æ˜¯æˆ‘åˆä»æ¥æ²¡è¿™æ ·åšè¿‡ï¼Œä¸çŸ¥é“è¯¥æ€ä¹ˆè¯´ï¼Œè¢«æ‹’ç»äº†æ€ä¹ˆåŠã€‚</p>
<p>é‚£æ™šï¼Œå¥¹å°±ç«™åœ¨æˆ‘èº«è¾¹ï¼Œè¢«å°ä¸Šçš„è¡¨æ¼”é€—ç¬‘äº†ã€‚å°±è¿™æ ·çŠ¹è±«ç€è¿‡äº†ç¬¬äºŒå¤©ã€‚</p>
<p>ç¬¬ä¸‰å¤©ï¼Œæœ‰ä¸€ç‚¹ä¸‹é›¨ã€‚æˆ‘è¶ç€é›¨åœå»çœ‹äº†ï¼Œé‚£ä¸ªå§‘å¨˜å·²ç»ä¸åœ¨äº†ã€‚ä¸‹åˆå’Œæ™šä¸Šåˆåˆ†åˆ«å»äº†ä¸€æ¬¡ï¼Œä¹Ÿæ²¡æœ‰çœ‹åˆ°å¥¹ã€‚</p>
<p>å¥¹åº”è¯¥æ˜¯å…¼èŒå§ï¼Œä¸‰å¤©çš„å‡æœŸï¼Œä¸¤å¤©æ—¶é—´ç”¨æ¥å…¼èŒï¼Œä¸€å¤©ä¼‘æ¯ã€‚çœŸçš„å¾ˆè¾›è‹¦å•Šã€‚</p>
<p>ç¬¬å››å¤©ï¼Œå·¥ä½œæ—¥ï¼ŒåŒæ ·åœ¨ä¸‹é›¨ã€‚é›¨åœäº†ä¹‹åæˆ‘å»çœ‹äº†ä¸€ä¸‹ï¼Œèˆå°å·²ç»æ’¤èµ°äº†ï¼Œä»€ä¹ˆéƒ½æ²¡æœ‰äº†ï¼Œä¸€ç‚¹ç—•è¿¹éƒ½æ²¡æœ‰ç•™ä¸‹æ¥ã€‚</p>
<p>ç¬¬äº”å¤©ï¼Œç¬¬å…­å¤©â€¦â€¦</p>
<p>æˆ‘çŒœï¼Œå·²ç»ä¸ä¼šå†è§åˆ°è¿™ä¸ªå§‘å¨˜äº†å§ã€‚æˆ‘ä¸çŸ¥é“å¥¹çš„åå­—ï¼Œæ²¡æœ‰å¥¹çš„è”ç³»æ–¹å¼ï¼Œç”šè‡³è¿å¥¹æ˜¯åšä»€ä¹ˆçš„éƒ½ä¸çŸ¥é“ã€‚åœ¨è¿™åº§2500ä¸‡äººçš„åŸå¸‚é‡Œï¼Œæˆ‘å†ä¹Ÿè§ä¸åˆ°å¥¹äº†ã€‚</p>
<p>å°±ç®—è¿æ°”å¥½çœŸçš„è§åˆ°äº†ï¼Œé‚£åˆèƒ½æ€æ ·ã€‚æˆ‘çœŸçš„èƒ½é¼“èµ·å‹‡æ°”å»åšä»€ä¹ˆå—ï¼Ÿè¿˜æ˜¯ä¸è¦å†æŠ±æœ‰ä»»ä½•å¸Œæœ›äº†ã€‚</p>
<p>å¸Œæœ›å¯¹æˆ‘è€Œè¨€ï¼Œåˆ°æœ€åï¼Œå°±æ˜¯ç»æœ›ã€‚</p>
<p>ã€Œå–œæ¬¢çš„äººæ˜¯ä¸å¯èƒ½çš„ï¼Œæƒ³è¦çš„ä¸œè¥¿æ˜¯æ‹¿ä¸åˆ°çš„ï¼Œæœªæ¥æ˜¯çœ‹ä¸è§çš„ã€‚ã€</p>
<p>ç©¶ç«Ÿè¦è¯´å¤šå°‘æ¬¡æ‰èƒ½è®©è‡ªå·±è®°ä½è¿™å¥è¯ã€‚æ˜æ˜å·²ç»çŸ¥é“ç»“æœäº†ï¼Œå°±ä¸è¦å†æŒ£æ‰äº†ï¼Œä¸è¦å†åšæ— æ‰€è°“çš„åŠªåŠ›ç„¶åè‡ªæˆ‘æ„ŸåŠ¨äº†ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://dmesg.app/wp-content/uploads/2018/03/2018030604125565.jpeg"><img src="/images/2018030604125565.jpeg" alt="å¹³åŒ¡ä¸å®æ —"></a></p>
<p><strong>æˆ‘æ‰æ˜¯é‚£ä¸ªæ¯å¤©éƒ½å¤„åœ¨å……æ»¡å¸Œæœ›å’Œå å…¥å •è½é‡Œæ¥å›è½¬æ¢çš„äººã€‚</strong></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/22/encounter/index/" data-id="clhp7rtfu0028s2qr8aov6c7x" data-title="é‡è§" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-dockerhub-submodule/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/19/dockerhub-submodule/index/" class="article-date">
  <time class="dt-published" datetime="2021-06-19T00:00:00.000Z" itemprop="datePublished">2021-06-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/program/">program</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/06/19/dockerhub-submodule/index/">Docker Hubä¸submoduleè¸©å‘å°è®°</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>å¤§å®¶éƒ½æ‡‚ï¼Œä½¿ç”¨ Dockeråˆ†å‘åº”ç”¨æ˜¯éå¸¸èˆ’æœç•…å¿«çš„äº‹æƒ…ï¼é€šå¸¸æ¥è¯´ï¼Œå¦‚æœæˆ‘ä»¬åœ¨GitHubå¼€æºä»£ç ï¼Œé€šå¸¸ä¹Ÿå°±ä¼šé€‰æ‹©Docker Hubæ¥æ„å»ºé•œåƒã€‚å½“ç„¶å•¦ï¼Œç”¨GitHub Actionï¼Œæˆ–è€…è‡ªå·±æ„å»ºå†æäº¤ä¹Ÿæ˜¯ä¸€ç§åŠæ³•å“¦ã€‚</p>
<p>æ€ä¹ˆå†™Dockerfileï¼Œæ¯”å¦‚ä¸åŒå±‚çº§çš„RUNï¼Œæ­£ç¡®åº”ç”¨multi stage buildï¼Œé‚£æ˜¯å¦å¤–ä¸€ä¸ªè¯é¢˜å•¦ã€‚ä»Šå¤©æ¥è¯´è¯´åœ¨ä¸º yyetswebæ„å»ºdocker imageçš„æ—¶å€™ï¼Œæˆ‘è¸©åˆ°çš„å‘â€¦â€¦</p>
<h2 id="ç¯å¢ƒå˜é‡"><a href="#ç¯å¢ƒå˜é‡" class="headerlink" title="ç¯å¢ƒå˜é‡"></a>ç¯å¢ƒå˜é‡</h2><p>è¯´åˆ°ç¯å¢ƒå˜é‡ï¼Œé¦–å…ˆæˆ‘ä»¬è¦åŒºåˆ†ä¸€ä¸‹è¿è¡Œæ—¶ç¯å¢ƒå˜é‡å’Œæ„å»ºæ—¶ç¯å¢ƒå˜é‡ã€‚</p>
<h3 id="è¿è¡Œæ—¶ç¯å¢ƒå˜é‡"><a href="#è¿è¡Œæ—¶ç¯å¢ƒå˜é‡" class="headerlink" title="è¿è¡Œæ—¶ç¯å¢ƒå˜é‡"></a>è¿è¡Œæ—¶ç¯å¢ƒå˜é‡</h3><p>æˆ‘ä»¬åœ¨Dockerfileä¸­ä½¿ç”¨ <code>ENV</code>å®šä¹‰çš„å˜é‡å°±å¯ä»¥ç®—è¿è¡Œæ—¶ç¯å¢ƒå˜é‡å•¦ï¼Œæ¯”å¦‚è¯´è¿™æ ·ï¼š</p>
<p>ENV TZ&#x3D;Asia&#x2F;Shanghai</p>
<p>è¿™ä¸ª<code>TZ</code>å˜é‡ä¼šè¢«å®¹å™¨ä¸­çš„ç¨‹åºç›´æ¥è¯»å–ä½¿ç”¨ã€‚</p>
<h3 id="æ„å»ºæ—¶ç¯å¢ƒå˜é‡"><a href="#æ„å»ºæ—¶ç¯å¢ƒå˜é‡" class="headerlink" title="æ„å»ºæ—¶ç¯å¢ƒå˜é‡"></a>æ„å»ºæ—¶ç¯å¢ƒå˜é‡</h3><p>åœ¨æ„å»ºæ—¶ä¼šè¢«è¯»å–ä½¿ç”¨çš„å˜é‡ï¼Œæ¯”å¦‚è¯´åœ¨Docker Hubä¼šæœ‰è¿™æ ·çš„è®¾ç½®ï¼š</p>
<p><img src="/images/2021061914224777.png"></p>
<p>é‚£ä¹ˆè¿™ä¸ªå˜é‡å°±æ˜¯å¯ä»¥åœ¨Dockerfileé‡Œä½¿ç”¨ï¼š</p>
<p>RUN echo $REACT_APP_DOMAIN</p>
<p>ä½¿ç”¨çš„å•¦ã€‚</p>
<h2 id="æˆ‘çš„ä½¿ç”¨"><a href="#æˆ‘çš„ä½¿ç”¨" class="headerlink" title="æˆ‘çš„ä½¿ç”¨"></a>æˆ‘çš„ä½¿ç”¨</h2><p>å› ä¸ºå‰ç«¯çš„SPAåº”ç”¨è¦åœ¨æ„å»ºæ—¶ä½¿ç”¨ä¸€äº›ç¯å¢ƒå˜é‡ï¼Œæ‰€ä»¥æˆ‘å°±åœ¨ Docker Hubçš„è®¾ç½®ä¸­åŠ äº†è¿™å‡ ä¸ªï¼Œä½†æ˜¯ä¼¼ä¹å¹¶æ²¡æœ‰ç”Ÿæ•ˆã€‚ä¸çŸ¥é“ä¸ºä»€ä¹ˆä¼šè¿™æ ·ï¼Œè€ƒè™‘åˆ°æ„å»ºæ—¶ä¼šè¯»å–é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ <code>.env</code>æ–‡ä»¶ï¼Œé‚£ä¸å¦‚åº”ç”¨ä¸€ä¸‹Docker Hubçš„hookså§ï¼</p>
<p>Docker Hubçš„build hooksä¸€å…±æœ‰è¿™ä¹ˆå‡ ç§ï¼š</p>
<ul>
<li>hooks&#x2F;post_checkout</li>
<li>hooks&#x2F;pre_build</li>
<li>hooks&#x2F;post_build</li>
<li>hooks&#x2F;pre_test</li>
<li>hooks&#x2F;post_test</li>
<li>hooks&#x2F;pre_push (only used when executing a build rule or automated build )</li>
<li>hooks&#x2F;post_push (only used when executing a build rule or automated build )</li>
</ul>
<p>æ¯ä¸€ä¸ªhookéƒ½å¯ä»¥åŒ…å«dockerå‘½ä»¤å’Œå„ç§bashå‘½ä»¤ã€‚é‚£å¯¹äºæˆ‘çš„åœºæ™¯æ¥è¯´ï¼Œ åˆ›å»ºä¸€ä¸ª<code>pre_build</code>å°±å¯ä»¥å•¦</p>
<p>#!&#x2F;bin&#x2F;bash<br>cat &lt;&lt; EOF &gt;&gt; YYeTsFE&#x2F;.env<br>SENTRY_ORG&#x3D;$SENTRY_ORG<br>SENTRY_PROJECT&#x3D;$SENTRY_PROJECT<br>SENTRY_AUTH_TOKEN&#x3D;$SENTRY_AUTH_TOKEN</p>
<p>REACT_APP_SENTRY_DSN&#x3D;$REACT_APP_SENTRY_DSN<br>REACT_APP_DOMAIN&#x3D;$REACT_APP_DOMAIN<br>REACT_APP_GA&#x3D;$REACT_APP_GA</p>
<h1 id="sourcemap"><a href="#sourcemap" class="headerlink" title="sourcemap"></a>sourcemap</h1><p>GENERATE_SOURCEMAP&#x3D;$GENERATE_SOURCEMAP<br>EOF</p>
<p>å®Œç¾ï¼</p>
<h2 id="submodule"><a href="#submodule" class="headerlink" title="submodule"></a>submodule</h2><p>ä½¿ç”¨git submoduleç»§æ‰¿å…¶ä»–é¡¹ç›®æ˜¯éå¸¸ç†æƒ³çš„ä¸€ç§å¼€å‘æ–¹å¼ã€‚æˆ‘ä»¬å¯ä»¥æ§åˆ¶submoduleè·Ÿè¸ªåˆ°ä¸Šæ¸¸çš„å“ªä¸€ä¸ªcommitï¼Œéœ€è¦æ›´æ–°æ—¶åªéœ€è¦ä¸€ä¸ª <code>git submodule update --remote</code>ï¼Œç„¶åå†æŠŠhash commitå°±å¯ä»¥å•¦ã€‚</p>
<p>Docker Hubåœ¨buildæ—¶ä¼šè‡ªåŠ¨cloneç›¸åº”çš„submoduleï¼Œå› æ­¤å¸¸è§„æƒ…å†µä¸‹æ¥è®²ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½æ˜¯å¯ä»¥é¡ºåˆ©æ„å»ºçš„ã€‚åªä¸è¿‡æœ‰å‡ ç‚¹éœ€è¦æ³¨æ„ï¼š</p>
<ol>
<li>docker hubæ‰§è¡Œçš„æ˜¯shallow copyï¼Œå› æ­¤åªæœ‰æœ€æ–°çš„commitå’Œå¯¹åº”çš„branchä¼šè¢«æ‹‰ä¸‹æ¥ï¼Œå› æ­¤å¦‚æœä½ çš„buildè„šæœ¬æ˜¯ä¾èµ–äº†git branchå’Œä¸åŒçš„commitï¼Œé‚£ä¼šå¤±è´¥çš„å“¦ã€‚è¿™ä¸ªæ—¶å€™è¦ç”¨hooksæ¥è§£å†³</li>
<li>private submoduleéœ€è¦ä¸€äº›é¢å¤–è®¾ç½®ï¼Œå¯ä»¥å‚è€ƒå®˜ç½‘æ–‡æ¡£æ¥è§£å†³</li>
<li>åœ¨moduleé‡Œæ‰§è¡Œgitç›¸å…³çš„å‘½ä»¤ï¼Œå¾ˆæœ‰å¯èƒ½å¤±è´¥çš„å“¦ï¼ˆè¿™å¯èƒ½æ˜¯Docker Hubçš„bugï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯gitç‰ˆæœ¬çš„é—®é¢˜ï¼‰ã€‚</li>
</ol>
<p>æˆ‘è¦è¯¦ç»†çš„è¯´ä¸‹ç¬¬ä¸‰ç‚¹ğŸ¤£</p>
<p>åœ¨æˆ‘çš„æ„å»ºè„šæœ¬ä¸­ï¼Œæˆ‘ç”¨äº†<code>git rev-parse --short HEAD</code> æ¥è·å–submoduleçš„hashï¼Œç„¶åæŠŠè¿™ä¸ªhashä½œä¸ºtagæ¨é€åˆ°sentryä¸Šã€‚ä½†æ˜¯åœ¨æ„å»ºæ—¥å¿—ä¸­å‘ç°äº†è¿™ç§é”™è¯¯ï¼š</p>
<p>-â€“&gt; Running in 4c09a0ea3725</p>
<p>yarn run v1.22.5</p>
<p>$ (export REACT_APP_SENTRY_RELEASE&#x3D;$(git rev-parse â€“short HEAD); react-scripts build &amp;&amp; node scripts&#x2F;sentry.js)</p>
<p>[91mfatal: not a git repository: &#x2F;src&#x2F;bt57w8kzzcjnpmscaemsqqq&#x2F;.git&#x2F;modules&#x2F;YYeTsFE</p>
<p>ç„¶è€Œåœ¨æœ¬åœ°å®Œå…¨æ˜¯æ— æ³•å¤ç°çš„ï¼Œæ•´ä¸ªç›®å½•æ ‘å¦‚ä¸‹ï¼Œæˆ‘ä¿è¯Docker Hubåœ¨buildæ—¶ä¹Ÿæœ‰åŒæ ·çš„ç»“æ„ï¼š</p>
<p>$ tree -L 2 -a</p>
<p>|â€“ .dockerignore<br>|â€“ .git<br>| |â€“ HEAD<br>| |â€“ branches<br>| |â€“ config<br>| |â€“ description<br>| |â€“ hooks<br>| |â€“ index<br>| |â€“ info<br>| |â€“ logs<br>| |â€“ modules<br>| |â€“ objects<br>| |â€“ packed-refs<br>| `â€“ refs<br>|â€“ .gitattributes<br>|â€“ .gitignore<br>|â€“ .gitmodules<br>|â€“ .travis.yml<br>|â€“ Dockerfile<br>|â€“ Makefile<br>|â€“ README.md<br>|â€“ YYeTsFE<br>| |â€“ .env.example<br>| |â€“ .git<br>| |â€“ .gitignore<br>| |â€“ .sentryclirc<br>| |â€“ README.md<br>| |â€“ package.json<br>| |â€“ public<br>| |â€“ scripts<br>| |â€“ src<br>| |â€“ tsconfig.json<br>| `â€“ yarn.lock</p>
<p>submoduleä¹Ÿæœ‰.gitï¼Œé¡¹ç›®æ ¹ç›®å½•ä¹Ÿæœ‰.gitï¼Œä¸ºä»€ä¹ˆå°±ä¼šå¤±è´¥å‘¢ï¼Ÿè¿›è¡Œäº†æ— æ•°æ¬¡å°è¯•ï¼Œè®©Docker Hubä¸€æ™šä¸Šç–¯ç‹‚æ„å»ºğŸ˜‚</p>
<p>åæ¥ç ”ç©¶äº†ä¸€ä¸‹ï¼Œsubmoduleçš„.gitå…¶å®æ˜¯ä¸€ä¸ªåˆ°çˆ¶ç›®å½•<code>.git/modules/ModuleName</code>çš„å¼•ç”¨ã€‚</p>
<p>~&#x2F;PycharmProjects&#x2F;YYeTsBot&#x2F;YYeTsFE (60c497b*) [02:06:51]<br>benny$ cat .git<br>gitdir: ..&#x2F;.git&#x2F;modules&#x2F;YYeTsFE</p>
<p>ç„¶è€Œåœ¨ Docker Hubä¸Šï¼Œè¿™ä¸ªç›®å½•æ˜¯ç»å¯¹è·¯å¾„ï¼Œå¹¶ä¸”æ˜¯hostçš„è·¯å¾„ğŸ¤¦â€â™‚ï¸ï¼š</p>
<p>gitdir: &#x2F;src&#x2F;brp47ykf7wlmztspk2mtpl8&#x2F;.git&#x2F;modules&#x2F;YYeTsFE</p>
<p>è¿™ä¸æŠ¥é”™å°±æ€ªäº†ã€‚</p>
<p>è§£å†³æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œåœ¨hookä¸­æ”¹æ‰<code>.git</code>æ–‡ä»¶ï¼Œæˆ–è€…åœ¨Dockerfileä¸­æ”¹æ‰ï¼Œè€ƒè™‘åˆ°æ— æ³•å®šä½åˆ°é—®é¢˜ç©¶ç«Ÿæ˜¯å‡ºåœ¨Docker Hubè¿˜æ˜¯gitï¼Œæˆ‘å°±é€‰æ‹©åœ¨Dockerfileä¸­æå•¦</p>
<p>RUN echo â€œgitdir: ..&#x2F;.git&#x2F;modules&#x2F;YYeTsFEâ€ &gt; .git</p>
<p>å°±è¿™ä¹ˆä¸€è¡Œä»£ç ï¼ŒèŠ±äº†æˆ‘ä¸¤ä¸‰ä¸ªå°æ—¶ğŸŒšğŸŒšğŸ¤¬</p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p>Docker Hub build hooks: <a target="_blank" rel="noopener" href="https://docs.docker.com/docker-hub/builds/advanced/">https://docs.docker.com/docker-hub/builds/advanced/</a></p>
<p>YYeTsBot: <a target="_blank" rel="noopener" href="https://github.com/tgbot-collection/YYeTsBot">https://github.com/tgbot-collection/YYeTsBot</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/19/dockerhub-submodule/index/" data-id="clhp7rtfx002as2qrcidr0r1z" data-title="Docker Hubä¸submoduleè¸©å‘å°è®°" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-pyinstaller-static-files/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/17/pyinstaller-static-files/index/" class="article-date">
  <time class="dt-published" datetime="2021-06-17T00:00:00.000Z" itemprop="datePublished">2021-06-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/program/">program</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/06/17/pyinstaller-static-files/index/">ä½¿ç”¨pyinstalleråµŒå…¥é™æ€èµ„æº</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>åœ¨ä½¿ç”¨Goæ—¶ï¼Œæˆ‘ç»å¸¸ä¼šç¾¡æ…•Goçš„å‡ºè‰²çš„é™æ€ç¼–è¯‘èƒ½åŠ›ï¼Œæ›´å…·ä½“çš„è¯´ï¼Œçº¯Goå†™çš„ç¨‹åºä¼šç¼–è¯‘æˆä¸€ä¸ªé›¶ä¾èµ–çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥éå¸¸è½»æ¾çš„åšåˆ°äº¤å‰ç¼–è¯‘ã€‚ç”šè‡³æ˜¯ï¼Œæˆ‘å¯ä»¥æŠŠä¸€äº›èµ„æºæ–‡ä»¶ä¹Ÿç¼–è¯‘åˆ°è¿™ä¸ªæ–‡ä»¶ä¸­ã€‚æ¯”å¦‚åœ¨ <a target="_blank" rel="noopener" href="https://github.com/tgbot-collection/DailyGakki">DailyGakki</a> ä¸­ï¼Œæˆ‘ä¾¿é€šè¿‡go-bindataæŠŠå›¾ç‰‡å¡åˆ°äº†äºŒè¿›åˆ¶æ–‡ä»¶ä¸­ã€‚æš‚ä¸”ä¸æè¿™æ ·å¯¹æ–‡ä»¶å¤§å°ã€å¯¹æ€§èƒ½æœ‰ä»€ä¹ˆå½±å“ï¼Œåªæœ‰ä¸€ä¸ªæ–‡ä»¶å°±èƒ½è¿‡å®ç°å…¨éƒ¨åŠŸèƒ½ï¼Œæ˜¯ä¸æ˜¯å¬èµ·æ¥å¾ˆæ£’ã€‚</p>
<p>é‚£ä¹ˆpythonèƒ½åšåˆ°è¿™ç‚¹å—ï¼Ÿå½“ç„¶ä¹Ÿæ˜¯èƒ½çš„å•¦ï¼Œåªæ˜¯ä¸æ˜¯åŸç”Ÿæ”¯æŒçš„å•¦ã€‚Pythonæœ‰ä¸€ä¸ªä¸œè¥¿å«åš pyinstallerï¼Œå®ƒä¼šæŠŠpythonè¿è¡Œæ—¶çš„ä¸œè¥¿éƒ½æ‰“åŒ…èµ·æ¥ï¼Œæ¯”å¦‚æˆ‘ä»¬æœ‰è¿™æ ·ä¸€ä¸ªç¨‹åº<code>test.py</code>ï¼š</p>
<p>import time</p>
<p>def main():<br>    print(â€œHello world at â€œ, time.asctime())</p>
<p>if __name__ &#x3D;&#x3D; â€˜__main__â€˜:<br>    main()</p>
<p>è¦æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶ï¼Œå°±ä¼šç”¨åˆ°<code>-F</code>å‚æ•°ï¼š</p>
<p>pyinstaller -F test.py</p>
<p>pyinstaller ä¼šç”Ÿæˆä¸€ä¸ª<code>spec</code>æ–‡ä»¶ï¼Œç„¶åä¼šåœ¨<code>dist</code>ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ª<code>test</code>ï¼ˆå¯¹åº”windowså°±æ˜¯<code>test.exe</code>ï¼‰ï¼Œç›´æ¥è¿è¡Œè¿™ä¸ªexeå°±å¥½äº†ã€‚æŠŠè¿™ä¸ªexeæ‹·è´åˆ°åŒå¹³å°å…¶ä»–ç”µè„‘ä¸Šï¼Œä¹Ÿæ˜¯å¯ä»¥è¿è¡Œçš„ã€‚</p>
<p>å½“ç„¶ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåˆ«çœ‹è¿™é‡Œä¹Ÿç›´æ¥ç”Ÿæˆäº†äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä½†æ˜¯è¿™ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶å¹¶ä¸æ˜¯åŠ å¯†çš„å“¦ï¼Œç”¨ä¸€äº›å·¥å…·å¯ä»¥å¾ˆå®¹æ˜“çš„æ‰¾åˆ°æºä»£ç çš„ã€‚</p>
<h2 id="ModuleNotFoundError"><a href="#ModuleNotFoundError" class="headerlink" title="ModuleNotFoundError"></a>ModuleNotFoundError</h2><p>ç”±äºPythonæ˜¯åŠ¨æ€è¯­è¨€ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šåœ¨è¿è¡Œæ—¶ä½¿ç”¨<code>importlib</code>æˆ–è€…<code>__import__</code>æ¥importä¸€äº›æ¨¡å—ï¼ŒèŠ±å¼æ“ä½œã€‚æ¯”å¦‚æœ‰å¦‚ä¸‹ä»£ç ï¼š</p>
<p># test_lib.py<br>def even():<br>    print(0, 2, 4, 6, 8)</p>
<p>def odd():<br>    print(1, 3, 5, 7, 9)</p>
<h1 id="test-py"><a href="#test-py" class="headerlink" title="test.py"></a>test.py</h1><p>import time<br>import importlib</p>
<p>def main():<br>    module &#x3D; importlib.import_module(â€œtest_libâ€)<br>    if time.localtime().tm_sec % 2 &#x3D;&#x3D; 0:<br>        func_name &#x3D; â€œevenâ€<br>    else:<br>        func_name &#x3D; â€œoddâ€</p>
<pre><code>fun = getattr(module, func\_name)
fun()
</code></pre>
<p>if __name__ &#x3D;&#x3D; â€˜__main__â€˜:<br>    main()</p>
<p>æ²¡é—®é¢˜å§ï¼ŒåŠ¨æ€å¯¼å…¥moduleå˜›ï¼Œå¸¸è§„æ“ä½œ</p>
<p>â¯ python3 test.py â<br>1 3 5 7 9</p>
<p>å½“æˆ‘ä»¬ä½¿ç”¨pyinstalleræ—¶æ˜¯ä¼šæ— æŠ¥é”™å®Œæˆçš„ï¼Œä½†æ˜¯å½“æˆ‘ä»¬è¿è¡Œæ—¶ï¼š</p>
<p>â¯ dist&#x2F;test<br>Traceback (most recent call last):<br>File â€œtest.pyâ€, line 26, in <module><br>main()<br>File â€œtest.pyâ€, line 15, in main<br>module &#x3D; importlib.import_module(â€œtest_libâ€)<br>File â€œimportlib&#x2F;__init__.pyâ€, line 127, in import_module<br>File â€œ&lt;frozen importlib._bootstrap&gt;â€, line 1030, in _gcd_import<br>File â€œ&lt;frozen importlib._bootstrap&gt;â€, line 1007, in _find_and_load<br>File â€œ&lt;frozen importlib._bootstrap&gt;â€, line 984, in _find_and_load_unlocked<br>ModuleNotFoundError: No module named â€˜test_libâ€™<br>[91513] Failed to execute script test</module></p>
<p>æˆ‘ä»¬ä¼šå‘ç°æ— æ³•æ‰§è¡Œ</p>
<p>å…¶å®åŸå› å¾ˆç®€å•å•¦ã€‚pyinstalleråœ¨build binaryæ—¶ï¼Œä¼šæœ‰ä¸€ä¸ªanalysisçš„æ­¥éª¤å»åˆ†æéƒ½æœ‰å“ªäº›moduleï¼Œä½¿ç”¨<code>__import__</code>å’Œ<code>importlib</code>ï¼Œç”šè‡³æ˜¯<code>exec</code>ã€<code>eval</code>çš„éƒ½æ˜¯æ— æ³•è¢«æ£€æµ‹åˆ°çš„ï¼Œæ‰€ä»¥åœ¨è¿è¡Œæ—¶å°±ä¼šæŠ¥é”™å•¦ã€‚æƒ³è¦è§£å†³ä¹Ÿå¾ˆç®€å•ï¼Œ<code>hidden-imports</code> å³å¯ï¼š</p>
<p>pyinstaller -F â€“hidden-import&#x3D;test_lib test.py</p>
<p>â¯ dist&#x2F;test<br>1 3 5 7 9</p>
<p>è¿™æ—¶å°±ä¼šå‘ç°æ²¡é—®é¢˜å•¦ã€‚</p>
<p>å½“ç„¶å•¦ï¼Œè¿™ä¸ªå‚æ•°ä¹Ÿå¯ä»¥å†™åœ¨é‚£ä¸ªspecä¸­çš„ï¼Œåé¢ä¼šä»‹ç»çš„å“¦ã€‚</p>
<h2 id="åµŒå…¥èµ„æºæ–‡ä»¶"><a href="#åµŒå…¥èµ„æºæ–‡ä»¶" class="headerlink" title="åµŒå…¥èµ„æºæ–‡ä»¶"></a>åµŒå…¥èµ„æºæ–‡ä»¶</h2><p>å¦‚æœæˆ‘æƒ³æŠŠä¸€äº›èµ„æºæ–‡ä»¶ï¼Œæ¯”å¦‚htmlã€cssï¼Œç”šè‡³æ˜¯sqliteåµŒå…¥åˆ°è¿™ä¸ªbinaryä¸­ï¼Œè¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ</p>
<p>pyinstalleræä¾›äº†ä¸€ä¸ªå«åš data çš„ä¸œè¥¿ï¼Œå¯ä»¥ç”¨äºåµŒå…¥ä»»ä½•ä¸œè¥¿å“¦ã€‚å½“ç„¶äº†ä½ è¦æ˜¯æŠŠä¸€æ®µç”µå½±æ”¾è¿›å»ï¼Œé‚£å’±ä¹Ÿæ²¡ä»€ä¹ˆæ„è§ï¼Œå°±è¿è¡Œæ—¶æ…¢å‘—ï¼Œæ¯•ç«Ÿè¿˜æ˜¯è¦è§£å‹ç¼©çš„ã€‚</p>
<p>è€ƒè™‘å¦‚ä¸‹ä»£ç ï¼Œ<code>text.txt</code>æ˜¯åŒçº§ç›®å½•çš„ä¸€ä¸ªæ™®é€šæ–‡æœ¬æ–‡ä»¶</p>
<p>with open(â€œtext.txtâ€) as f:<br>    text &#x3D; f.read()</p>
<p>print(text)</p>
<p>â¯ .&#x2F;test_bin<br>Traceback (most recent call last):<br>File â€œtest_bin.pyâ€, line 10, in <module><br>FileNotFoundError: [Errno 2] No such file or directory: â€˜text.txtâ€™<br>[98107] Failed to execute script test_bin</module></p>
<p>æˆ‘ä»¬ä¼šå‘ç°ï¼Œå“å‘€ï¼Œæ–‡ä»¶ä¸åœ¨ï¼Œæ‰¾ä¸åˆ°ï½</p>
<p>é‚£ä¹ˆä¸€ç§æ–¹æ³•æ˜¯ï¼ŒbinaryåŒçº§ç›®å½•å¡ä¸€ä¸ª<code>text.txt</code>ï¼Œè¿™ä¸ªæ–¹æ³•å°±å¾ˆç®€å•äº†ã€‚å¦å¤–ä¸€ç§åšæ³•æ˜¯æˆ‘ä»¬æŠŠè¿™ä¸ªtxtå¡è¿›binaryé‡Œï¼</p>
<p>å‘½ä»¤è¡Œå‚æ•°ä½¿ç”¨ <code>--add-data</code>ï¼ŒåŒæ—¶æˆ‘ä»¬éœ€è¦å°æ”¹ä¸€ä¸‹ä»£ç æ¥ä½¿ç”¨ç»å¯¹è·¯å¾„</p>
<p>import os</p>
<p>root_path &#x3D; os.path.dirname(__file__)<br>file_path &#x3D; os.path.join(root_path, â€œtext.txtâ€)<br>with open(file_path) as f:<br>    text &#x3D; f.read()</p>
<p>print(text)</p>
<h1 id="ç„¶åè¿™æ ·å“¦"><a href="#ç„¶åè¿™æ ·å“¦" class="headerlink" title="ç„¶åè¿™æ ·å“¦"></a>ç„¶åè¿™æ ·å“¦</h1><p>pyinstaller -F â€“add-data â€œtext.txt:.â€ test_bin.py</p>
<p><code>--add-data</code>çš„å‚æ•°æ ¼å¼æ˜¯ <code>src:dst</code>ï¼Œ<code>.</code>çš„å«ä¹‰æ˜¯ä¸pyæ–‡ä»¶åŒçº§ï¼Œå¦‚æœä½ çš„è„šæœ¬æ˜¯æ‰“å¼€çš„<code>test/test.txt</code>ï¼Œé‚£ä¹ˆå°±è¦ <code>test/test.txt:test/</code>å“¦ã€‚</p>
<p>benny@Bennyã®MBP:~&#x2F;PycharmProjects&#x2F;untitled&#x2F;dist $ .&#x2F;test_bin<br>this is a text file 1234</p>
<p>æ²¡é—®é¢˜å“¦ã€‚å½“ç„¶å•¦ï¼Œåªè¦ä½ æƒ³ç©ï¼Œå¯ä»¥ç”¨<code>*</code>åšé€šé…ç¬¦çš„å“¦ã€‚</p>
<h2 id="specæ–‡ä»¶"><a href="#specæ–‡ä»¶" class="headerlink" title="specæ–‡ä»¶"></a>specæ–‡ä»¶</h2><p>è™½ç„¶è¯´ï¼Œåœ¨å‘½ä»¤è¡Œä¸­åŠ å‚æ•°æ€»æ˜¯èƒ½å¤Ÿè§£å†³æˆ‘ä»¬çš„é—®é¢˜ï¼Œä½†æ˜¯è¿™æ ·æ¯æ¬¡è¾“å…¥é•¿é•¿çš„å‘½ä»¤ä¹ŸçœŸçš„æ˜¯å¤ªç´¯å•¦ã€‚æœ‰æ²¡æœ‰æ›´ç®€å•çš„æ–¹æ³•å‘¢ï¼Ÿå½“ç„¶æœ‰å•¦ã€‚æ¯”å¦‚ä½ çœ‹æ˜¯ä¸æ˜¯æœ‰ä¸€ä¸ªtest.spec?æ¯æ¬¡åœ¨ä½ è¿è¡Œ <code>pyinstaller xxx.py</code> æ—¶éƒ½ä¼šç”Ÿæˆä¸€ä¸ªè¿™æ ·çš„æ–‡ä»¶ã€‚åœ¨è¿™ä¸ªspecä¸­ä¼šæœ‰dataså’Œhidenimportçš„é€‰é¡¹ï¼Œé‚£å°±ç®€å•å•¦ï¼</p>
<p>a &#x3D; Analysis([â€˜test.pyâ€™],<br>pathex&#x3D;[â€˜&#x2F;Users&#x2F;benny&#x2F;PycharmProjects&#x2F;untitledâ€™],<br>binaries&#x3D;[],<br>datas&#x3D;[<br>(â€˜text.txtâ€™, â€˜.â€™),<br>],<br>hiddenimports&#x3D;[â€œtest_libâ€],<br>hookspath&#x3D;[],<br>runtime_hooks&#x3D;[],<br>excludes&#x3D;[],<br>win_no_prefer_redirects&#x3D;False,<br>win_private_assemblies&#x3D;False,<br>cipher&#x3D;block_cipher,<br>noarchive&#x3D;False)</p>
<p>[v_blue]åæ§½ä¸€ä¸‹ï¼Œdataä¸æ˜¯datumçš„å¤æ•°å½¢å¼å˜›ï¼Œè¿™ä¸ªdatasæ˜¯ä»€ä¹ˆé¬¼å“Ÿå“ˆå“ˆå“ˆ[&#x2F;v_blue] æ²¡é—®é¢˜ï¼Œè®©æˆ‘ä»¬é‡æ–°è¿è¡Œä¸€æ¬¡ï¼è¯·è®°å¾—è¦ç”¨è¿™ä¸ªspecæ–‡ä»¶è€Œä¸æ˜¯pyæ–‡ä»¶å“¦ã€‚</p>
<p>pyinstaller -F test.spec</p>
<p>â¯ .&#x2F;test<br>0 2 4 6 8<br>this is a text file 1234</p>
<p>[benny@Bennyã®MBP] ~&#x2F;PycharmProjects&#x2F;untitled&#x2F;dist<br>â¯ .&#x2F;test<br>1 3 5 7 9<br>this is a text file 1234</p>
<p>ä¸€ç‚¹é—®é¢˜éƒ½æ²¡æœ‰å‘ï¼è¿™ä¸ªdataæˆ‘ä»¬ä¹Ÿå¯ä»¥å¼„å¾—å¾ˆå¤æ‚ï¼Œæ¯”å¦‚è¿™æ ·çš„</p>
<p>[<br>  ( â€˜src&#x2F;README.txtâ€™, â€˜.â€™ ),<br>  ( â€˜&#x2F;mygame&#x2F;dataâ€™, â€˜dataâ€™ ),<br>  ( â€˜&#x2F;mygame&#x2F;sfx&#x2F;*.mp3â€™, â€˜sfxâ€™ )<br>]</p>
<h2 id="ä¸€äº›åè¯"><a href="#ä¸€äº›åè¯" class="headerlink" title="ä¸€äº›åè¯"></a>ä¸€äº›åè¯</h2><p>æˆ‘ä»¬å¯ä»¥ç”¨datasé€‰é¡¹åµŒå…¥æ–‡ä»¶ï¼Œæˆ‘ä»¬å…¶å®ä¹Ÿå¯ä»¥ç”¨binariesé€‰é¡¹åµŒå…¥ä¸€äº›dll&#x2F;so&#x2F;dylibæ–‡ä»¶ã€‚æ¯”å¦‚è¯´ï¼Œæˆ‘å¯ä»¥ç”¨msfé‚£ä¸€å¥—ç”Ÿæˆä¸€ä¸ªåå¼¹çš„dllï¼Œç„¶åâ€¦â€¦</p>
<p>binaries&#x3D;[ ( â€˜reverse_shell.dllâ€™, â€˜.â€™ ) ]</p>
<p>ğŸ¤£ğŸ¤£ğŸ¤£ğŸ¤£</p>
<h2 id="å®è·µ"><a href="#å®è·µ" class="headerlink" title="å®è·µ"></a>å®è·µ</h2><p>æˆ‘çš„YYeTsWebå°±ä½¿ç”¨è¿™ç§æ–¹å¼åµŒå…¥äº†å¾ˆå¤šhtml&#x2F;css&#x2F;jsï¼Œä»¥åŠSQLiteæ•°æ®åº“ã€‚ä¹Ÿå°±æ˜¯åªè¦ä¸‹è½½å›æ¥è¿™ä¸ªæ–‡ä»¶ï¼ŒåŒå‡»ä¸€ä¸‹ï¼Œä½ çš„æœ¬åœ°å°±å¯ä»¥æœ‰ä¸€ä¸ªèƒ½å¤Ÿè¿è¡Œçš„yyetså•¦ï¼åˆ«æ€ªæˆ‘æ²¡è¯´ï¼Œè¿è¡Œé™Œç”Ÿçš„exeæ–‡ä»¶æ˜¯å¾ˆå±é™©çš„ï¼Œè¯´ä¸å‡†å°±æœ‰äººä¸¢äº†ä¸€ä¸ªå¥‡æ€ªçš„dllæ–‡ä»¶è¿›å»ã€‚ä¸è¿‡æˆ‘æ²¡æœ‰è¿™ä¹ˆåšå•¦ï¼Œä¿¡ä¸ä¿¡ç”±ä½ å¥½äº†ã€‚</p>
<p>yyetswebä¾èµ–ä¸€äº›ç¯å¢ƒå˜é‡ï¼Œæ‰€ä»¥ç›´æ¥åŒå‡»<code>start_windows.bat</code>å°±å¥½äº†ï¼›macOSç”¨æˆ·å¯ä»¥ç”¨<code>start_unix.sh</code>ã€‚è‡³äºLinuxç”¨æˆ·ï¼Œä½ éƒ½ç”¨Linuxäº†ï¼Œè¿˜ç”¨å¾—ç€æˆ‘å¼„çš„å°ç™½ä¸€é”®å¯åŠ¨ï¼Ÿè‡ªå·±æå»ã€‚</p>
<p><img src="/images/2021061722350131.jpeg"></p>
<p>è¿™ä¸ªexeå¯èƒ½å¯åŠ¨ä¼šæ¯”è¾ƒæ…¢ï¼Œboostrapè¿‡ç¨‹è§£å‹ç¼©æ¯”è¾ƒè€—æ—¶ï¼Œæ¯•ç«Ÿæ˜¯ä¼šå†’å‡ºæ¥ä¸€ä¸ªå‡ ç™¾å…†çš„SQLiteæ–‡ä»¶å‘¢ã€‚macOSä¸Šç”±äº<a target="_blank" rel="noopener" href="https://support.apple.com/en-us/HT202491">GateKeeper</a>æœºåˆ¶çš„å­˜åœ¨ï¼Œä¼°è®¡å°±æ›´æ…¢äº†å§ğŸ™„ï¸</p>
<p>è¿è¡Œæ•ˆæœï¼Œå·æ‡’ï¼Œæˆ‘å°±ç›´æ¥ç”¨äº†æ—§ç‰ˆé¡µé¢ï¼Œæ²¡æœ‰æŠŠæ–°ç‰ˆä¹Ÿæè¿‡æ¥ã€‚</p>
<p><img src="/images/2021061722350312.jpeg"></p>
<p>èµ„æºé¡µé¢ä¹Ÿæ˜¯æ—§ç‰ˆçš„</p>
<p><img src="/images/2021061722350345.jpeg"></p>
<p>åæ­£æ€ä¹ˆè¯´ï¼Œå¯ä»¥ç¦»çº¿ä½¿ç”¨äº†ï¼Œå“ªå¤©ä¸‡ä¸€ç½‘ç«™æŒ‚äº†ï¼Œæ‰‹é‡Œæœ‰è¿™ä¸ªæ–‡ä»¶ä¹Ÿä¸æ…Œå‘€ï½</p>
<p>ä¸‹è½½åœ°å€å¯ä»¥çœ‹ <a target="_blank" rel="noopener" href="https://github.com/tgbot-collection/YYeTsBot/releases/tag/2021-06-17">GitHub Release</a></p>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p>Using Spec Files <a target="_blank" rel="noopener" href="https://pyinstaller.readthedocs.io/en/stable/spec-files.html">https://pyinstaller.readthedocs.io/en/stable/spec-files.html</a></p>
<p>When Things Go Wrong <a target="_blank" rel="noopener" href="https://pyinstaller.readthedocs.io/en/stable/when-things-go-wrong.html">https://pyinstaller.readthedocs.io/en/stable/when-things-go-wrong.html</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/17/pyinstaller-static-files/index/" data-id="clhp7rti8006vs2qrcp3678bk" data-title="ä½¿ç”¨pyinstalleråµŒå…¥é™æ€èµ„æº" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-aeru/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/06/05/aeru/index/" class="article-date">
  <time class="dt-published" datetime="2021-06-05T00:00:00.000Z" itemprop="datePublished">2021-06-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/justsay/">justsay</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/06/05/aeru/index/">ã¾ãŸä¼šãˆã‚‹</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>åœ¨æ¤…å­ä¸Šåäº†åŠä¸ªå¤šå°æ—¶ï¼Œä¹Ÿä¸çŸ¥é“æƒ³è¦å†™ç‚¹ä»€ä¹ˆï¼Œä½†æ˜¯åˆæ€»è§‰å¾—è¦å†™ç‚¹ä»€ä¹ˆï¼Œæ˜æ˜è„‘æµ·é‡Œæœ‰ä¸‡åƒæ€ç»ªï¼Œä½†æ˜¯å´ä¸çŸ¥é“è¯¥ä»ä½•ä¸‹ç¬”ã€‚å‡ å¹´ä¹‹å‰ä¹Ÿæœ‰è¿‡ç±»ä¼¼çš„æ„Ÿè§‰ï¼Œä½†æ˜¯å®Œå…¨ä¸è®°å¾—åæ¥æ˜¯æ€ä¹ˆå¥½èµ·æ¥çš„ã€‚</p>
<p>ä¸è¿‡æ—¢ç„¶å¦‚æ­¤ï¼Œæ—¢ç„¶å·²ç»åœ¨è¿™åäº†åŠä¸ªå¤šå°æ—¶ï¼Œé‚£ä¹Ÿå°±æŠŠè‡ªå·±æœ€è¿‘çš„æ‰€æ€æ‰€æƒ³å…¨éƒ¨è®°å½•ä¸‹æ¥å§ã€‚æ²¡æœ‰é€»è¾‘å°±æ²¡æœ‰é€»è¾‘å§ï¼Œæƒ³åˆ°å“ªè¯´å“ªã€‚è¯´åˆ°åº•ï¼Œè¿™ä¸ªåšå®¢åªæ˜¯æˆ‘ä¸ªäººçš„ä¸€ä¸ªå°å¤©åœ°ï¼Œæ˜¯ç”¨æ¥ä¸ºæˆ‘è‡ªå·±åšè®°å½•çš„ï¼Œæˆ‘åªæ˜¯è§‰å¾—å·®ä¸å¤šåˆ°äº†é˜¶æ®µæ€§è®°å½•çš„æ—¶å€™ã€‚</p>
<p>é¦–å…ˆå‘¢ï¼Œæˆ‘è§‰å¾—è¦å…ˆä»è‡ªèº«çš„èº«å¿ƒçŠ¶æ€è¯´èµ·ã€‚åˆ°ä¸Šæµ·å·²ç»ä¸€å¹´å¤šäº†ï¼Œä¹ŸåŒæ ·ç»™è‡ªå·±ç‹¬å±…ç”Ÿæ´»å¢åŠ äº†ä¸€å¹´ã€‚</p>
<p>ä¸Šæµ·è¿™åº§åŸå¸‚ï¼Œæ€ä¹ˆè¯´å‘¢ï¼Œæˆ‘å¾ˆå–œæ¬¢å‘€ï¼Œæˆ‘å–œæ¬¢è¿™ç§ç¹åï¼Œå½“ç„¶æœ€ä¸»è¦çš„è¿˜æ˜¯åœ¨ä¸Šæµ·æ”¶å…¥æ¯”è¾ƒé«˜ï¼Œä¹Ÿåœ¨åšç€è‡ªå·±æ“…é•¿çš„å·¥ä½œã€‚åœ¨ä¸Šæµ·æˆ‘å‡ ä¹æ²¡æœ‰æœ‹å‹ï¼Œæ‰€æœ‰çš„æœ‹å‹è¿˜éƒ½æ˜¯åœ¨æ¥åˆ°ä¸Šæµ·ä¹‹å‰è®¤è¯†çš„ã€‚æˆ‘ä»æœªæƒ³è¿‡å»äº¤æœ‹å‹ï¼Œå› ä¸ºæˆ‘å¾ˆæ…¢çƒ­ï¼Œä¸å¤ªå–œæ¬¢è®¤è¯†æ–°çš„äººï¼Œå¯¹äºæˆ‘è€Œè¨€äº²å¯†å…³ç³»çš„å»ºç«‹ä¹Ÿæ˜¯å¾ˆå›°éš¾çš„äº‹æƒ…ï¼Œå› æ­¤ä¹Ÿä¸å¯èƒ½å–œæ¬¢ä¸Šè°ã€‚è¿™åº”è¯¥ç®—æ˜¯ä¸€ç§ç¤¾äº¤ææƒ§å§ã€‚</p>
<p>æˆ‘ç°åœ¨å¤§æ¦‚å¤„äºä¸€ç§â€œä½æ¬²æœ›â€çš„ç”Ÿæ´»çŠ¶æ€ï¼Œæ¯ä¸ªæœˆçš„æ”¯å‡ºä¸­ï¼Œæˆ¿ç§Ÿæ°´ç”µå æ®äº†ä¸€åŠï¼Œå‰©ä¸‹å‡ ä¹å°±æ˜¯æ—¥å¸¸åƒå–å’Œè¶…å¸‚äº†ã€‚å³ä½¿æ˜¯å»è¶…å¸‚ï¼Œæˆ‘ä¹°çš„ä¸œè¥¿ä¹Ÿæ˜¯éå¸¸å›ºå®šçš„ï¼Œæˆ‘ä¸€å®šä¼šä¹°ç‰›å¥¶ï¼Œä¸€å®šä¼šä¹°é…¸å¥¶ï¼Œç„¶åå†ä¹°ç‚¹åº”å­£æ°´æœï¼Œä¼‘é—²é›¶é£Ÿä¹Ÿå‡ ä¹åªä¼šæœ‰ç“œå­ã€‚</p>
<p>åœ¨æ­£å¸¸æ²¡æœ‰æ„å¤–çš„æƒ…å†µä¸‹ï¼Œæˆ‘çš„æ”¯å‡ºæ¯”ä¾‹å·®ä¸å¤šå°±æ˜¯è¿™æ ·å›ºå®šï¼Œå½“ç„¶æœ‰æ—¶ä¼šæœ‰æ„å¤–æƒ…å†µçš„ã€‚æ¯”å¦‚æ¯å¹´4æœˆæˆ‘ä¼šæ”¯å‡º$199ï¼Œç”¨äºç»­è´¹JetBrainså…¨å®¶æ¡¶ï¼›æ¯å¹´æ€»æœ‰ä¸€æ®µæ—¶é—´æ˜¯è¦ä¹°æœºç¥¨çš„ï¼Œè¯´ä¸å‡†è¿˜ä¼šè¢«èˆªç©ºå…¬å¸å½“å¤©å–æ¶ˆèˆªç­ï¼Œç„¶ååªèƒ½åŠ é’±ä¹°å½“å¤©æœºç¥¨ï¼›è¯´ä¸å‡†æ”¹å¤©æ‰‹æœºä¸¢äº†åäº†ï¼Œæ€»æ˜¯è¦èŠ±é’±ä¹°æ–°çš„ã€‚</p>
<p>è¯´åˆ°æ”¯å‡ºï¼Œé‚£å°±ä¸€å®šè¦æåˆ°æ”¶å…¥ã€‚æˆ‘çš„æ”¶å…¥å˜›ï¼Œç»å¤§éƒ¨åˆ†è¿˜æ˜¯è¦é å·¥èµ„çš„ã€‚è¿˜æœ‰ä¸€å°éƒ¨åˆ†æ˜¯é ç€å–„è‰¯ç½‘å‹çš„æèµ ï¼Œæ„Ÿè°¢ä½ ä»¬çš„æ”¯æŒå‘€ï¼Œæˆ‘ä¼šç»§ç»­æŠŠäººäººå½±è§†çš„é—äº§ç»´æŠ¤ä¸‹å»çš„ã€‚</p>
<p>æˆ‘ä¼¼ä¹å·²ç»æ²¡ä»€ä¹ˆå¤ªå¤§çš„ç‰©è´¨æ¬²æœ›äº†ã€‚æˆ‘å¯¹åƒçš„ä¸æ„Ÿå…´è¶£ï¼Œæ¯å¤©åªè¦èƒ½å¡«é¥±è‚šå­èƒ½å¤Ÿè®©æˆ‘ç”Ÿå­˜ä¸‹å»å°±å¥½ï¼›æˆ‘å¯¹ç”µå­äº§å“ä¹Ÿæ²¡ä»€ä¹ˆå…´è¶£äº†ï¼Œä»€ä¹ˆéƒ½æœ‰ï¼Œä¹Ÿä¸éœ€è¦ä¹°æ–°çš„ï¼›æˆ‘å¯¹ä¹°æ¸¸æˆä¹Ÿæ²¡å…´è¶£ï¼Œè¿™è¦å¤šäºäº†Xbox Game Pass Ultimateï¼Œç©æ¸¸æˆè¿˜æ˜¯æœ‰äº›å…´è¶£çš„ï¼›å¤©å‘æˆ‘éƒ½ä¸ä¹°è¡£æœé‹å­äº†ã€‚æ„Ÿè§‰å¯¹ä»€ä¹ˆéƒ½æä¸èµ·å…´è¶£ï¼Œä¹Ÿå°±å¯¹ITï¼Œè¿˜ä¿æŒç€ä¸€äº›å…´è¶£å’Œçƒ­æ•å§ã€‚</p>
<p>æœ€è¿‘æ˜¯ä¸æ˜¯æœ‰ä¸€ä¸ªè¯â€œèººå¹³â€ç‰¹åˆ«ç«ï¼Ÿæˆ‘è¿™ç®—ä¸ç®—ä¹Ÿèººå¹³äº†ï¼Ÿæ²¡æœ‰ä»»ä½•è´­ä¹°æ¶ˆè´¹æ¬²æœ›ï¼Œä¸ä¹°è½¦ï¼Œä¸ç»“å©šï¼Œä¸ä¹°æˆ¿ï¼Œä¹Ÿä¸ç”Ÿå¨ƒã€‚èººå¹³å¯èƒ½æ›´æœ‰ç‚¹åƒç ´ç½å­ç ´æ‘”çš„æ ·å­ï¼Œä¹Ÿè®¸æˆ‘è¿™æ›´åƒæ˜¯â€œæ–­èˆç¦»â€ï¼Œæ–©æ–­å¯¹ç‰©è´¨ç”Ÿæ´»è¿‡å¤šçš„æ¬²æœ›ï¼Œè¿‡ç€ç®€å•æ¸…çˆ½çš„ç”Ÿæ´»ã€‚</p>
<p>ç”šè‡³åœ¨æ¯æ¬¡ä¹°è®¡åˆ’ä¹‹å¤–çš„ä¸œè¥¿çš„æ—¶å€™ï¼Œæˆ‘éƒ½åœ¨æƒ³ï¼Œæˆ‘çœŸçš„éœ€è¦è¿™ä¸ªä¸œè¥¿å—ï¼Œè¿™ä¸ªä¸œè¥¿é€‚åˆæˆ‘å—ï¼Ÿå‡å¦‚ç»™æˆ‘ç­‰å€¼çš„é’±ï¼Œå’Œè¿™ä¸ªä¸œè¥¿ï¼Œæˆ‘é€‰æ‹©å“ªä¸ªï¼Ÿ</p>
<p>å…¶å®å‘€æˆ‘ä¹Ÿæƒ³ä¹°è½¦ï¼Œè¿™æ ·æˆ‘çš„æ´»åŠ¨åŠå¾„å°±ä¼šæ‰©å¤§å¾ˆå¤§ï¼Œæˆ‘å¯ä»¥ä¸ç”¨å»å“ªå…¨é è‡ªè¡Œè½¦å’Œå…¬å…±äº¤é€šäº†ï¼Œå°½ç®¡ä¹°ä¸ªä»£æ­¥è½¦ä¹°èœè½¦å¯¹äºæˆ‘æ¥è¯´è¿˜æ˜¯æ²¡é—®é¢˜çš„ï¼Œä½†æ˜¯ç°é˜¶æ®µè§‰å¾—è¿™æš‚æ—¶æ²¡å¤ªå¤§ç”¨å¤„ï¼›æˆ‘ä¹Ÿæƒ³ç»“å©šå‘€ï¼Œå¯æ˜¯è€å©†å·²ç»å«ç»™äº†æ˜Ÿé‡æºï¼Œå¯æ˜¯è°æ„¿æ„å«ç»™æˆ‘å‘€ï¼›æˆ‘ä¹Ÿæƒ³ä¹°æˆ¿å‘€ï¼Œæœ‰å±äºè‡ªå·±çš„çœŸæ­£çš„ä½å¤„æ˜¯å¾ˆå¥½çš„ä¸€ä»¶äº‹æƒ…ï¼Œå¯æ˜¯â€¦â€¦è¿™ä¸ªæˆ‘æ˜¯çœŸçš„ä¹°ä¸èµ·å‘€ï¼Œæƒ³æƒ³è‡ªå·±èƒŒè´Ÿç€å‡ ç™¾ä¸‡çš„è´·æ¬¾ï¼Œè¿˜è¦ç»´æŒæ”¶å…¥å‡ åå¹´ä¸å˜ä½ï¼Œæ¯å¤©åªæœ‰åå…ƒé›¶èŠ±é’±ï¼Œå“ã€‚</p>
<p>æ‰€ä»¥è¿™äº›éƒ½ä¸è¦æƒ³äº†å•¦ã€‚ä½æ¬²æœ›ä¸æ˜¯æ²¡æœ‰æ¬²æœ›ï¼Œæœ‰æ—¶é‚£äº›â€œå°ç¡®å¹¸â€ä¹Ÿè¶³å¤Ÿæ»¡è¶³æ¬²æœ›äº†ã€‚åƒé¥±äº†å°±å¯ä»¥å¾ˆå¹¸ç¦ï¼Œæ‰€ä»¥åƒä»€ä¹ˆéƒ½å¯ä»¥å“¦ã€‚åŠªåŠ›æŠŠå·¥ä½œåšå¥½ï¼Œé¢†åˆ°è–ªæ°´ï¼Œå°±åƒè¿™æ ·ã€‚</p>
<p>æœ¬æ¥è¿˜æƒ³ç€æœ‰ç©ºå»è±†ç“£èººå¹³å°ç»„çœ‹çœ‹ï¼Œè¿™ä¸‹å¯å¥½ï¼Œæ²¡å¾—çœ‹äº†ã€‚ã€Œæˆ‘ä»¬ä¸è§£å†³é—®é¢˜ï¼Œæˆ‘ä»¬åªè§£å†³æå‡ºé—®é¢˜çš„äººã€</p>
<blockquote>
<p>æ„Ÿè§‰å°±åƒæ˜¯ï¼Œã€Œä½ çœ‹ç€èº«è¾¹çš„äººéƒ½åœ¨å¾€ä¸€ä¸ªæ–¹å‘èµ°ï¼Œè‡ªå·±å´ç«™åœ¨åŸåœ°ï¼Œç”šè‡³è¦èµ°åæ–¹å‘ã€‚ä½ çœ‹ç€èº«è¾¹çš„äººéƒ½åœ¨åšæŸä»¶äº‹æƒ…ï¼Œå¯æ˜¯ä½ å´æ²¡æœ‰åšè¿™ä»¶äº‹æƒ…çš„æƒ³æ³•ï¼Œç”šè‡³éƒ½ä¸åšã€‚å°±ä¼šè§‰å¾—ï¼Œå­¤ç‹¬ï¼Œè§‰å¾—è‡ªå·±å¥½åƒè¢«ä¸–ç•Œé—å¼ƒäº†ä¸€æ ·æ ¼æ ¼ä¸å…¥ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œå…¶ä»–äººèµ°ä¸€ä¸ªæ–¹å‘ï¼Œæ˜¯å……æ»¡ä¿¡å¿ƒçš„èµ°ä¸‹å»çš„ï¼Œæ˜¯æœ‰ç›®æ ‡çš„ã€‚ä½†æ˜¯åƒæˆ‘è¿™ç§ç•™åœ¨åŸåœ°ï¼Œç”šè‡³åæ–¹å‘ï¼Œå…¶å®å¹¶ä¸çŸ¥é“æ¥ä¸‹æ¥è¦å»å‘ä½•å¤„ã€‚æ„Ÿè§‰èº«è¾¹çš„äººéƒ½æ‰¾åˆ°äº†è‡ªå·±çš„æ–¹å‘ï¼Œä½†æ˜¯æˆ‘å´ä¸çŸ¥é“è‡ªå·±çš„æ–¹å‘æ˜¯ä»€ä¹ˆï¼Œæˆ–è€…æ˜çŸ¥é“è‡ªå·±çš„æ–¹å‘æ˜¯ä»€ä¹ˆï¼Œä½†æ˜¯çœ¼å‰éš”äº†å‡ åº§å±±ï¼Œæ„Ÿåˆ°åŠ›ä¸ä»å¿ƒã€</p>
<p>è¿™ä¸€åˆ‡ï¼Œåªè¦å®‰æ…°è‡ªå·±ã€Œå­¤ç‹¬æ˜¯ç”Ÿè€Œä¸ºäººçš„å®¿å‘½ã€å°±å¥½äº†</p>
<p>æˆ‘ä¸€ä¸ªäººä¹Ÿå¯ä»¥æ´»çš„å¾ˆå¥½ï¼Œæˆ‘å°±æ˜¯ä¸æƒ³é¡ºæµè€Œä¸‹ã€‚</p>
<p>æˆ‘æ˜¯æ˜æ˜æœ‰è¯å¯æ•‘çš„ï¼Œå¯æ˜¯æˆ‘å´é€‰æ‹©æ”¾å¼ƒæ²»ç–—ã€‚</p>
<p>åªè¦æˆ‘æŠŠæˆ‘å®¶é‡Œçš„é’±æ‹¿ä¸Šï¼Œå†åŠ ä¸Šè‡ªå·±çš„ç§¯è“„ï¼Œä¹°æˆ¿è¿™ä»¶äº‹æƒ…ï¼Œé—®é¢˜åº”è¯¥ä¸ç®—å¾ˆå¤§</p>
<p>æ‰€ä»¥ä½ çœ‹æˆ‘è¿™å°±æ˜¯åˆ†æ˜æœ‰è¯å¯æ•‘ï¼Œä½†æ˜¯å´è‡ªå·±å†…å¿ƒæ”¾å¼ƒæ²»ç–—äº†</p>
<p>å¯èƒ½æ˜¯å§ï¼Œå¦‚æœå®¶é‡Œä¸€ä¸ªå­©å­è¿˜å¥½ï¼Œæˆ‘èƒ½æ›´å¿ƒå®‰ç†å¾—ä¸€äº›ï¼Œä½†æ˜¯ä¸¤ä¸ªå­©å­ï¼Œå°±çœŸçš„éå¸¸ä¸æƒ³èŠ±çˆ¶æ¯çš„é’±äº†ã€‚</p>
<p>è€Œä¸”æˆ‘å¦ˆæ˜ç¡®çš„å’Œæˆ‘è¯´è¿‡â€œè¿™é’±å°±æ˜¯ç•™ç€ç»™ä½ ä¹°æˆ¿é¦–ä»˜çš„â€</p>
<p>å°±æ˜¯ä¸å¿ƒå®‰ç†å¾—å•Šã€‚å®¶é‡Œä¿©å­©å­ï¼Œçˆ¶æ¯ä¸€è¾ˆå­çš„è´¢äº§å´åªç»™ç”·å­©ï¼Œæˆ‘è§‰å¾—è¿™æ ·å¯¹å¥³å­©ä¸å…¬å¹³ã€‚</p>
<p>åªæ˜¯å› ä¸ºå¥¹æ˜¯å¥³å­©ï¼Œæ¯”æˆ‘å¤§ï¼Œå¹¶ä¸”å·²ç»å«å‡ºå»äº†ï¼Œè¿™äº›é’±æˆ‘å°±å¯ä»¥å¿ƒå®‰ç†å¾—çš„æ‹¿ç€ç”¨å—ï¼Ÿ</p>
<p>è¿™æ˜¯ä¸€æ–¹é¢åŸå› ã€‚å¦ä¸€ä¸ªåŸå› æ˜¯ï¼Œæˆ‘å¯èƒ½æœ‰äº›è¦å¼ºå§ã€‚å¥½ä¸å®¹æ˜“è·å¾—äº†ç»æµç‹¬ç«‹ï¼Œä¸æƒ³å†æ¬¡æ¶‰åŠè¿™äº›ã€‚è™½è¯´æˆ‘çš„å®¶åº­éå¸¸å’Œç¦ï¼Œä¸å­˜åœ¨â€œç”Ÿæ´»åœ¨çˆ¶æ¯çš„é˜´å½±ä¸‹â€ï¼Œä½†æ˜¯æˆ‘å°±æ˜¯è§‰å¾—è¿™æ ·ä¼šè®©æˆ‘å¿ƒç†å¾ˆä¸æ˜¯æ»‹å‘³ã€‚æˆ‘çˆ¶æ¯çš„é’±æ˜¯æˆ‘çˆ¶æ¯çš„é’±ï¼Œä¸æ˜¯æˆ‘çš„é’±</p>
<p>å°±åƒå¾ˆå¤šäººæ¯•ä¸šæ—¶ä¼šæ¯•ä¸šæ¸¸ï¼ˆé‚£æ—¶å€™æˆ‘è¿˜å¥½ï¼Œæœ‰ä¸€äº›ç§¯è“„äº†ï¼Œå·²ç»ç»æµç‹¬ç«‹åŠå¹´äº†ï¼‰ï¼Œæˆ‘åªèƒ½æ„Ÿå¹ï¼šå…¶ä»–äººéƒ½åœ¨æ¯•ä¸šæ¸¸ï¼Œæˆ‘å´åªèƒ½ä¸ºç”Ÿæ´»å¥”æ³¢</p>
<p>æˆ‘è§‰å¾—è¿™æ ·å­å¯¹å¥³å­©å­å¾ˆä¸å…¬å¹³</p>
<p>æ€»ç»“ä¸‹æ¥ï¼Œæˆ‘å¤ªè¦å¼ºäº†ï¼Œæˆ–è€…è¯´å¤ªå‚»äº†</p>
<p>åæ­£å°±æ˜¯ä½ çœ‹ï¼Œæˆ‘è§‰å¾—æˆ‘å’Œä¸€äº›â€œä¸»æµä»·å€¼è§‚â€æ ¼æ ¼ä¸å…¥ï¼Œæˆ‘ä¸çŸ¥é“è¿™æ˜¯å› ä¸ºä¸­å›½æ–‡åŒ–çš„åŸå› ï¼Œè¿˜æ˜¯æ€ä¹ˆçš„ï¼Œå°±æ€»æ„Ÿè§‰è‡ªå·±æ˜¯ä¸ªfreakå•Š</p>
<p>å¯¹äºæˆ‘æ¥è¯´ï¼Œâ€œä¼ ç»Ÿæ–‡åŒ– ä¼ ç»Ÿä¹ ä¿—â€ç­‰ç­‰å¹¶ä¸æ˜¯å¯ä»¥è®©æˆ‘å¥‰è¡Œçš„ç†ç”±ã€‚</p>
<p>Â </p>
<p>ã€ä½ çœŸçš„ä¼šè§‰å¾—æ˜¯è‡ªå·±å¤ªæ€ªäº† è€Œä¸æ˜¯åˆ«äººçš„æƒ³æ³•è§‚å¿µæœ‰é—®é¢˜å˜›ï¼Ÿã€‘</p>
<p>æˆ‘ä¸çŸ¥é“ï¼Œæƒ³æ³•å’Œè§‚å¿µè¿™ç§ä¸œè¥¿ï¼Œæˆ‘è§‰å¾—æ²¡æœ‰å¯¹é”™ä¹‹åˆ†å§ã€‚</p>
<p>ã€æœ‰å•Šæ¯”å¦‚é‡ç”·è½»å¥³ã€‘</p>
<p>å¤§éƒ¨åˆ†æƒ…å†µä¸‹æ¥è¯´æ˜¯è¿™æ ·çš„å§ï¼Œä¸è¿‡æˆ‘è§‰å¾—è¿™ä¸ªæœ‰ç‚¹æ›´å€¾å‘äºè§‚ç‚¹äº†ã€‚å…¶å®æˆ‘ä¸€ç›´åœ¨éå¸¸åŠªåŠ›çš„åŒºåˆ†â€œäº‹å®å’Œè§‚ç‚¹â€ï¼Œæˆ‘ä¸€ç›´è§‰å¾—â€œäº‹å®ä¸è§‚ç‚¹â€ä¸­ï¼Œäº‹å®æ˜¯å®¢è§‚çš„ï¼Œè§‚ç‚¹æ˜¯å› äººè€Œå¼‚çš„ã€‚å¯¹äºæˆ‘æ¥è¯´æˆ‘çš„è§‚ç‚¹æ˜¯â€œæˆ‘è®¤ä¸ºxxxæ˜¯ä¸å¦¥çš„â€ï¼Œä½†æ˜¯å¯¹äºæ”¯æŒè€…æ¥è¯´å°±ä¸æ˜¯äº†ã€‚å½“ç„¶æœ‰äº›è§‚ç‚¹å¯èƒ½ä¹Ÿè®¸ä¼šå˜æˆäº‹å®ï¼Œæ¯”å¦‚â€œæ—¥å¿ƒè¯´â€</p>
<p>å½“ç„¶äº†ï¼Œä½ ä¸è¦ç†è§£é”™äº†ï¼Œæˆ‘å¯æ²¡æœ‰ä¸€ä¸ªå­—è¯´æˆ‘å–œæ¬¢ç”·å­©ä¸å–œæ¬¢å¥³å­©ã€‚æˆ‘æ˜¯æ”¯æŒæ€§åˆ«å¹³ç­‰çš„å“¦ã€‚</p>
<p>å½“ç„¶ï¼Œæˆ‘ä¹Ÿæ²¡æœ‰ä¸ºâ€œé‡ç”·è½»å¥³â€è¾©æŠ¤ï¼Œå®é™…ä¸Šæˆ‘ä¹Ÿæ˜¯ä¸å–œæ¬¢å¹¶åæ„Ÿè¿™ç§ä¼ ç»Ÿæ€æƒ³çš„ï¼Œå®é™…ä¸Šå¾ˆå¤šä¼ ç»Ÿæ€æƒ³ä»€ä¹ˆçš„æˆ‘éƒ½ä¸å–œæ¬¢</p>
<p>ã€å¦‚æœå¹´è½»äººéƒ½èƒ½åƒä½ è¿™æ ·æƒ³ æˆ‘ä»¬çš„å‹åŠ›å°±ä¸ä¼šè¿™ä¹ˆå¤§äº†æŠŠã€‘</p>
<p>é‚£ä¹ˆå­å¼¹å°±ä¸å¤Ÿç”¨äº†</p>
<p>ä½ æƒ³ï¼Œæ—¢ç„¶èƒ½è½»è½»æ¾æ¾çš„æ´»ç€ï¼Œä¸ºä»€ä¹ˆéè¦è®©è‡ªå·±æ´»å¾—è¿™ä¹ˆç´¯å‘¢ï¼Ÿå³ä½¿è‡ªæˆ‘æ„Ÿè§‰è‰¯å¥½ï¼Œæ„Ÿè§‰è‡ªå·±æ˜¯æ›´å…·æœ‰åŒ…å®¹æ€§çš„ï¼Œé‚£åˆèƒ½æ€ä¹ˆæ ·å•ŠğŸ¤¦â€â™€ï¸ã€Œæƒ³è¿™ä¹ˆå¤šä¸ç´¯å—ï¼Œä¸ºä»€ä¹ˆä¸è¥¿ç“œå¯ä¹ã€</p>
<p>æ‰€ä»¥å¯èƒ½ä½ æ›´èƒ½ç†è§£æˆ‘ä¸ºä»€ä¹ˆæƒ³è¦å»æ–°çš„ç¯å¢ƒäº†å§</p>
<p>æˆ‘æ— æ³•æ”¹å˜è¿™äº›ï¼Œé‚£æˆ‘åªå¥½æ¢ä¸ªç¯å¢ƒäº†</p>
<p>ã€å’±ä¿©æ˜¯ä¸æ˜¯èŠçš„å¤ªæ·±åˆ»äº†ã€‘</p>
<p>è¿˜ä¸å¤Ÿæ·±åˆ»ã€‚åœ¨å¾®ä¿¡ä¸Šå¾ˆå¤šè¯é¢˜æˆ‘éƒ½æ˜¯é¿è€Œä¸è°ˆçš„ï¼Œä½†æ˜¯æˆ‘å¾ˆè®¨åŒè¿™æ ·çš„è‡ªå·±ï¼Œæˆ‘å¾ˆè®¨åŒè‡ªæˆ‘å®¡æŸ¥ï¼Œå¯æ˜¯æˆ‘åˆä¸å¾—ä¸è¿™ä¹ˆåšã€‚ä½ çœ‹ï¼Œã€Œæœ€ç»ˆè¿˜æ˜¯æ´»æˆäº†è‡ªå·±è®¨åŒçš„æ ·å­ã€</p>
<p>æˆ‘ä»¬çš„ç”Ÿæ´»å°±å¥½æ¯”ç§åœ°ï¼Œå¤§å®¶éƒ½åœ¨ç§æ°´ç¨»ï¼ˆç»“å©šä¹°æˆ¿å­ï¼‰ï¼Œä½†æ˜¯æœ‰çš„äººç§çš„æ˜¯è‹¹æœï¼Œä¹ä¸€çœ‹æœ‰ç‚¹çªå…€ï¼Œä»–ä»¬ä¼šæ€€ç–‘è‡ªå·±æ˜¯ä¸æ˜¯èµ°çš„ä¸å¯¹ï¼Œå…¶å®åªè¦äº§å‡ºçš„ä¸œè¥¿æ˜¯æœ‰ä»·å€¼çš„ï¼Œæœ€åéƒ½èƒ½æ»¡è¶³è‡ªå·±ï¼Œæ‰€ä»¥å’Œåˆ«äººä¸ä¸€æ ·ä¹Ÿæ²¡å…³ç³»ï¼Œé‡è¦çš„æ˜¯ç»“æœæ˜¯ä¸æ˜¯è‡ªå·±æƒ³è¦çš„ã€‚</p>
<p>2020-11-02</p>
</blockquote>
<p>Â </p>
<hr>
<p>Â </p>
<p><img src="/images/2021060512110440.jpeg" alt="ã€Šé€ƒé¿å¯è€»å´æœ‰ç”¨ã€‹æ–°æ˜¥SP"></p>
<p>æˆ‘ä»¬è¿˜ä¼šå†è§é¢å—ï¼Ÿ</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/06/05/aeru/index/" data-id="clhp7rtdv0007s2qr596vc43o" data-title="ã¾ãŸä¼šãˆã‚‹" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-argo-tunnel/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/04/17/argo-tunnel/index/" class="article-date">
  <time class="dt-published" datetime="2021-04-17T00:00:00.000Z" itemprop="datePublished">2021-04-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/cloudflare/">cloudflare</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/04/17/argo-tunnel/index/">Cloudflare Argo Tunnel å°è¯•ï¼šæˆ‘ç»ˆäºå¯ä»¥ç”¨æ ‘è“æ´¾åšç½‘ç«™å•¦</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Â </p>
<p>ä¹‹å‰ï¼Œå¦‚æœæƒ³ç”¨æ ‘è“æ´¾ä¹‹ç±»çš„è®¾å¤‡å»åšç½‘ç«™ï¼Œæ–¹æ³•ä¸€æ˜¯éœ€è¦æƒ³åŠæ³•å¼„åˆ°ä¸€ä¸ªå…¬ç½‘IPï¼Œæ— è®ºæ˜¯ç›´æ¥ä»è¿è¥å•†è¦ï¼Œè¿˜æ˜¯åœ¨é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ä¸Šåšfrpsä¹‹ç±»çš„å†…ç½‘ç©¿é€ï¼Œéƒ½æŒºéº»çƒ¦çš„ï¼›æ–¹æ³•äºŒæ˜¯å¦‚æœæœ‰IPv6ï¼Œé‚£ä¹ˆå°±å»åšv6onlyçš„è§£æï¼Œå¹¶ä¸”è¿™ä¸ªIPv6çš„åœ°å€è¿˜å¯èƒ½ä¼šç»å¸¸å˜ï¼Œè¿™æ ·å°±ä¼šä½¿å¾—ç½‘ç«™å¯ç”¨æ€§å˜å¾—éå¸¸å·®ï¼Œå¹¶ä¸”v4ç”¨æˆ·å°±æƒ¨äº†ã€‚</p>
<p>ç°ä»Šï¼ŒCloudflare Argo Tunnelå·²ç»å…è´¹å¼€æ”¾å•¦ã€‚è¿™ä¸ªä¸œè¥¿æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿç®€å•çš„æ¥è¯´å°±æ˜¯åœ¨ä»»ä½•å¯ä»¥è®¿é—®cloudflareçš„æœºå™¨å’Œcloudflareä¸­æ­å»ºä¸€ä¸ªå®‰å…¨çš„åŠ å¯†éš§é“ï¼Œç„¶åè¿™ä¸ªéš§é“å¯ä»¥ç”¨æ¥æ‰¿è½½å¾ˆå¤šä¸åŒç§ç±»å‹çš„æµé‡ï¼Œæ¯”å¦‚è¯´httpï¼ˆä¼šè¢«è‡ªåŠ¨æ¢æˆhttpsï¼‰ï¼Œtcpï¼Œsshï¼Œsmbï¼Œrdpï¼Œç”šè‡³æ˜¯unixå¥—æ¥å­—éƒ½å¯ä»¥å“¦ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦ä½ åœ¨å®¶é‡Œçš„æœºå™¨ä¸Šä¸€é¡¿æ“ä½œï¼Œé‚£ä¹ˆä½ å®¶é‡Œçš„æœºå™¨å°±å¯ä»¥é€šè¿‡cloudflareçš„ç½‘ç»œæ¥è¾¾åˆ°å…¨çƒå¯ä»¥è®¿é—®çš„ç›®çš„äº†ã€‚å¬èµ·æ¥æ˜¯ä¸æ˜¯å¾ˆæ£’ï¼</p>
<p>æ€»ç»“ä¸‹æ¥è¿™æ ·åšå¤§æ¦‚æœ‰è¿™å‡ æ­¥ï¼š</p>
<ol>
<li>æ³¨å†Œcloudflareè´¦å·</li>
<li>ï¼ˆå¯é€‰ï¼‰æŠŠåŸŸåçš„nsæ”¹æˆcloudflare</li>
<li>å®‰è£…cloudflaredå¹¶ç™»å½•</li>
<li>åˆ›å»ºargo tunnel</li>
<li>åˆ›å»ºdnsè®°å½•</li>
<li>é…ç½®tunnel</li>
<li>è¿è¡Œ</li>
</ol>
<p>æœ¬æ–‡ä»¥Raspberry Pi 3 + Ubuntu 20.04ä¸ºä¾‹</p>
<h2 id="æ³¨å†Œcloudflareè´¦å·"><a href="#æ³¨å†Œcloudflareè´¦å·" class="headerlink" title="æ³¨å†Œcloudflareè´¦å·"></a>æ³¨å†Œcloudflareè´¦å·</h2><p>ç•¥â€¦â€¦</p>
<h2 id="æŠŠåŸŸåçš„nsæ”¹æˆcloudflare"><a href="#æŠŠåŸŸåçš„nsæ”¹æˆcloudflare" class="headerlink" title="æŠŠåŸŸåçš„nsæ”¹æˆcloudflare"></a>æŠŠåŸŸåçš„nsæ”¹æˆcloudflare</h2><p>è¿™ä¸€æ­¥æ˜¯å¯é€‰çš„ï¼ŒArgo Tunnelä¼šæä¾›ä¸€ä¸ªé»˜è®¤çš„åŸŸåï¼Œå½“ç„¶å¦‚æœèƒ½ç”¨è‡ªå·±çš„åŸŸåå°±æ›´å¥½å•¦ã€‚</p>
<h2 id="å®‰è£…cloudflaredå¹¶ç™»å½•"><a href="#å®‰è£…cloudflaredå¹¶ç™»å½•" class="headerlink" title="å®‰è£…cloudflaredå¹¶ç™»å½•"></a>å®‰è£…cloudflaredå¹¶ç™»å½•</h2><p>å…·ä½“çš„è¯ï¼Œå¯ä»¥å‚è€ƒ<a target="_blank" rel="noopener" href="https://developers.cloudflare.com/cloudflare-one/connections/connect-apps/install-and-setup">è¿™ç¯‡å®˜æ–¹æ–‡æ¡£</a>ã€‚æˆ‘çš„æ ‘è“æ´¾æ˜¯aarch64çš„æ¶æ„ï¼Œä¹Ÿå°±æ˜¯arm64.</p>
<p>wget -O cloudflared <a target="_blank" rel="noopener" href="https://github.com/cloudflare/cloudflared/releases/download/2021.4.0/cloudflared-linux-arm64">https://github.com/cloudflare/cloudflared/releases/download/2021.4.0/cloudflared-linux-arm64</a><br>chmod +x cloudflared<br>sudo cp cloudflared &#x2F;usr&#x2F;loca&#x2F;bin&#x2F;</p>
<p>ç„¶åå°±å¯ä»¥å¼€å§‹ç™»å½•å•¦ï¼</p>
<p>cloudflared tunnel login</p>
<p>ç„¶åå†æ‰“å¼€çš„é¡µé¢ä¸­é€‰æ‹©ä½ çš„åŸŸåï½Pi é‚£è¾¹å¤§æ¦‚ä¼šæœ‰å¦‚ä¸‹è¾“å‡ºï¼š</p>
<blockquote>
<p>You have successfully logged in.</p>
<p>If you wish to copy your credentials to a server, they have been saved to:</p>
<p>&#x2F;home&#x2F;benny&#x2F;.cloudflared&#x2F;cert.pem</p>
</blockquote>
<h2 id="åˆ›å»ºargo-tunnel"><a href="#åˆ›å»ºargo-tunnel" class="headerlink" title="åˆ›å»ºargo tunnel"></a>åˆ›å»ºargo tunnel</h2><p>cloudflared tunnel create <NAME></NAME></p>
<p>è¿™æ¡å‘½ä»¤ä¼šè¾“å‡ºä¸€ä¸ªtunnle UUID</p>
<p>nameå¯ä»¥è‡ªå·±éšä¾¿å–ä¸€ä¸ªï¼Œæ¯”å¦‚è¯´Piå•¦ï½Yuiå•¦ï½éšä¾¿çš„å•¦</p>
<p>æƒ³è¦æŸ¥çœ‹tunnelåˆ—è¡¨ï¼Œå¯ä»¥ä½¿ç”¨ <code>cloudflared tunnel list</code></p>
<p>å¾ˆæ˜æ˜¾ï¼Œæƒ³è¦åˆ é™¤ï¼Œé‚£å°±deleteå•¦ <code>cloudflared tunnel delete pi</code></p>
<h2 id="åˆ›å»ºDNSè®°å½•"><a href="#åˆ›å»ºDNSè®°å½•" class="headerlink" title="åˆ›å»ºDNSè®°å½•"></a>åˆ›å»ºDNSè®°å½•</h2><p>æœ‰ä¸¤ç§åŠæ³•ï¼Œä¸€ç§æ˜¯å»cloudflare dashboardä¸­åˆ›å»ºä¸€æ¡é“<code>id. cfargotunnel.com</code>çš„CNAMEè§£æï¼Œå¦å¤–ä¸€ç§æ˜¯ä½¿ç”¨cliå‘½ä»¤ï½</p>
<p>é‚£æ¯”å¦‚è¯´æˆ‘è¦åˆ›å»ºä¸€ä¸ªabcd.dmesg.appï¼Œé‚£ä¹ˆå°±å¯ä»¥è¿™æ ·åš</p>
<p>cloudflared tunnel route dns <UUID or name> abcd.dmesg.com</UUID></p>
<p>æˆ–è€…åœ¨ç½‘é¡µä¸Šè¿™æ ·æ·»åŠ ï¼Œç»“æœæ˜¯ä¸€æ ·æ»´</p>
<p><img src="/images/2021041713264377.png"></p>
<p>æ­¤æ—¶å¦‚æœä½ è®¿é—®abcd.dmesg.appï¼Œä¼šçœ‹åˆ°1033é”™è¯¯çš„å“¦ï¼Œå› ä¸ºæˆ‘ä»¬çš„tunnelè¿˜æ²¡æœ‰è¿è¡Œã€‚</p>
<h2 id="é…ç½®tunnel"><a href="#é…ç½®tunnel" class="headerlink" title="é…ç½®tunnel"></a>é…ç½®tunnel</h2><p>é‚£ä¹ˆæ¥ä¸‹æ¥å°±éœ€è¦åœ¨æ ‘è“æ´¾ä¸Šé…ç½®å¦‚ä½•tunneläº†ï¼Œä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­æ˜¯è¿™æ ·çš„ï¼š</p>
<p>tunnel: pi<br>credentials-file: &#x2F;home&#x2F;benny&#x2F;.cloudflared&#x2F;af4d19d0-7fb1-40ea-88b7-97036c026ca4.json</p>
<p>ingress:</p>
<ul>
<li>hostname: pi.dmesg.app<br>service: <a target="_blank" rel="noopener" href="http://localhost:8000/">http://localhost:8000</a></li>
<li>service: http_status:404</li>
</ul>
<p>å…¶ä¸­hostnameå°±æ˜¯ä¸Šé¢çš„é‚£ä¸ªåŸŸåï¼Œserviceè¡¨ç¤ºæˆ‘ä»¬è¦æ‰¿è½½ä»€ä¹ˆæµé‡ï¼Œå¦‚æœæƒ³è¦æ‰¿è½½sshï¼Œé‚£ä¹ˆå°±<code>service: ssh://localhost:22</code>å°±å¥½äº†ã€‚</p>
<p>æœ€å¼€å§‹çš„uuidåŒæ ·å¯ä»¥æ›¿æ¢æˆtunnel name</p>
<p>ç„¶åæˆ‘ä»¬â€¦â€¦</p>
<p>cloudflared tunnel â€“config ~&#x2F;tunnel.yml run</p>
<p>å¦‚æœä¸æƒ³å†™è¿™ç§é…ç½®æ–‡ä»¶ï¼Œé‚£ä¹ˆå¯ä»¥ä¸€æ¡cliè§£å†³</p>
<p>cloudflared tunnel run â€“url localhost:8000 <NAME or uuid></NAME></p>
<p>çœ‹åˆ°ä¸€å¤§ä¸²è¾“å‡ºï¼Œæ²¡æœ‰æŠ¥é”™ï¼Œé‚£æˆ‘ä»¬çš„tunnelå°±æˆåŠŸäº†ã€‚å½“ç„¶æ ‘è“æ´¾ä¸Š8000è¿˜æ²¡æœ‰ç¨‹åºåœ¨ç›‘å¬ï¼Œé‚£æˆ‘ä»¬å†èµ¶ç´§å¼€ä¸€ä¸ªå§</p>
<p>docker run -d -p 127.0.0.1:8000:80 nginx:alpine</p>
<p>è¿™ä¸ªæ—¶å€™æ‰“å¼€æµè§ˆå™¨åˆ·æ–°ä¸€ä¸‹ï¼Œä½ çš„é¡µé¢å°±å·²ç»å‡ºæ¥å•¦ï¼</p>
<p><img src="/images/2021041713264488.png"></p>
<h3 id="ä»¥æœåŠ¡æ¨¡å¼è¿è¡Œ"><a href="#ä»¥æœåŠ¡æ¨¡å¼è¿è¡Œ" class="headerlink" title="ä»¥æœåŠ¡æ¨¡å¼è¿è¡Œ"></a>ä»¥æœåŠ¡æ¨¡å¼è¿è¡Œ</h3><p>å½“ç„¶äº†ï¼Œå’±ä¸èƒ½å¼€ä¸ªscreenå»è¿è¡Œargo tunnelå•Šâ€¦â€¦</p>
<p>é‚£ä¹ˆæ‰§è¡Œè¿™æ¡å‘½ä»¤æ¥å®‰è£…æœåŠ¡</p>
<p># éœ€è¦æœ‰ï½&#x2F;.cloudflared&#x2F;config.yaml<br>sudo cloudflared service install</p>
<h1 id="æŒ‡å®šé…ç½®æ–‡ä»¶ä½ç½®"><a href="#æŒ‡å®šé…ç½®æ–‡ä»¶ä½ç½®" class="headerlink" title="æŒ‡å®šé…ç½®æ–‡ä»¶ä½ç½®"></a>æŒ‡å®šé…ç½®æ–‡ä»¶ä½ç½®</h1><p>cloudflared â€“config CONFIG-FILE service install</p>
<p>è¿™ä¸ªæ—¶å€™å“ªæ€•é‡å¯éƒ½ä¸æ€•å•¦ğŸ˜¨</p>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a target="_blank" rel="noopener" href="https://developers.cloudflare.com/cloudflare-one/tutorials/single-command">Create and connect an application with a single command</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.outv.im/2021/cloudflared-tunnel/#%E8%B7%B3%E6%9D%BF%E6%9C%BA%EF%BC%88-bastion%EF%BC%89">ç”¨ Cloudflare Tunnel è¿›è¡Œå†…ç½‘ç©¿é€ | Re:Linked</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/04/17/argo-tunnel/index/" data-id="clhp7rtei000ps2qradl41fjl" data-title="Cloudflare Argo Tunnel å°è¯•ï¼šæˆ‘ç»ˆäºå¯ä»¥ç”¨æ ‘è“æ´¾åšç½‘ç«™å•¦" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-ufw-vs-docker/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/04/10/ufw-vs-docker/index/" class="article-date">
  <time class="dt-published" datetime="2021-04-10T00:00:00.000Z" itemprop="datePublished">2021-04-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/linux/">linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/04/10/ufw-vs-docker/index/">æˆ‘çš„ufwæ€ä¹ˆåˆä¸å¥½ç”¨äº†ï¼Ÿä½¿ç”¨dockeræ—¶å¦‚ä½•æ‹’ç»écloudflareè®¿é—®</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>äº‹æƒ…æ˜¯è¿™æ ·çš„ï¼Œæˆ‘æƒ³è®©æˆ‘çš„ç½‘ç«™çš„80å’Œ443ç«¯å£åªæ¥å—cloudflareçš„è®¿é—®ï¼Œç›´æ¥è®¿é—®ä¼šè¢«æ‹’ç»ã€‚</p>
<p>å—¨ï¼Œè¿™è¿˜ä¸ç®€å•å˜›ï¼å…ˆç»™å…¥ç½‘åŠ è§„åˆ™ï¼Œå½“ç„¶è¦è®°å¾—å…ˆåŠ sshçš„è§„åˆ™ï¼Œç„¶åå†ç»™policyè®¾ç½®æˆDROPï¼Œå¤šå¤§ç‚¹äº‹ï¼</p>
<p>iptables -I INPUT -p tcp â€“dport 22 -j ACCEPT<br>iptables -I INPUT -s 192.168.7.67 -p tcp â€“dport 80 -j ACCEPT<br>iptables -P INPUT DROP</p>
<p>æŸ¥çœ‹ä¸‹INPUTçš„è§„åˆ™ç¡®å®šä¸€ä¸‹æ²¡é—®é¢˜</p>
<p>[~] iptables -L INPUT<br>Chain INPUT (policy DROP)<br>target prot opt source destination<br>ACCEPT tcp â€“ 192.168.7.67 anywhere tcp dpt:http<br>ACCEPT tcp â€“ anywhere anywhere tcp dpt:ssh</p>
<p>å—¯ï¼Œæ²¡é—®é¢˜ï¼</p>
<p>å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œè¿™æ˜¯æ²¡é—®é¢˜çš„â€¦â€¦ä½†æ˜¯å¦‚æœä½ çš„åº”ç”¨æ˜¯ç”¨dockerèµ·çš„ï¼Œæ¯”å¦‚è¯´</p>
<p>docker run -d -p 80:80 nginx</p>
<p>é‚£ä¹ˆä½ ä¼šæƒŠå–œçš„å‘ç°ï¼Œè¿™è§„åˆ™å¥½åƒæ²¡ç”¨â€¦â€¦80ç«¯å£è¿˜æ˜¯èƒ½å¤Ÿä»é192.168.7.67ä»¥å¤–çš„IPè®¿é—®ã€‚</p>
<p>é‚£ä¸Šufwï¼</p>
<p>ufw allow ssh<br>ufw allow proto tcp from 192.168.7.67 to any port 80,443<br>ufw enable</p>
<p>å—¯â€¦â€¦è¿˜æ˜¯æ²¡ç”¨ï¼Œæ¯•ç«Ÿufwå…¶å®ä¹Ÿæ˜¯åœ¨æ“ä½œiptablesçš„å˜›ã€‚</p>
<p>å—¯ï¼Œå› ä¸ºdockerçš„è¯ï¼Œä¼šæ–°å»ºä¸€ä¸ªDOCKERçš„é“¾ï¼Œå¦‚æœå®¹å™¨ä½¿ç”¨<code>-p</code>ç»‘å®šäº†ç«¯å£ï¼Œé‚£ä¹ˆdokerä¼šè‡ªåŠ¨å»ä¿®æ”¹å¯¹åº”çš„iptablesè§„åˆ™ã€‚</p>
<p>æ‰€ä»¥ä»ç°è±¡ä¸Šæ¥çœ‹å°±æ˜¯dockeråœ¨ä½ çš„é˜²ç«å¢™ä¸Šæ‰“äº†ä¸€ä¸ªæ´â€¦â€¦</p>
<hr>
<p><img src="/images/2021041016413552.png"></p>
<h2 id="éœ€æ±‚åˆ†æ"><a href="#éœ€æ±‚åˆ†æ" class="headerlink" title="éœ€æ±‚åˆ†æ"></a>éœ€æ±‚åˆ†æ</h2><p>å…¶å®æˆ‘çš„éœ€æ±‚å¾ˆç®€å•ï¼Œécloudflare IPæ— æ³•è®¿é—®80&#x2F;443ã€‚é¢å¤–çš„ï¼Œæˆ‘è¿˜éœ€è¦å¼€æ”¾UDPçš„80å’Œ443ï¼Œwireguardåœ¨ç”¨çš„ã€‚22ä¹Ÿæ˜¯è¦çš„ï¼Œä¹Ÿå°±é¡ºä¾¿å¼€äº†UDP 22å¤‡ç”¨å§ã€‚å½“ç„¶ï¼Œä»¥ä¸Šéœ€æ±‚åŒ…æ¶µIPv4å’ŒIPv6ã€‚</p>
<p>å…·ä½“æ¥è¯´ï¼Œæˆ‘æƒ³åˆ°äº†è¿™æ ·å‡ ç§æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆï¼š</p>
<ol>
<li>åœ¨å‚å•†é˜²ç«å¢™åšé…ç½®</li>
<li>nginxé…ç½®allow denyè§„åˆ™</li>
<li>å®¿ä¸»æœºnginxåšproxyï¼Œå°†docker çš„ç«¯å£ç»‘å®šåˆ°127.0.0.1</li>
<li>è®©dockerè‡£æœäºufwâ€¦â€¦</li>
</ol>
<h2 id="å‚å•†é˜²ç«å¢™é…ç½®"><a href="#å‚å•†é˜²ç«å¢™é…ç½®" class="headerlink" title="å‚å•†é˜²ç«å¢™é…ç½®"></a>å‚å•†é˜²ç«å¢™é…ç½®</h2><p>è¿™æ˜¯æœ€ç®€å•ä¹Ÿçš„æ–¹æ¡ˆäº†ï¼Œæœ‰äº›VPSå‚å•†æä¾›ä¸€ä¸ªé˜²ç«å¢™é…ç½®ï¼Œæœ‰çš„ä¹Ÿç§°ä¸ºå®‰å…¨ç»„ï¼Œç„¶åç»‘å®šåˆ°è‡ªå·±çš„æœºå™¨å°±å¥½äº†ï¼Œå°±æ˜¯cloudflareçš„IPæœ‰ç‚¹å¤šâ€¦â€¦æ”¹èµ·æ¥éº»çƒ¦äº†ç‚¹â€¦â€¦</p>
<p>æ¯”å¦‚vultrçš„é˜²ç«å¢™æ˜¯è¿™æ ·çš„ï¼Œè‡ªå·±æ”¹æ”¹å°±å·®ä¸å¤šäº†ã€‚</p>
<p><img src="/images/2021041016413957.png"></p>
<h2 id="nginxé…ç½®allow-denyè§„åˆ™"><a href="#nginxé…ç½®allow-denyè§„åˆ™" class="headerlink" title="nginxé…ç½®allow denyè§„åˆ™"></a>nginxé…ç½®allow denyè§„åˆ™</h2><p>ä»¥ä¸‹å‡æ˜¯é…ç½®å®¹å™¨ä¸­çš„nginx</p>
<h3 id="ä¸€èˆ¬æƒ…å†µ"><a href="#ä¸€èˆ¬æƒ…å†µ" class="headerlink" title="ä¸€èˆ¬æƒ…å†µ"></a>ä¸€èˆ¬æƒ…å†µ</h3><p>è¿™ä¸ªå…¶å®å¾ˆç®€å•çš„å•¦ï¼Œè‡ªå·±è¡¥å…¨ä¸‹IP</p>
<p># <a target="_blank" rel="noopener" href="https://www.cloudflare.com/ips">https://www.cloudflare.com/ips</a></p>
<h1 id="IPv4"><a href="#IPv4" class="headerlink" title="IPv4"></a>IPv4</h1><p>allow 103.21.244.0&#x2F;22;</p>
<h1 id="IPv6"><a href="#IPv6" class="headerlink" title="IPv6"></a>IPv6</h1><p>allow 2400:cb00::&#x2F;32;<br>deny all; # deny all remaining ips</p>
<h3 id="å¯ç”¨set-real-ip-from"><a href="#å¯ç”¨set-real-ip-from" class="headerlink" title="å¯ç”¨set_real_ip_from"></a>å¯ç”¨set_real_ip_from</h3><p>å¦‚æœä½ å¯ç”¨äº†<code>set_real_ip_from</code>ï¼Œé‚£ä¹ˆå¦‚æœåƒä¸Šé¢é‚£æ ·æ“ä½œï¼Œé‚£å°±å…¨éƒ¨éƒ½403å•¦ï¼</p>
<p>æ­£ç¡®çš„æ“ä½œå§¿åŠ¿æ˜¯è¿™æ ·çš„â€¦â€¦</p>
<p>geo $realip_remote_addr $cloudflare_ip {<br>    default 0;</p>
<pre><code>103.21.244.0/22 1;
2a06:98c0::/29 1;
</code></pre>
<p>}</p>
<p>ç„¶ååœ¨å¯¹åº”çš„serveræ®µä¸­ï¼š</p>
<p>if ($cloudflare_ip !&#x3D; 1) {<br>    return 403;<br>}</p>
<p>å—¯ï¼Œè¿™æ ·å°±å¯ä»¥äº†ï¼</p>
<h2 id="å®¿ä¸»æœºnginxåšproxy"><a href="#å®¿ä¸»æœºnginxåšproxy" class="headerlink" title="å®¿ä¸»æœºnginxåšproxy"></a>å®¿ä¸»æœºnginxåšproxy</h2><p>è¿˜æœ‰ä¸€ç§æ–¹å¼æ˜¯ï¼Œå°†dockerçš„ç«¯å£ç»‘å®šåˆ°127.0.0.1ï¼Œç„¶åå®¿ä¸»æœºå®‰è£…nginxåšproxy_passï¼Œä¹‹åé…ç½®å®¿ä¸»æœºçš„nginx allow denyæˆ–è€…iptablesã€‚è¿™ç§æ–¹å¼ä¹Ÿå¯ä»¥çš„ï¼Œæ¯”è¾ƒç®€å•ï¼Œå°±ä¸å¤šè¯´å•¦ï½ğŸ¤£</p>
<h2 id="è®©dockerè‡£æœäºufw"><a href="#è®©dockerè‡£æœäºufw" class="headerlink" title="è®©dockerè‡£æœäºufw"></a>è®©dockerè‡£æœäºufw</h2><p>è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬åŒæ—¶è¦ä¿è¯ï¼šå®¹å™¨äº’é€šã€å¹¶ä¸”é€šå¤–ç½‘ã€‚å½“ç„¶ï¼Œç¦ç”¨dockerçš„iptablesåŠŸèƒ½ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œå°±æ˜¯æ¯”è¾ƒéº»çƒ¦ï¼Œå’±å°±æƒ³èƒ½ä¸èƒ½è®©è¿™äºŒäººå’Œè°å…±å¤„â€¦â€¦</p>
<p>æ“ä½œèµ·æ¥å…¶å®å¾ˆç®€å•ã€‚ä¸è¿‡å…ˆè¦åšä¸€äº›å‡†å¤‡å·¥ä½œï¼Œæ¯”å¦‚è¯´æ¢å¤dockerçš„iptablesåŠŸèƒ½ï¼Œæ¸…é™¤INPUTä¸­çš„å¯èƒ½å†²çªçš„è§„åˆ™â€¦â€¦ç„¶åï¼š</p>
<h3 id="ä¿®æ”¹ufwé…ç½®"><a href="#ä¿®æ”¹ufwé…ç½®" class="headerlink" title="ä¿®æ”¹ufwé…ç½®"></a>ä¿®æ”¹ufwé…ç½®</h3><p>ä¿®æ”¹ <code>/etc/ufw/after.rule</code>s æœ€ååŠ ä¸Šå¦‚ä¸‹è§„åˆ™</p>
<p># BEGIN UFW AND DOCKER</p>
<h1 id="BEGIN-UFW-AND-DOCKER"><a href="#BEGIN-UFW-AND-DOCKER" class="headerlink" title="BEGIN UFW AND DOCKER"></a>BEGIN UFW AND DOCKER</h1><p>*filter<br>:ufw-user-forward - [0:0]<br>:ufw-docker-logging-deny - [0:0]<br>:DOCKER-USER - [0:0]<br>-A DOCKER-USER -j ufw-user-forward</p>
<p>-A DOCKER-USER -j RETURN -s 10.0.0.0&#x2F;8<br>-A DOCKER-USER -j RETURN -s 172.16.0.0&#x2F;12<br>-A DOCKER-USER -j RETURN -s 192.168.0.0&#x2F;16</p>
<p>-A DOCKER-USER -p udp -m udp â€“sport 53 â€“dport 1024:65535 -j RETURN</p>
<p>-A DOCKER-USER -j ufw-docker-logging-deny -p tcp -m tcp â€“tcp-flags FIN,SYN,RST,ACK SYN -d 192.168.0.0&#x2F;16<br>-A DOCKER-USER -j ufw-docker-logging-deny -p tcp -m tcp â€“tcp-flags FIN,SYN,RST,ACK SYN -d 10.0.0.0&#x2F;8<br>-A DOCKER-USER -j ufw-docker-logging-deny -p tcp -m tcp â€“tcp-flags FIN,SYN,RST,ACK SYN -d 172.16.0.0&#x2F;12<br>-A DOCKER-USER -j ufw-docker-logging-deny -p udp -m udp â€“dport 0:32767 -d 192.168.0.0&#x2F;16<br>-A DOCKER-USER -j ufw-docker-logging-deny -p udp -m udp â€“dport 0:32767 -d 10.0.0.0&#x2F;8<br>-A DOCKER-USER -j ufw-docker-logging-deny -p udp -m udp â€“dport 0:32767 -d 172.16.0.0&#x2F;12</p>
<p>-A DOCKER-USER -j RETURN</p>
<p>-A ufw-docker-logging-deny -m limit â€“limit 3&#x2F;min â€“limit-burst 10 -j LOG â€“log-prefix â€œ[UFW DOCKER BLOCK] â€œ<br>-A ufw-docker-logging-deny -j DROP</p>
<p>COMMIT</p>
<h1 id="END-UFW-AND-DOCKER"><a href="#END-UFW-AND-DOCKER" class="headerlink" title="END UFW AND DOCKER"></a>END UFW AND DOCKER</h1><h3 id="é‡å¯ufw"><a href="#é‡å¯ufw" class="headerlink" title="é‡å¯ufw"></a>é‡å¯ufw</h3><p>systemctl restart ufw</p>
<h3 id="æ·»åŠ è§„åˆ™"><a href="#æ·»åŠ è§„åˆ™" class="headerlink" title="æ·»åŠ è§„åˆ™"></a>æ·»åŠ è§„åˆ™</h3><p>å¼€å§‹æ„‰å¿«çš„æ·»åŠ è§„åˆ™å§</p>
<p>ufw allow 22<br>ufw allow proto udp to any port 80,443</p>
<p>for i in `curl <a target="_blank" rel="noopener" href="https://www.cloudflare.com/ips-v4/%60">https://www.cloudflare.com/ips-v4\`</a>; do ufw route allow proto tcp from $i to any port 80,443; done<br>for i in `curl <a target="_blank" rel="noopener" href="https://www.cloudflare.com/ips-v6/%60">https://www.cloudflare.com/ips-v6\`</a>; do ufw route allow proto tcp from $i to any port 80,443; done</p>
<p>ufw enabler</p>
<p>å¦‚æœä½ æƒ³é¢å¤–çš„æ·»åŠ ä¸€äº›IPçš„è¯ï¼Œé‚£å°±ä¾æ ·ç”»è‘«èŠ¦ï¼š</p>
<p>ufw route allow proto tcp from 1.1.1.1 to any port 80,443;</p>
<p>å¥½çš„ï¼è®¾ç½®å®Œæˆï¼æ‰¾å°æœºå™¨æ”¹hosts ä¹‹åç”¨curlè¯•è¯•å§ï¼</p>
<h3 id="æˆ‘è­¦å‘Šä½ ä»¬â€¦â€¦"><a href="#æˆ‘è­¦å‘Šä½ ä»¬â€¦â€¦" class="headerlink" title="æˆ‘è­¦å‘Šä½ ä»¬â€¦â€¦"></a>æˆ‘è­¦å‘Šä½ ä»¬â€¦â€¦</h3><p>å¦‚æœä½ çš„æœåŠ¡å™¨ä¹Ÿå¼€å¯äº†WireGuardï¼Œå¹¶ä¸”æ˜¯ä½¿ç”¨äº†WireGuardçš„è½¬å‘åŠŸèƒ½çš„ï¼Œé‚£ä¹ˆè¯·è®°å¾—å¼€ufw forwardã€‚ä¸¾ä¸ªä¾‹å­ï¼š</p>
<p>æˆ‘æœ‰ABCä¸‰å°æœåŠ¡å™¨ï¼ŒBæ˜¯WireGuardâ€œæœåŠ¡å™¨â€ï¼ŒAå’ŒCéƒ½è¿æ¥åˆ°äº†Bã€‚å¦‚æœAæƒ³è¦è®¿é—®Cä¸Šçš„sshï¼Œæˆ–è€…åè¿‡æ¥ï¼Œé‚£ä¹ˆå°±è¦å¼€forwardï¼Œå¦åˆ™ä¼šä¸é€šå“¦ã€‚</p>
<p>å½“ç„¶å•¦ï¼Œå‰ææ˜¯è¦å…ˆå¼€<code>net.ipv4.ip_forward=1</code>ä»¥åŠ<code>net.ipv6.conf.all.forwarding = 1</code>ï¼Œå¦åˆ™æœ‰æ²¡æœ‰ufwï¼ŒACéƒ½ä¸é€šçš„å“¦ã€‚</p>
<p>vim &#x2F;etc&#x2F;defaut&#x2F;ufw<br>DEFAULT_FORWARD_POLICY&#x3D;â€ACCEPTâ€</p>
<h1 id="æˆ–è€…ä¸‹é¢è¿™ä¸ªä¹Ÿå¯"><a href="#æˆ–è€…ä¸‹é¢è¿™ä¸ªä¹Ÿå¯" class="headerlink" title="æˆ–è€…ä¸‹é¢è¿™ä¸ªä¹Ÿå¯"></a>æˆ–è€…ä¸‹é¢è¿™ä¸ªä¹Ÿå¯</h1><p>ufw default allow routed</p>
<h1 id="ä¹Ÿè¦è®°å¾—æ”¾è¡Œå“¦"><a href="#ä¹Ÿè¦è®°å¾—æ”¾è¡Œå“¦" class="headerlink" title="ä¹Ÿè¦è®°å¾—æ”¾è¡Œå“¦"></a>ä¹Ÿè¦è®°å¾—æ”¾è¡Œå“¦</h1><p>ufw allow from 192.168.6.0&#x2F;24 to 192.168.6.1</p>
<p>å¦‚æœä½ çš„å®¹å™¨éœ€è¦è®¿é—®å®¿ä¸»æœºï¼Œè¿˜è¦è®°å¾—è¿™æ ·åŠ ä¸€è¡Œ</p>
<p>ufw allow from 172.16.0.0&#x2F;12 to 172.17.0.1</p>
<h3 id="ç¦ç”¨ufw"><a href="#ç¦ç”¨ufw" class="headerlink" title="ç¦ç”¨ufw"></a>ç¦ç”¨ufw</h3><p>å¦‚æœæ­¤æ—¶ä½ æ˜¯ç”¨ufw disableæ¥ç¦ç”¨ufwï¼Œä¼šå‘ç°å®¹å™¨æ— æ³•åœ¨å¤–éƒ¨è®¿é—®ã€‚æ­¤æ—¶éœ€è¦è¿™ä¹ˆåšï¼š</p>
<p>sudo iptables -I DOCKER-USER 1 -j RETURN</p>
<p>è¿™æ ·å¯ä»¥æš‚æ—¶bypassæ‰ufwè§„åˆ™äº†ã€‚</p>
<p>ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹è§„åˆ™</p>
<p>sudo iptables -n -L DOCKER-USER</p>
<p>ä½¿ç”¨è¿™ä¸ªå‘½ä»¤åˆ é™¤è§„åˆ™ï¼Œä¸è¿‡è¿™ä¸ªæ—¶å€™å°±è®°å¾—è¦<code>ufw enable</code>å“¦</p>
<p>sudo iptables -D DOCKER-USER 1</p>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p>ufw-dockerï¼š <a target="_blank" rel="noopener" href="https://github.com/chaifeng/ufw-docker">https://github.com/chaifeng/ufw-docker</a></p>
<p>è®© docker å‘ UFW ä½å¤´ï¼š <a target="_blank" rel="noopener" href="https://keng42.com/blog/article/docker-ufw/">https://keng42.com/blog/article/docker-ufw/</a></p>
<p>after.rules not reloaded unless rebootï¼š <a target="_blank" rel="noopener" href="https://github.com/chaifeng/ufw-docker/issues/40">https://github.com/chaifeng/ufw-docker/issues/40</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/04/10/ufw-vs-docker/index/" data-id="clhp7rtmv00aps2qre4ce61qr" data-title="æˆ‘çš„ufwæ€ä¹ˆåˆä¸å¥½ç”¨äº†ï¼Ÿä½¿ç”¨dockeræ—¶å¦‚ä½•æ‹’ç»écloudflareè®¿é—®" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-docker-scale/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/02/10/docker-scale/index/" class="article-date">
  <time class="dt-published" datetime="2021-02-10T00:00:00.000Z" itemprop="datePublished">2021-02-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/website/">website</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/02/10/docker-scale/index/">ä½¿ç”¨docker scaleæ—¶é‡åˆ°çš„ä¸€ç‚¹å°é—®é¢˜</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>ä»Šå¤©åœ¨ä½¿ç”¨<code>docker-compose</code>æ—¶ï¼Œçªç„¶å‘ç°æœ‰ä¸€ä¸ªcommandå«åš<code>scale</code>ï¼Œæ„Ÿè§‰æœ‰ç‚¹åƒkubernetesçš„replicaï¼Œäºæ˜¯è¯•äº†ä¸€ä¸‹</p>
<p>-&gt; # docker-compose scale yyets-web&#x3D;5<br>WARNING: The scale command is deprecated. Use the up command with the â€“scale flag instead.<br>Starting websiterunner_yyets-web_1 â€¦ done<br>Creating websiterunner_yyets-web_2 â€¦ done<br>Creating websiterunner_yyets-web_3 â€¦ done<br>Creating websiterunner_yyets-web_4 â€¦ done<br>Creating websiterunner_yyets-web_5 â€¦ done</p>
<p>æœçœŸæ˜¯è¿™ä¸ªæ ·å­çš„ï¼Œé‚£ä¹ˆä»å…¶ä»–å®¹å™¨è®¿é—®è¿™ä¸ªcontainerï¼Œç”¨çš„æ˜¯ä»€ä¹ˆè´Ÿè½½å‡è¡¡ç®—æ³•å‘¢ï¼ŸçŒœæµ‹åº”è¯¥æ˜¯æœ€ç®€å•ä¹Ÿæ˜¯æœ€å¸¸è§çš„round robinå§ï¼Ÿåœ¨nginxé‡Œ<code>ping</code>å’Œ<code>curl</code>è¯•äº†ä¸€ä¸‹ï¼ŒæœçœŸæ˜¯çš„ï¼Œæ¯æ¬¡è§£æçš„IPåœ°å€éƒ½ä¼šå˜åŒ–ï¼š</p>
<p><img src="/images/2021021017463110.jpeg"></p>
<p>ç„¶åçœ‹äº†ä¸€ä¸‹logï¼Œå‘ç°è¯·æ±‚å…¨éƒ¨è½åœ¨äº†1ä¸Šï¼Œè€Œæ²¡æœ‰å¹³å‡åˆ°å…¶ä»–4ä¸ªcontainer</p>
<p><img src="/images/2021021017463387.jpeg"></p>
<p>ä½†æ˜¯æˆ‘å¦‚æœåœ¨nginxé‡Œ<code>curl</code>ï¼Œå´å¯ä»¥çœ‹åˆ°è¯·æ±‚æ˜¯å‡åŒ€åˆ†å¸ƒåœ¨5ä¸ªcontaineré‡Œçš„ã€‚</p>
<p><img src="/images/2021021017463847.jpeg" alt="å›¾åƒ"></p>
<p>ä»€ä¹ˆé¬¼å˜›ï¼Œæ€ä¹ˆä¼šè¿™æ ·ï¼Œä»å¤–éƒ¨è¿‡æ¥çš„è¯·æ±‚ä¸è¿‡æ˜¯ç»è¿‡äº†nginx proxy_passï¼Œè¿™å’Œæˆ‘åœ¨nginx containeré‡Œç›´æ¥<code>curl</code>æœ‰ä»€ä¹ˆå·®åˆ«å˜›ã€‚</p>
<p>åæ¥åƒé¥­çš„æ—¶å€™æƒ³åˆ°ï¼Œéš¾é“æ˜¯å› ä¸ºï¼Œæˆ‘æ˜¯åscaleçš„ï¼Œè€Œnginxæ˜¯æ—©å°±å¯åŠ¨çš„ï¼Œæ‰€ä»¥nginxå¯åŠ¨æ—¶æŠŠé…ç½®æ–‡ä»¶ä¸­çš„åŸŸåè§£æåˆ°äº†ä¸€ä¸ªå›ºå®šçš„IPã€‚è€Œæˆ‘åœ¨containerä¸­<code>curl</code>æ¯æ¬¡éƒ½æ˜¯é‡æ–°è§£æçš„ï¼Œæ‰€ä»¥æ¯æ¬¡è§£æçš„ç»“æœéƒ½æ˜¯round robinçš„</p>
<p>äºæ˜¯é‡å¯äº†ä¸€ä¸‹nginx</p>
<p>docker-compose restart nginx</p>
<p><img src="/images/2021021017464153.jpeg" alt="å›¾åƒ"></p>
<p>çœ‹èµ·æ¥ç ´æ¡ˆäº†ï¼Œè¯·æ±‚å‡åŒ€åˆ†å¸ƒåˆ°äº†5ä¸ªcontainerä¸­ã€‚ [v_blue]<a target="_blank" rel="noopener" href="https://twitter.com/dev_techmoe/status/1359372686598766592?s=20">æ„Ÿè°¢techmoeæŒ‡å‡º</a>ï¼Œå…¶å®åº”è¯¥ä¸æ˜¯å›ºå®šçš„ï¼Œæ–‡æ¡£è¯´nginxé»˜è®¤çš„resolveræ˜¯éµå¾ªDNS recordçš„TTLå€¼çš„ï¼Œå¯¹nginxè¿›ç¨‹reloadåº”è¯¥å°±å¯ä»¥åˆ·æ–°ç¼“å­˜ï¼Œè®©nginxé‡æ–°è§£æã€‚ [&#x2F;v_blue] é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œåœ¨å•æœºä¸Šscaleï¼Œæ˜¯å¦æœ‰å¿…è¦ï¼Ÿ</p>
<p>ä»æˆ‘ä¸ªäººçš„è§’åº¦æ¥è®²ï¼Œæ„ä¹‰ä¼¼ä¹ä¸å¤ªå¤§ã€‚æˆ‘è§‰å¾—ï¼Œå¦‚æœå•ä¸ªå®¹å™¨ï¼ˆè¿›ç¨‹ï¼‰å­˜åœ¨æ€§èƒ½ç“¶é¢ˆï¼Œæ¯”å¦‚è¯´å•è¿›ç¨‹&#x2F;å•çº¿ç¨‹ï¼Œåªèƒ½ç”¨ä¸€ä¸ªCPUå®¿ä¸»æœºæœ‰æ°å·§æ˜¯å¤šæ ¸å¿ƒï¼Œå¤šä¸ªè¿›ç¨‹å¯ä»¥æ˜æ˜¾æå‡æ€§èƒ½ï¼Œé‚£ä¹ˆscaleä¸€ä¸‹è¿˜æ˜¯å¯ä»¥çš„ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä¸‡ä¸€æˆ‘å‚»äº†å§å”§çš„è¿™ä¹ˆå†™çš„ä»£ç ï¼š</p>
<p>class ResourceHandler(BaseHandler):<br>    executor &#x3D; ThreadPoolExecutor(5)</p>
<pre><code>@run\_on\_executor()....
</code></pre>
<p>é‚£ä¹ˆscaleä¸€ä¸‹ï¼Œè¿˜æ˜¯æœ‰å¾ˆå¤§å¸Œæœ›çš„ã€‚</p>
<p>ä¸è¿‡æˆ‘å½“ç„¶æ²¡è¿™ä¹ˆå‚»ï¼Œæ‰€ä»¥è¿™é‡Œscaleå¯¹æˆ‘å¯èƒ½ç”¨å¤„ä¸å¤ªå¤§ã€‚</p>
<p>å½“ç„¶äº†ï¼Œè¿˜æ˜¯ç”¨kubernetesæœ€çˆ½:-)å¯æƒœä¿ºå¹¶ä¸ä¼šä¹Ÿæ²¡é‚£ä¹ˆå¤šæœºå™¨å»æ:-(</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/02/10/docker-scale/index/" data-id="clhp7rtf8001qs2qrh4iib315" data-title="ä½¿ç”¨docker scaleæ—¶é‡åˆ°çš„ä¸€ç‚¹å°é—®é¢˜" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/5/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><a class="page-number" href="/page/8/">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/23/">23</a><a class="extend next" rel="next" href="/page/7/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/azure/">azure</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/china/">china</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/china/justsay/">justsay</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/cloudflare/">cloudflare</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/gfw/">gfw</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/it/">it</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/it/justsay/">justsay</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/it/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/it/security/">security</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/it/share/">share</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/justsay/">justsay</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/justsay/gfw/">gfw</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/justsay/program/">program</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/linux/security/">security</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/website/">website</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/program/">program</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/program/share/">share</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/security/">security</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/security/justsay/">justsay</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/security/program/">program</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/share/">share</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/website/">website</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/website/program/">program</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/what/">what</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/what/gfw/">gfw</a></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/" rel="tag">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ubuntu/" rel="tag">ubuntu</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/linux/" style="font-size: 10px;">linux</a> <a href="/tags/ubuntu/" style="font-size: 10px;">ubuntu</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/09/">September 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/08/">August 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/07/">July 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/04/">April 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/03/">March 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/02/">February 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/12/">December 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/11/">November 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">April 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">March 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">February 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">January 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">September 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">August 2015</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/09/27/workers-function/index/">å°† Cloudflare Workers è¿ç§»åˆ° Azure Function</a>
          </li>
        
          <li>
            <a href="/2024/09/21/one-api-clickhouse/index/">one-api/new-apiæ€§èƒ½ä¼˜åŒ–ï¼šä½¿ç”¨ ClickHouse ä½œä¸ºæ—¥å¿—ç³»ç»Ÿ</a>
          </li>
        
          <li>
            <a href="/2024/08/03/stripe-fraud/index/">Stripe å¦‚ä½•å®‰å…¨æ”¶æ¬¾å¹¶é¿å…ç›—åˆ·ä¸æµ‹å¡</a>
          </li>
        
          <li>
            <a href="/2024/07/27/hide-in-cf/index/">éšè—äº Cloudflare çš„å…¨çƒç½‘ç»œä¹‹ä¸­</a>
          </li>
        
          <li>
            <a href="/2024/07/17/azure-waf/index/">æ•‘å‘½ï¼æˆ‘çš„ Azure Front Door WAF è§„åˆ™ä¸ç”Ÿæ•ˆæ€ä¹ˆåŠï¼</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 Bennyå°åœŸè±†<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>