<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>ä½¿ç”¨grafana+influxdb+telegrafå®‰å…¨çš„æ­å»ºä¸€ä¸ªç›‘æ§å¹³å° | åœŸè±†ä¸å¥½åƒ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="ä½œä¸ºä¸€åªæœ‰å¾ˆå¤šæœåŠ¡å™¨çš„èŒæ–°ï¼Œå®æ—¶æŒæ¡æœåŠ¡å™¨çš„çŠ¶æ€æ˜¯éå¸¸å¿…é¡»çš„ã€‚ å‰æ®µæ—¶é—´ï¼Œç”±äºNodeQueryå‡ºé—®é¢˜äº†ï¼Œäºæ˜¯å°±æƒ³ç€æ¢ä¸€ä¸ªç›‘æ§å¹³å°ã€‚å½“ç„¶åœ¨ç§»é™¤nq-agentçš„æ—¶å€™å°±æ‰‹æŠ–ç»™&#x2F;etcåˆ é™¤äº†ã€‚ é‚£ä¹ˆä»Šå¤©å°±æ¥è®°å½•ä¸€ä¸‹å¦‚ä½•æ­å»ºä¸€ä¸ªä¸­å¿ƒåŒ–çš„ç›‘æ§å¹³å°ã€‚ ä¸€äº›æ¦‚å¿µçš„æ˜ç¡®æ—¢ç„¶è¦ç›‘æ§æœåŠ¡å™¨ï¼Œé‚£ä¹ˆå¿…ç„¶è¦æœ‰ä¸€ä¸ªç¨‹åºè¿è¡Œåœ¨æœåŠ¡å™¨ä¸Šï¼Œè¿™ä¸ªæˆ‘ä»¬ä¸€èˆ¬ç§°ä½œagentï¼Œåœ¨æˆ‘ä»¬è¿™é‡Œå°±æ˜¯telegrafï¼›å¦å¤–ä¸€ä¸ªè´Ÿè´£è§£æï¼Œå­˜">
<meta property="og:type" content="article">
<meta property="og:title" content="ä½¿ç”¨grafana+influxdb+telegrafå®‰å…¨çš„æ­å»ºä¸€ä¸ªç›‘æ§å¹³å°">
<meta property="og:url" content="http://example.com/2019/07/07/grafana-influxdb-telegraf/index/index.html">
<meta property="og:site_name" content="åœŸè±†ä¸å¥½åƒ">
<meta property="og:description" content="ä½œä¸ºä¸€åªæœ‰å¾ˆå¤šæœåŠ¡å™¨çš„èŒæ–°ï¼Œå®æ—¶æŒæ¡æœåŠ¡å™¨çš„çŠ¶æ€æ˜¯éå¸¸å¿…é¡»çš„ã€‚ å‰æ®µæ—¶é—´ï¼Œç”±äºNodeQueryå‡ºé—®é¢˜äº†ï¼Œäºæ˜¯å°±æƒ³ç€æ¢ä¸€ä¸ªç›‘æ§å¹³å°ã€‚å½“ç„¶åœ¨ç§»é™¤nq-agentçš„æ—¶å€™å°±æ‰‹æŠ–ç»™&#x2F;etcåˆ é™¤äº†ã€‚ é‚£ä¹ˆä»Šå¤©å°±æ¥è®°å½•ä¸€ä¸‹å¦‚ä½•æ­å»ºä¸€ä¸ªä¸­å¿ƒåŒ–çš„ç›‘æ§å¹³å°ã€‚ ä¸€äº›æ¦‚å¿µçš„æ˜ç¡®æ—¢ç„¶è¦ç›‘æ§æœåŠ¡å™¨ï¼Œé‚£ä¹ˆå¿…ç„¶è¦æœ‰ä¸€ä¸ªç¨‹åºè¿è¡Œåœ¨æœåŠ¡å™¨ä¸Šï¼Œè¿™ä¸ªæˆ‘ä»¬ä¸€èˆ¬ç§°ä½œagentï¼Œåœ¨æˆ‘ä»¬è¿™é‡Œå°±æ˜¯telegrafï¼›å¦å¤–ä¸€ä¸ªè´Ÿè´£è§£æï¼Œå­˜">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/images/2019070704385117.png">
<meta property="og:image" content="http://example.com/images/2019070704385269.png">
<meta property="og:image" content="http://example.com/images/2019070704385387.png">
<meta property="article:published_time" content="2019-07-07T00:00:00.000Z">
<meta property="article:modified_time" content="2023-05-15T18:16:50.445Z">
<meta property="article:author" content="Bennyå°åœŸè±†">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/images/2019070704385117.png">
  
    <link rel="alternate" href="/atom.xml" title="åœŸè±†ä¸å¥½åƒ" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">åœŸè±†ä¸å¥½åƒ</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-grafana-influxdb-telegraf/index" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/07/07/grafana-influxdb-telegraf/index/" class="article-date">
  <time class="dt-published" datetime="2019-07-07T00:00:00.000Z" itemprop="datePublished">2019-07-07</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/linux/">linux</a>â–º<a class="article-category-link" href="/categories/linux/website/">website</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      ä½¿ç”¨grafana+influxdb+telegrafå®‰å…¨çš„æ­å»ºä¸€ä¸ªç›‘æ§å¹³å°
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>ä½œä¸ºä¸€åªæœ‰å¾ˆå¤šæœåŠ¡å™¨çš„èŒæ–°ï¼Œå®æ—¶æŒæ¡æœåŠ¡å™¨çš„çŠ¶æ€æ˜¯éå¸¸å¿…é¡»çš„ã€‚</p>
<p>å‰æ®µæ—¶é—´ï¼Œç”±äº<a target="_blank" rel="noopener" href="https://nodequery.com/">NodeQuery</a>å‡ºé—®é¢˜äº†ï¼Œäºæ˜¯å°±æƒ³ç€æ¢ä¸€ä¸ªç›‘æ§å¹³å°ã€‚å½“ç„¶åœ¨ç§»é™¤nq-agentçš„æ—¶å€™<a target="_blank" rel="noopener" href="https://dmesg.app/rm-etc.html">å°±æ‰‹æŠ–ç»™&#x2F;etcåˆ é™¤äº†</a>ã€‚</p>
<p>é‚£ä¹ˆä»Šå¤©å°±æ¥è®°å½•ä¸€ä¸‹å¦‚ä½•æ­å»ºä¸€ä¸ªä¸­å¿ƒåŒ–çš„ç›‘æ§å¹³å°ã€‚</p>
<h2 id="ä¸€äº›æ¦‚å¿µçš„æ˜ç¡®"><a href="#ä¸€äº›æ¦‚å¿µçš„æ˜ç¡®" class="headerlink" title="ä¸€äº›æ¦‚å¿µçš„æ˜ç¡®"></a>ä¸€äº›æ¦‚å¿µçš„æ˜ç¡®</h2><p>æ—¢ç„¶è¦ç›‘æ§æœåŠ¡å™¨ï¼Œé‚£ä¹ˆå¿…ç„¶è¦æœ‰ä¸€ä¸ªç¨‹åºè¿è¡Œåœ¨æœåŠ¡å™¨ä¸Šï¼Œè¿™ä¸ªæˆ‘ä»¬ä¸€èˆ¬ç§°ä½œagentï¼Œåœ¨æˆ‘ä»¬è¿™é‡Œå°±æ˜¯telegrafï¼›å¦å¤–ä¸€ä¸ªè´Ÿè´£è§£æï¼Œå­˜å‚¨ï¼Œå±•ç¤ºæ•°æ®çš„ï¼Œåœ¨æˆ‘ä»¬è¿™é‡Œå°±æ˜¯InfluxDBå­˜å‚¨ï¼Œgrafanaå±•ç¤ºè§£ææ•°æ®ã€‚</p>
<p>å¦‚æœä½¿ç”¨zabbixçš„è¯ï¼Œé‚£ä¹ˆzabbix-agentå°±å……å½“äº†é‡‡é›†å™¨ï¼Œzabbix-serverå’Œzabbix-frontendå°±å……å½“äº†è§£æå±•ç¤ºæ•°æ®çš„ã€‚ï¼ˆzabbixå¤ªä¸‘äº†ï¼Œæ¨¡æ¿ä¸ä¼šé…â€¦â€¦ï¼‰</p>
<h2 id="æ¶æ„çš„è®¾è®¡"><a href="#æ¶æ„çš„è®¾è®¡" class="headerlink" title="æ¶æ„çš„è®¾è®¡"></a>æ¶æ„çš„è®¾è®¡</h2><p>ç”±äºéœ€è¦ç›‘æ§å¤šå°æœåŠ¡å™¨ï¼Œé‚£ä¹ˆæ¶æ„çš„è®¾è®¡ä¹Ÿæ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œå¯¹äºéœ€è¦è·¨å…¬ç½‘è€Œä¸æ˜¯å…¨å†…ç½‘çš„æƒ…å†µæ¥è¯´ï¼Œæœ‰è¿™æ ·ä¸¤ç§æ€è·¯ï¼š</p>
<ul>
<li>è¢«åŠ¨æ¨¡å¼ï¼šé‡‡é›†å™¨æ”¶é›†æ•°æ®ï¼Œå‘é€ç»™serverï¼Œè¿™ç§æ¶æ„è¦æ±‚serverå¿…é¡»æœ‰å…¬ç½‘IP</li>
<li>ä¸»åŠ¨æ¨¡å¼ï¼šé‡‡é›†å™¨åªæ˜¯è¿è¡Œï¼Œç”±serverä¸»åŠ¨è®¿é—®é‡‡é›†å™¨è·å¾—æ•°æ®ï¼Œè¿™å°±éœ€è¦æ‰€æœ‰çš„agentå¿…é¡»æœ‰å…¬ç½‘IP</li>
</ul>
<p>å¯¹äºè¢«åŠ¨æ¨¡å¼ï¼Œä½¿ç”¨Telegraf+InfluxDB+Grafanaæ˜¯æ¯”è¾ƒå¥½çš„é€‰æ‹©ï¼Œåªéœ€è¦å°†InfluxDBéƒ¨ç½²åœ¨å…·æœ‰å…¬ç½‘IPçš„æœåŠ¡å™¨ä¸Šå°±å¯ä»¥äº†ï¼Œå…¶ä»–æœåŠ¡å™¨æ˜¯å¦å…·æœ‰å…¬ç½‘IPå¹¶ä¸é‡è¦ã€‚</p>
<p>å¯¹äºä¸»åŠ¨æ¨¡å¼ï¼Œä½¿ç”¨node exporter+Prometheus+Grafanaæ˜¯æ¯”è¾ƒåˆé€‚çš„ã€‚</p>
<p>å¯¹äºä¸¤ç§éƒ½æƒ³è¦çš„å‘¢ï¼zabbixå•Šï¼Œä¸»åŠ¨è¢«åŠ¨éƒ½æ”¯æŒï¼Œå°±æ˜¯æœ‰ç‚¹ä¸‘(â€²Ğ´ï½€ )â€¦å½¡â€¦å½¡</p>
<p>æ‰€ä»¥æ€»ä½“çš„æ¶æ„å°±æ˜¯ï¼š</p>
<p>Telegraf â€“&gt; InfluxDB &lt;â€“&gt; Grafana</p>
<h2 id="å®‰å…¨æ€§çš„è€ƒè™‘"><a href="#å®‰å…¨æ€§çš„è€ƒè™‘" class="headerlink" title="å®‰å…¨æ€§çš„è€ƒè™‘"></a>å®‰å…¨æ€§çš„è€ƒè™‘</h2><p>ç”±äºæ•°æ®éœ€è¦è·¨å…¬ç½‘ä¼ è¾“ï¼Œé‚£ä¹ˆå®‰å…¨æ€§ä¸Šçš„è€ƒè™‘å°±æ˜¯å¿…ä¸å¯å°‘çš„äº†ã€‚é‚£ä¹ˆè¿™ä¸ªé—®é¢˜æ€ä¹ˆè§£å†³å‘¢ï¼Ÿ</p>
<h3 id="åŠ å¯†ï¼Œè®¤è¯ï¼Œæˆæƒ"><a href="#åŠ å¯†ï¼Œè®¤è¯ï¼Œæˆæƒ" class="headerlink" title="åŠ å¯†ï¼Œè®¤è¯ï¼Œæˆæƒ"></a>åŠ å¯†ï¼Œè®¤è¯ï¼Œæˆæƒ</h3><p>åœ¨æˆ‘ä»¬è¿™ç§æƒ…æ™¯ä¸‹ï¼Œä¸InfluxDBä¹‹é—´çš„é€šä¿¡è‡³å°‘ä¹Ÿè¦å®ç°åŠ å¯†ã€è®¤è¯çš„ã€‚</p>
<p>åŠ å¯†æ„å‘³ç€ä¸InfluxDBä¹‹é—´çš„é€šä¿¡æ˜¯å®‰å…¨çš„ï¼Œå…¶ä»–äººæ— æ³•è§£å¯†ï¼Œ<strong>è¿™ä¸€ç‚¹åœ¨è·¨å…¬ç½‘ä¼ è¾“çš„æ—¶å€™æ˜¯å¿…ä¸å¯å°‘çš„</strong>ï¼›</p>
<p>è®¤è¯æ„å‘³ç€åªæœ‰ç‰¹å®šèº«ä»½çš„ç”¨æˆ·æ‰å¯ä»¥è®¿é—®æ•°æ®ï¼Œæ¯”å¦‚è¾“å…¥äº†æ­£ç¡®çš„ç”¨æˆ·åå’Œå¯†ç æ‰å¯ä»¥è®¿é—®ï¼›</p>
<p>æˆæƒæ„å‘³ç€ï¼Œä½ è¿™ä¸ªç”¨æˆ·å¯ä»¥å¹²ä»€ä¹ˆäº‹æƒ…ï¼Œæ˜¯åªèƒ½æŸ¥è¯¢è¿˜æ˜¯ä»€ä¹ˆéƒ½èƒ½å¹²ã€‚</p>
<p>ä¸ºäº†å®ç°åŠ å¯†ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨TLSé‚£ä¸€å¥—ï¼Œè¿™ä¸€ç‚¹å°±å¾ˆå¥½ç†è§£äº†ï¼ŒTLSå°±æ˜¯å¤©ç”Ÿå¹²è¿™äº‹çš„å˜›ã€‚</p>
<p>ä¸ºäº†å®ç°è®¤è¯ä¸æˆæƒï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨HTTP Basic Authï¼Œåˆ›å»ºä¸€å¥—ç”¨æˆ·åå¯†ç ã€‚</p>
<h3 id="é˜²ç«å¢™çš„ä¿æŠ¤"><a href="#é˜²ç«å¢™çš„ä¿æŠ¤" class="headerlink" title="é˜²ç«å¢™çš„ä¿æŠ¤"></a>é˜²ç«å¢™çš„ä¿æŠ¤</h3><p>é™¤äº†ä»¥ä¸Šæ“ä½œä¹‹å¤–ï¼Œä½¿ç”¨é˜²ç«å¢™é™åˆ¶è®¿é—®æ•°æ®åº“çš„æºIPä¹Ÿæ˜¯ä¸€ç§è¡¥å……æ–¹æ³•ã€‚å½“ç„¶äº†åŠ å¯†æ˜¯å¿…ä¸å¯å°‘çš„ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›æ–¹æ³•ï¼Œæ¯”å¦‚TLSå®¢æˆ·ç«¯è¯ä¹¦ç­‰ç­‰ã€‚</p>
<h3 id="å¤§å†…ç½‘"><a href="#å¤§å†…ç½‘" class="headerlink" title="å¤§å†…ç½‘"></a>å¤§å†…ç½‘</h3><p>æœ‰äº›æ—¶å€™é…ç½®ä¸Šé¢è¿™äº›å¤ªéº»çƒ¦äº†ï¼Œé‚£ä¹ˆè¿˜æœ‰ä¸€ä¸ªæ€è·¯å°±æ˜¯ç»„å»ºå¤§å†…ç½‘ï¼å¯ä»¥è€ƒè™‘ç”¨WireGuardã€OpenVPNç”šè‡³æ˜¯SSHéš§é“è¯•è¯•çœ‹ã€‚</p>
<p>ä¸è¿‡ä¹Ÿæœ‰ç¼ºç‚¹ï¼Œä¸€æ˜¯å¦‚æœæœåŠ¡å™¨æ˜¯æµ·å¤–çš„ï¼Œé‚£ä¹ˆç”±äºGFWçš„å­˜åœ¨ï¼Œå¯èƒ½æœ‰ç‚¹ä¸å¤ªå‹å¥½ï¼›äºŒæ˜¯å¯èƒ½ä¸å¤ªå¥½é…ï¼Œå°¤å…¶æ˜¯OpenVPNï¼Œä¸€ä¸å°å¿ƒå°±å…¨å±€äº†ã€‚</p>
<h2 id="éƒ¨ç½²ä¸é…ç½®"><a href="#éƒ¨ç½²ä¸é…ç½®" class="headerlink" title="éƒ¨ç½²ä¸é…ç½®"></a>éƒ¨ç½²ä¸é…ç½®</h2><p>ä¸‹é¢å°±ç®€å•è¯´è¯´å¦‚ä½•å®‰å…¨çš„é…ç½®è¿™ä¹ˆä¸€å¥—å¹³å°</p>
<h2 id="InfluxDB"><a href="#InfluxDB" class="headerlink" title="InfluxDB"></a>InfluxDB</h2><p><a target="_blank" rel="noopener" href="https://portal.influxdata.com/downloads/">https://portal.influxdata.com/downloads/</a></p>
<p>ä»é¡µé¢ä¸Šé€‰æ‹©é€‚åˆä½ çš„æ“ä½œç³»ç»Ÿçš„ç‰ˆæœ¬ï¼Œå¯¹äºæˆ‘ä½¿ç”¨çš„Ubuntuæ¥è¯´ï¼Œä½¿ç”¨è¿™ä¸ªå°±å¯ä»¥äº†</p>
<p>wget <a target="_blank" rel="noopener" href="https://dl.influxdata.com/influxdb/releases/influxdb/_1.7.7/_amd64.deb">https://dl.influxdata.com/influxdb/releases/influxdb\_1.7.7\_amd64.deb</a><br>sudo dpkg -i influxdb_1.7.7_amd64.deb</p>
<h3 id="é…ç½®SSL"><a href="#é…ç½®SSL" class="headerlink" title="é…ç½®SSL"></a>é…ç½®SSL</h3><p>è¿™ä¸€æ­¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨opensslè‡ªç­¾åçš„è¯ä¹¦ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨Letâ€™s Encryptç”³è¯·ä¸€ä¸ªçœŸæ­£çš„è¯ä¹¦ï¼ˆè¿™å°±éœ€è¦å¼„ä¸ªåŸŸåå•¦ï¼‰</p>
<p>ä»¥è‡ªç­¾åè¯ä¹¦æ¥è¯´</p>
<p>sudo openssl req -x509 -nodes -newkey rsa:2048 -keyout &#x2F;etc&#x2F;ssl&#x2F;influxdb-selfsigned.key -out &#x2F;etc&#x2F;ssl&#x2F;influxdb-selfsigned.crt -days 3650<br>chown influxdb:influxdb &#x2F;etc&#x2F;ssl&#x2F;influxdb-selfsigned.*</p>
<p>ä¿®æ”¹é…ç½®æ–‡ä»¶ <code>/etc/influxdb/influxdb.conf</code>ï¼Œéœ€è¦æ›´æ”¹ä¸‰å¤„</p>
<p>https-enabled &#x3D; true</p>
<p>https-certificate &#x3D; â€œ&#x2F;etc&#x2F;ssl&#x2F;influxdb-selfsigned.crtâ€<br>https-private-key &#x3D; â€œ&#x2F;etc&#x2F;ssl&#x2F;influxdb-selfsigned.keyâ€</p>
<p>å¦‚æœä½¿ç”¨Letâ€™s Encryptçš„è¯ï¼Œ<code>https-certificate</code>æ”¹ä¸º<code>fullchain.pem</code>çš„è·¯å¾„ï¼Œ<code>https-private-key</code>æ”¹ä¸º<code>privkey.key</code>çš„è·¯å¾„ï¼Œæ³¨æ„ä¸‹æƒé™å°±å¯ä»¥äº†ã€‚</p>
<p>ç„¶åé‡å¯</p>
<p>sudo systemctl restart influxdb</p>
<p>éªŒè¯</p>
<p>influx -ssl -unsafeSsl -host &lt;domain_name&gt;.com</p>
<h3 id="é…ç½®è®¤è¯ä¸æˆæƒ"><a href="#é…ç½®è®¤è¯ä¸æˆæƒ" class="headerlink" title="é…ç½®è®¤è¯ä¸æˆæƒ"></a>é…ç½®è®¤è¯ä¸æˆæƒ</h3><p>åˆ›å»ºä¸€ä¸ªç®¡ç†å‘˜ç”¨æˆ·</p>
<p>ä½¿ç”¨ä¸Šè¿°<code>influx -ssl -unsafeSsl -host &lt;domain_name&gt;.com</code>ç™»å½•åˆ°æœåŠ¡å™¨</p>
<p>CREATE USER paul WITH PASSWORD â€˜timeseries4daysâ€™ WITH ALL PRIVILEGES</p>
<p>å¼€å¯è®¤è¯</p>
<p>ä¿®æ”¹é…ç½®æ–‡ä»¶<code>/etc/influxdb/influxdb.conf</code></p>
<p>auth-enabled &#x3D; true</p>
<p>é‡å¯è¿›ç¨‹</p>
<p>sudo systemctl restart influxdb</p>
<p>æ­¤æ—¶å†ä½¿ç”¨<code>influx -ssl -unsafeSsl -host &lt;domain_name&gt;.com</code>ç™»å½•åˆ°æœåŠ¡å™¨ï¼Œ<code>show databases</code>å°±ä¼šæŠ¥é”™ï¼Œåªæœ‰authä¹‹åæ‰å¯ä»¥</p>
<h2 id="Telegraf"><a href="#Telegraf" class="headerlink" title="Telegraf"></a>Telegraf</h2><p><a target="_blank" rel="noopener" href="https://github.com/influxdata/telegraf/releases">https://github.com/influxdata/telegraf/releases</a></p>
<p><a target="_blank" rel="noopener" href="https://portal.influxdata.com/downloads/">https://portal.influxdata.com/downloads/</a></p>
<p>ä»ä»¥ä¸Šç½‘å€ä¸‹è½½å¯¹åº”ä½ çš„æ“ä½œç³»ç»Ÿç‰ˆæœ¬çš„Telegrafï¼Œç„¶åå®‰è£…ï¼ˆarmhfå¯¹åº”æ ‘è“æ´¾ï¼‰</p>
<h3 id="é…ç½®æ•°æ®åº“æœåŠ¡å™¨"><a href="#é…ç½®æ•°æ®åº“æœåŠ¡å™¨" class="headerlink" title="é…ç½®æ•°æ®åº“æœåŠ¡å™¨"></a>é…ç½®æ•°æ®åº“æœåŠ¡å™¨</h3><p>ç¼–è¾‘<code>/etc/telegraf/telegraf.conf</code>ï¼Œæ‰¾åˆ°urls&#x3D;â€¦ï¼Œæ”¹æˆhttpså°±å¥½äº†</p>
<p>urls &#x3D; [â€œhttps:&#x2F;&#x2F;&lt;domain_name&gt;.com:8086â€]<br>database &#x3D; â€œtelegrafâ€</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½¿ç”¨çš„æ˜¯è‡ªç­¾åè¯ä¹¦ï¼Œé‚£ä¹ˆ<code>insecure_skip_verify = true</code>ä¹Ÿè¦é…ç½®</p>
<h3 id="é…ç½®è®¤è¯"><a href="#é…ç½®è®¤è¯" class="headerlink" title="é…ç½®è®¤è¯"></a>é…ç½®è®¤è¯</h3><p>ç¼–è¾‘<code>/etc/telegraf/telegraf.conf</code></p>
<p>æ ¹æ®ä¸Šé¢é…ç½®çš„è¿›è¡Œé€‚å½“æ›´æ”¹</p>
<p>timeout &#x3D; â€œ5sâ€</p>
<p>username &#x3D; â€œtelegrafâ€ #?<br>password &#x3D; â€œmetricsmetricsmetricsmetricsâ€ #?</p>
<h3 id="é…ç½®é‡‡é›†å†…å®¹"><a href="#é…ç½®é‡‡é›†å†…å®¹" class="headerlink" title="é…ç½®é‡‡é›†å†…å®¹"></a>é…ç½®é‡‡é›†å†…å®¹</h3><p>æŠŠè¿™äº›è¿½åŠ åˆ°telegraf.confæœ«å°¾å°±å¯ä»¥äº†</p>
<p>[[inputs.cpu]]<br>percpu &#x3D; true<br>totalcpu &#x3D; true<br>collect_cpu_time &#x3D; false<br>report_active &#x3D; false<br>[[inputs.disk]]<br>ignore_fs &#x3D; [â€œtmpfsâ€, â€œdevtmpfsâ€, â€œdevfsâ€]<br>[[inputs.io]]<br>[[inputs.mem]]<br>[[inputs.net]]<br>[[inputs.system]]<br>[[inputs.swap]]<br>[[inputs.netstat]]<br>[[inputs.processes]]<br>[[inputs.kernel]]</p>
<h2 id="Grafana"><a href="#Grafana" class="headerlink" title="Grafana"></a>Grafana</h2><p><a target="_blank" rel="noopener" href="https://grafana.com/grafana/download">https://grafana.com/grafana/download</a></p>
<p>åŒæ ·ä¸‹è½½å®‰è£…é€‚åˆè‡ªå·±å¹³å°çš„ç¨‹åº</p>
<p>ç„¶å<a target="_blank" rel="noopener" href="http://ip:3000/">http://ip:3000</a></p>
<p>é»˜è®¤çš„ç”¨æˆ·åå¯†ç æ˜¯adminã€admin</p>
<p>Add datasourceé€‰æ‹©influxdbï¼ŒæŒ‰ç…§å¦‚ä¸‹å›¾æ‰€ç¤ºé…ç½®</p>
<p><img src="/images/2019070704385117.png"></p>
<h3 id="å¯¼å…¥dashboard"><a href="#å¯¼å…¥dashboard" class="headerlink" title="å¯¼å…¥dashboard"></a>å¯¼å…¥dashboard</h3><p>å¯¼å…¥è¿™ä¸ªdashboard</p>
<p><a target="_blank" rel="noopener" href="https://grafana.com/dashboards/5955">https://grafana.com/dashboards/5955</a></p>
<p><img src="/images/2019070704385269.png"></p>
<p>ä¹‹åä¿å­˜å°±å¯ä»¥çœ‹åˆ°ç»“æœå•¦ï¼</p>
<p><img src="/images/2019070704385387.png"></p>
<h2 id="å…¶ä»–ä¼˜åŒ–"><a href="#å…¶ä»–ä¼˜åŒ–" class="headerlink" title="å…¶ä»–ä¼˜åŒ–"></a>å…¶ä»–ä¼˜åŒ–</h2><h3 id="é…ç½®é˜²ç«å¢™"><a href="#é…ç½®é˜²ç«å¢™" class="headerlink" title="é…ç½®é˜²ç«å¢™"></a>é…ç½®é˜²ç«å¢™</h3><p>åªå…è®¸æŸä¸ªIPè®¿é—®8086</p>
<p>ufw allow from xx.xx.xx.xx to any port 8086</p>
<h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h2><p><a target="_blank" rel="noopener" href="https://docs.influxdata.com/influxdb/v1.7/administration/https_setup/">https://docs.influxdata.com/influxdb/v1.7/administration/https_setup&#x2F;</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.influxdata.com/influxdb/v1.7/administration/authentication_and_authorization/">https://docs.influxdata.com/influxdb/v1.7/administration/authentication_and_authorization&#x2F;</a></p>
<p><a target="_blank" rel="noopener" href="https://grafana.com/dashboards/5955">https://grafana.com/dashboards/5955</a></p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/dfd329d30891">https://www.jianshu.com/p/dfd329d30891</a></p>
<p><a target="_blank" rel="noopener" href="https://grafana.com/docs/installation/behind_proxy/">https://grafana.com/docs/installation/behind_proxy&#x2F;</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2019/07/07/grafana-influxdb-telegraf/index/" data-id="clhp7rtgg003bs2qrelrad0no" data-title="ä½¿ç”¨grafana+influxdb+telegrafå®‰å…¨çš„æ­å»ºä¸€ä¸ªç›‘æ§å¹³å°" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/08/09/vbox-ping/index/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          VirtualBoxä¸Šçš„è™šæ‹Ÿæœºæ— æ³•è¢«ping
        
      </div>
    </a>
  
  
    <a href="/2019/06/27/rm-etc/index/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">æ‰‹ä¸€æŠ–ï¼Œæˆ‘åˆ é™¤äº†etcç›®å½•</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/china/">china</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/china/justsay/">justsay</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/cloudflare/">cloudflare</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/gfw/">gfw</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/it/">it</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/it/justsay/">justsay</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/it/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/it/security/">security</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/it/share/">share</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/justsay/">justsay</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/justsay/gfw/">gfw</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/justsay/program/">program</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/linux/security/">security</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/website/">website</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/program/">program</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/program/share/">share</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/security/">security</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/security/justsay/">justsay</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/security/program/">program</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/share/">share</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/website/">website</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/website/program/">program</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/what/">what</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/what/gfw/">gfw</a></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/" rel="tag">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ubuntu/" rel="tag">ubuntu</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/linux/" style="font-size: 10px;">linux</a> <a href="/tags/ubuntu/" style="font-size: 10px;">ubuntu</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/12/">December 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/11/">November 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">May 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">April 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">March 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">February 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/01/">January 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">September 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">August 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">July 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">February 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">January 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">September 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">August 2015</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/12/31/2023-end/index/">2023 å¹´ç»ˆæ€»ç»“</a>
          </li>
        
          <li>
            <a href="/2023/12/09/tron-trx/index/">ä½¿ç”¨ Tron(TRX) æ”¶æ¬¾</a>
          </li>
        
          <li>
            <a href="/2023/11/26/nodejs-dual-stack/index/">Node.js 18å‡çº§ï¼šåŒæ ˆåè®®è¸©å‘</a>
          </li>
        
          <li>
            <a href="/2023/11/25/steam-deck-stuck/index/">Steam Deck å¯åŠ¨æ¸¸æˆå¡ logo</a>
          </li>
        
          <li>
            <a href="/2023/11/09/es-ee-se-unicode/index/">Unicodeç¼–ç ä¹‹è°œï¼šä¸ºä»€ä¹ˆğŸ‡ªğŸ‡¸ğŸ‡ªğŸ‡ªåŒ…å«äº†ğŸ‡¸ğŸ‡ªï¼Ÿ</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 Bennyå°åœŸè±†<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>